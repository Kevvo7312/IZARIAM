
if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={};}YAHOO.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=(""+A[C]).split(".");E=YAHOO;for(B=(D[0]=="YAHOO")?1:0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]];}}return E;};YAHOO.log=function(D,A,C){var B=YAHOO.widget.Logger;if(B&&B.log){return B.log(D,A,C);}else{return false;}};YAHOO.register=function(A,E,D){var I=YAHOO.env.modules,B,H,G,F,C;if(!I[A]){I[A]={versions:[],builds:[]};}B=I[A];H=D.version;G=D.build;F=YAHOO.env.listeners;B.name=A;B.version=H;B.build=G;B.versions.push(H);B.builds.push(G);B.mainClass=E;for(C=0;C<F.length;C=C+1){F[C](B);}if(E){E.VERSION=H;E.BUILD=G;}else{YAHOO.log("mainClass is undefined for module "+A,"warn");}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(A){return YAHOO.env.modules[A]||null;};YAHOO.env.ua=function(){var D=function(H){var I=0;return parseFloat(H.replace(/\./g,function(){return(I++==1)?"":".";}));},G=navigator,F={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:G.cajaVersion,secure:false,os:null},C=navigator&&navigator.userAgent,E=window&&window.location,B=E&&E.href,A;F.secure=B&&(B.toLowerCase().indexOf("https")===0);if(C){if((/windows|win32/i).test(C)){F.os="windows";}else{if((/macintosh/i).test(C)){F.os="macintosh";}}if((/KHTML/).test(C)){F.webkit=1;}A=C.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){F.webkit=D(A[1]);if(/ Mobile\//.test(C)){F.mobile="Apple";}else{A=C.match(/NokiaN[^\/]*/);if(A){F.mobile=A[0];}}A=C.match(/AdobeAIR\/([^\s]*)/);if(A){F.air=A[0];}}if(!F.webkit){A=C.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){F.opera=D(A[1]);A=C.match(/Opera Mini[^;]*/);if(A){F.mobile=A[0];}}else{A=C.match(/MSIE\s([^;]*)/);if(A&&A[1]){F.ie=D(A[1]);}else{A=C.match(/Gecko\/([^\s]*)/);if(A){F.gecko=1;A=C.match(/rv:([^\s\)]*)/);if(A&&A[1]){F.gecko=D(A[1]);}}}}}}return F;}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var B=YAHOO_config.listener,A=YAHOO.env.listeners,D=true,C;if(B){for(C=0;C<A.length;C++){if(A[C]==B){D=false;break;}}if(D){A.push(B);}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var B=YAHOO.lang,A=Object.prototype,H="[object Array]",C="[object Function]",G="[object Object]",E=[],F=["toString","valueOf"],D={isArray:function(I){return A.toString.apply(I)===H;},isBoolean:function(I){return typeof I==="boolean";},isFunction:function(I){return(typeof I==="function")||A.toString.apply(I)===C;},isNull:function(I){return I===null;},isNumber:function(I){return typeof I==="number"&&isFinite(I);},isObject:function(I){return(I&&(typeof I==="object"||B.isFunction(I)))||false;},isString:function(I){return typeof I==="string";},isUndefined:function(I){return typeof I==="undefined";},_IEEnumFix:(YAHOO.env.ua.ie)?function(K,J){var I,M,L;for(I=0;I<F.length;I=I+1){M=F[I];L=J[M];if(B.isFunction(L)&&L!=A[M]){K[M]=L;}}}:function(){},extend:function(L,M,K){if(!M||!L){throw new Error("extend failed, please check that "+"all dependencies are included.");}var J=function(){},I;J.prototype=M.prototype;L.prototype=new J();L.prototype.constructor=L;L.superclass=M.prototype;if(M.prototype.constructor==A.constructor){M.prototype.constructor=M;}if(K){for(I in K){if(B.hasOwnProperty(K,I)){L.prototype[I]=K[I];}}B._IEEnumFix(L.prototype,K);}},augmentObject:function(M,L){if(!L||!M){throw new Error("Absorb failed, verify dependencies.");}var I=arguments,K,N,J=I[2];if(J&&J!==true){for(K=2;K<I.length;K=K+1){M[I[K]]=L[I[K]];}}else{for(N in L){if(J||!(N in M)){M[N]=L[N];}}B._IEEnumFix(M,L);}},augmentProto:function(L,K){if(!K||!L){throw new Error("Augment failed, verify dependencies.");}var I=[L.prototype,K.prototype],J;for(J=2;J<arguments.length;J=J+1){I.push(arguments[J]);}B.augmentObject.apply(this,I);},dump:function(I,N){var K,M,P=[],Q="{...}",J="f(){...}",O=", ",L=" => ";if(!B.isObject(I)){return I+"";}else{if(I instanceof Date||("nodeType"in I&&"tagName"in I)){return I;}else{if(B.isFunction(I)){return J;}}}N=(B.isNumber(N))?N:3;if(B.isArray(I)){P.push("[");for(K=0,M=I.length;K<M;K=K+1){if(B.isObject(I[K])){P.push((N>0)?B.dump(I[K],N-1):Q);}else{P.push(I[K]);}P.push(O);}if(P.length>1){P.pop();}P.push("]");}else{P.push("{");for(K in I){if(B.hasOwnProperty(I,K)){P.push(K+L);if(B.isObject(I[K])){P.push((N>0)?B.dump(I[K],N-1):Q);}else{P.push(I[K]);}P.push(O);}}if(P.length>1){P.pop();}P.push("}");}return P.join("");},substitute:function(Y,J,R){var N,M,L,U,V,X,T=[],K,O="dump",S=" ",I="{",W="}",Q,P;for(;;){N=Y.lastIndexOf(I);if(N<0){break;}M=Y.indexOf(W,N);if(N+1>=M){break;}K=Y.substring(N+1,M);U=K;X=null;L=U.indexOf(S);if(L>-1){X=U.substring(L+1);U=U.substring(0,L);}V=J[U];if(R){V=R(U,V,X);}if(B.isObject(V)){if(B.isArray(V)){V=B.dump(V,parseInt(X,10));}else{X=X||"";Q=X.indexOf(O);if(Q>-1){X=X.substring(4);}P=V.toString();if(P===G||Q>-1){V=B.dump(V,parseInt(X,10));}else{V=P;}}}else{if(!B.isString(V)&&!B.isNumber(V)){V="~-"+T.length+"-~";T[T.length]=K;}}Y=Y.substring(0,N)+V+Y.substring(M+1);}for(N=T.length-1;N>=0;N=N-1){Y=Y.replace(new RegExp("~-"+N+"-~"),"{"+T[N]+"}","g");}return Y;},trim:function(I){try{return I.replace(/^\s+|\s+$/g,"");}catch(J){return I;}},merge:function(){var L={},J=arguments,I=J.length,K;for(K=0;K<I;K=K+1){B.augmentObject(L,J[K],true);}return L;},later:function(P,J,Q,L,M){P=P||0;J=J||{};var K=Q,O=L,N,I;if(B.isString(Q)){K=J[Q];}if(!K){throw new TypeError("method undefined");}if(O&&!B.isArray(O)){O=[L];}N=function(){K.apply(J,O||E);};I=(M)?setInterval(N,P):setTimeout(N,P);return{interval:M,cancel:function(){if(this.interval){clearInterval(I);}else{clearTimeout(I);}}};},isValue:function(I){return(B.isObject(I)||B.isString(I)||B.isNumber(I)||B.isBoolean(I));}};B.hasOwnProperty=(A.hasOwnProperty)?function(I,J){return I&&I.hasOwnProperty(J);}:function(I,J){return!B.isUndefined(I[J])&&I.constructor.prototype[J]!==I[J];};D.augmentObject(B,D,true);YAHOO.util.Lang=B;B.augment=B.augmentProto;YAHOO.augment=B.augmentProto;YAHOO.extend=B.extend;})();YAHOO.register("yahoo",YAHOO,{version:"2.8.1",build:"19"});(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var E=YAHOO.util,L=YAHOO.lang,m=YAHOO.env.ua,A=YAHOO.lang.trim,d={},h={},N=/^t(?:able|d|h)$/i,X=/color$/i,K=window.document,W=K.documentElement,e="ownerDocument",n="defaultView",v="documentElement",t="compatMode",b="offsetLeft",P="offsetTop",u="offsetParent",Z="parentNode",l="nodeType",C="tagName",O="scrollLeft",i="scrollTop",Q="getBoundingClientRect",w="getComputedStyle",a="currentStyle",M="CSS1Compat",c="BackCompat",g="class",F="className",J="",B=" ",s="(?:^|\\s)",k="(?= |$)",U="g",p="position",f="fixed",V="relative",j="left",o="top",r="medium",q="borderLeftWidth",R="borderTopWidth",D=m.opera,I=m.webkit,H=m.gecko,T=m.ie;E.Dom={CUSTOM_ATTRIBUTES:(!W.hasAttribute)?{"for":"htmlFor","class":F}:{"htmlFor":"for","className":g},DOT_ATTRIBUTES:{},get:function(z){var AB,x,AA,y,Y,G;if(z){if(z[l]||z.item){return z;}if(typeof z==="string"){AB=z;z=K.getElementById(z);G=(z)?z.attributes:null;if(z&&G&&G.id&&G.id.value===AB){return z;}else{if(z&&K.all){z=null;x=K.all[AB];for(y=0,Y=x.length;y<Y;++y){if(x[y].id===AB){return x[y];}}}}return z;}if(YAHOO.util.Element&&z instanceof YAHOO.util.Element){z=z.get("element");}if("length"in z){AA=[];for(y=0,Y=z.length;y<Y;++y){AA[AA.length]=E.Dom.get(z[y]);}return AA;}return z;}return null;},getComputedStyle:function(G,Y){if(window[w]){return G[e][n][w](G,null)[Y];}else{if(G[a]){return E.Dom.IE_ComputedStyle.get(G,Y);}}},getStyle:function(G,Y){return E.Dom.batch(G,E.Dom._getStyle,Y);},_getStyle:function(){if(window[w]){return function(G,y){y=(y==="float")?y="cssFloat":E.Dom._toCamel(y);var x=G.style[y],Y;if(!x){Y=G[e][n][w](G,null);if(Y){x=Y[y];}}return x;};}else{if(W[a]){return function(G,y){var x;switch(y){case"opacity":x=100;try{x=G.filters["DXImageTransform.Microsoft.Alpha"].opacity;}catch(z){try{x=G.filters("alpha").opacity;}catch(Y){}}return x/100;case"float":y="styleFloat";default:y=E.Dom._toCamel(y);x=G[a]?G[a][y]:null;return(G.style[y]||x);}};}}}(),setStyle:function(G,Y,x){E.Dom.batch(G,E.Dom._setStyle,{prop:Y,val:x});},_setStyle:function(){if(T){return function(Y,G){var x=E.Dom._toCamel(G.prop),y=G.val;if(Y){switch(x){case"opacity":if(L.isString(Y.style.filter)){Y.style.filter="alpha(opacity="+y*100+")";if(!Y[a]||!Y[a].hasLayout){Y.style.zoom=1;}}break;case"float":x="styleFloat";default:Y.style[x]=y;}}else{}};}else{return function(Y,G){var x=E.Dom._toCamel(G.prop),y=G.val;if(Y){if(x=="float"){x="cssFloat";}Y.style[x]=y;}else{}};}}(),getXY:function(G){return E.Dom.batch(G,E.Dom._getXY);},_canPosition:function(G){return(E.Dom._getStyle(G,"display")!=="none"&&E.Dom._inDoc(G));},_getXY:function(){if(K[v][Q]){return function(y){var z,Y,AA,AF,AE,AD,AC,G,x,AB=Math.floor,AG=false;if(E.Dom._canPosition(y)){AA=y[Q]();AF=y[e];z=E.Dom.getDocumentScrollLeft(AF);Y=E.Dom.getDocumentScrollTop(AF);AG=[AB(AA[j]),AB(AA[o])];if(T&&m.ie<8){AE=2;AD=2;AC=AF[t];if(m.ie===6){if(AC!==c){AE=0;AD=0;}}if((AC===c)){G=S(AF[v],q);x=S(AF[v],R);if(G!==r){AE=parseInt(G,10);}if(x!==r){AD=parseInt(x,10);}}AG[0]-=AE;AG[1]-=AD;}if((Y||z)){AG[0]+=z;AG[1]+=Y;}AG[0]=AB(AG[0]);AG[1]=AB(AG[1]);}else{}return AG;};}else{return function(y){var x,Y,AA,AB,AC,z=false,G=y;if(E.Dom._canPosition(y)){z=[y[b],y[P]];x=E.Dom.getDocumentScrollLeft(y[e]);Y=E.Dom.getDocumentScrollTop(y[e]);AC=((H||m.webkit>519)?true:false);while((G=G[u])){z[0]+=G[b];z[1]+=G[P];if(AC){z=E.Dom._calcBorders(G,z);}}if(E.Dom._getStyle(y,p)!==f){G=y;while((G=G[Z])&&G[C]){AA=G[i];AB=G[O];if(H&&(E.Dom._getStyle(G,"overflow")!=="visible")){z=E.Dom._calcBorders(G,z);}if(AA||AB){z[0]-=AB;z[1]-=AA;}}z[0]+=x;z[1]+=Y;}else{if(D){z[0]-=x;z[1]-=Y;}else{if(I||H){z[0]+=x;z[1]+=Y;}}}z[0]=Math.floor(z[0]);z[1]=Math.floor(z[1]);}else{}return z;};}}(),getX:function(G){var Y=function(x){return E.Dom.getXY(x)[0];};return E.Dom.batch(G,Y,E.Dom,true);},getY:function(G){var Y=function(x){return E.Dom.getXY(x)[1];};return E.Dom.batch(G,Y,E.Dom,true);},setXY:function(G,x,Y){E.Dom.batch(G,E.Dom._setXY,{pos:x,noRetry:Y});},_setXY:function(G,z){var AA=E.Dom._getStyle(G,p),y=E.Dom.setStyle,AD=z.pos,Y=z.noRetry,AB=[parseInt(E.Dom.getComputedStyle(G,j),10),parseInt(E.Dom.getComputedStyle(G,o),10)],AC,x;if(AA=="static"){AA=V;y(G,p,AA);}AC=E.Dom._getXY(G);if(!AD||AC===false){return false;}if(isNaN(AB[0])){AB[0]=(AA==V)?0:G[b];}if(isNaN(AB[1])){AB[1]=(AA==V)?0:G[P];}if(AD[0]!==null){y(G,j,AD[0]-AC[0]+AB[0]+"px");}if(AD[1]!==null){y(G,o,AD[1]-AC[1]+AB[1]+"px");}if(!Y){x=E.Dom._getXY(G);if((AD[0]!==null&&x[0]!=AD[0])||(AD[1]!==null&&x[1]!=AD[1])){E.Dom._setXY(G,{pos:AD,noRetry:true});}}},setX:function(Y,G){E.Dom.setXY(Y,[G,null]);},setY:function(G,Y){E.Dom.setXY(G,[null,Y]);},getRegion:function(G){var Y=function(x){var y=false;if(E.Dom._canPosition(x)){y=E.Region.getRegion(x);}else{}return y;};return E.Dom.batch(G,Y,E.Dom,true);},getClientWidth:function(){return E.Dom.getViewportWidth();},getClientHeight:function(){return E.Dom.getViewportHeight();},getElementsByClassName:function(AB,AF,AC,AE,x,AD){AF=AF||"*";AC=(AC)?E.Dom.get(AC):null||K;if(!AC){return[];}var Y=[],G=AC.getElementsByTagName(AF),z=E.Dom.hasClass;for(var y=0,AA=G.length;y<AA;++y){if(z(G[y],AB)){Y[Y.length]=G[y];}}if(AE){E.Dom.batch(Y,AE,x,AD);}return Y;},hasClass:function(Y,G){return E.Dom.batch(Y,E.Dom._hasClass,G);},_hasClass:function(x,Y){var G=false,y;if(x&&Y){y=E.Dom._getAttribute(x,F)||J;if(Y.exec){G=Y.test(y);}else{G=Y&&(B+y+B).indexOf(B+Y+B)>-1;}}else{}return G;},addClass:function(Y,G){return E.Dom.batch(Y,E.Dom._addClass,G);},_addClass:function(x,Y){var G=false,y;if(x&&Y){y=E.Dom._getAttribute(x,F)||J;if(!E.Dom._hasClass(x,Y)){E.Dom.setAttribute(x,F,A(y+B+Y));G=true;}}else{}return G;},removeClass:function(Y,G){return E.Dom.batch(Y,E.Dom._removeClass,G);},_removeClass:function(y,x){var Y=false,AA,z,G;if(y&&x){AA=E.Dom._getAttribute(y,F)||J;E.Dom.setAttribute(y,F,AA.replace(E.Dom._getClassRegex(x),J));z=E.Dom._getAttribute(y,F);if(AA!==z){E.Dom.setAttribute(y,F,A(z));Y=true;if(E.Dom._getAttribute(y,F)===""){G=(y.hasAttribute&&y.hasAttribute(g))?g:F;y.removeAttribute(G);}}}else{}return Y;},replaceClass:function(x,Y,G){return E.Dom.batch(x,E.Dom._replaceClass,{from:Y,to:G});},_replaceClass:function(y,x){var Y,AB,AA,G=false,z;if(y&&x){AB=x.from;AA=x.to;if(!AA){G=false;}else{if(!AB){G=E.Dom._addClass(y,x.to);}else{if(AB!==AA){z=E.Dom._getAttribute(y,F)||J;Y=(B+z.replace(E.Dom._getClassRegex(AB),B+AA)).split(E.Dom._getClassRegex(AA));Y.splice(1,0,B+AA);E.Dom.setAttribute(y,F,A(Y.join(J)));G=true;}}}}else{}return G;},generateId:function(G,x){x=x||"yui-gen";var Y=function(y){if(y&&y.id){return y.id;}var z=x+YAHOO.env._id_counter++;if(y){if(y[e]&&y[e].getElementById(z)){return E.Dom.generateId(y,z+x);}y.id=z;}return z;};return E.Dom.batch(G,Y,E.Dom,true)||Y.apply(E.Dom,arguments);},isAncestor:function(Y,x){Y=E.Dom.get(Y);x=E.Dom.get(x);var G=false;if((Y&&x)&&(Y[l]&&x[l])){if(Y.contains&&Y!==x){G=Y.contains(x);}else{if(Y.compareDocumentPosition){G=!!(Y.compareDocumentPosition(x)&16);}}}else{}return G;},inDocument:function(G,Y){return E.Dom._inDoc(E.Dom.get(G),Y);},_inDoc:function(Y,x){var G=false;if(Y&&Y[C]){x=x||Y[e];G=E.Dom.isAncestor(x[v],Y);}else{}return G;},getElementsBy:function(Y,AF,AB,AD,y,AC,AE){AF=AF||"*";AB=(AB)?E.Dom.get(AB):null||K;if(!AB){return[];}var x=[],G=AB.getElementsByTagName(AF);for(var z=0,AA=G.length;z<AA;++z){if(Y(G[z])){if(AE){x=G[z];break;}else{x[x.length]=G[z];}}}if(AD){E.Dom.batch(x,AD,y,AC);}return x;},getElementBy:function(x,G,Y){return E.Dom.getElementsBy(x,G,Y,null,null,null,true);},batch:function(x,AB,AA,z){var y=[],Y=(z)?AA:window;x=(x&&(x[C]||x.item))?x:E.Dom.get(x);if(x&&AB){if(x[C]||x.length===undefined){return AB.call(Y,x,AA);}for(var G=0;G<x.length;++G){y[y.length]=AB.call(Y,x[G],AA);}}else{return false;}return y;},getDocumentHeight:function(){var Y=(K[t]!=M||I)?K.body.scrollHeight:W.scrollHeight,G=Math.max(Y,E.Dom.getViewportHeight());return G;},getDocumentWidth:function(){var Y=(K[t]!=M||I)?K.body.scrollWidth:W.scrollWidth,G=Math.max(Y,E.Dom.getViewportWidth());return G;},getViewportHeight:function(){var G=self.innerHeight,Y=K[t];if((Y||T)&&!D){G=(Y==M)?W.clientHeight:K.body.clientHeight;}return G;},getViewportWidth:function(){var G=self.innerWidth,Y=K[t];if(Y||T){G=(Y==M)?W.clientWidth:K.body.clientWidth;}return G;},getAncestorBy:function(G,Y){while((G=G[Z])){if(E.Dom._testElement(G,Y)){return G;}}return null;},getAncestorByClassName:function(Y,G){Y=E.Dom.get(Y);if(!Y){return null;}var x=function(y){return E.Dom.hasClass(y,G);};return E.Dom.getAncestorBy(Y,x);},getAncestorByTagName:function(Y,G){Y=E.Dom.get(Y);if(!Y){return null;}var x=function(y){return y[C]&&y[C].toUpperCase()==G.toUpperCase();};return E.Dom.getAncestorBy(Y,x);},getPreviousSiblingBy:function(G,Y){while(G){G=G.previousSibling;if(E.Dom._testElement(G,Y)){return G;}}return null;},getPreviousSibling:function(G){G=E.Dom.get(G);if(!G){return null;}return E.Dom.getPreviousSiblingBy(G);},getNextSiblingBy:function(G,Y){while(G){G=G.nextSibling;if(E.Dom._testElement(G,Y)){return G;}}return null;},getNextSibling:function(G){G=E.Dom.get(G);if(!G){return null;}return E.Dom.getNextSiblingBy(G);},getFirstChildBy:function(G,x){var Y=(E.Dom._testElement(G.firstChild,x))?G.firstChild:null;return Y||E.Dom.getNextSiblingBy(G.firstChild,x);},getFirstChild:function(G,Y){G=E.Dom.get(G);if(!G){return null;}return E.Dom.getFirstChildBy(G);},getLastChildBy:function(G,x){if(!G){return null;}var Y=(E.Dom._testElement(G.lastChild,x))?G.lastChild:null;return Y||E.Dom.getPreviousSiblingBy(G.lastChild,x);},getLastChild:function(G){G=E.Dom.get(G);return E.Dom.getLastChildBy(G);},getChildrenBy:function(Y,y){var x=E.Dom.getFirstChildBy(Y,y),G=x?[x]:[];E.Dom.getNextSiblingBy(x,function(z){if(!y||y(z)){G[G.length]=z;}return false;});return G;},getChildren:function(G){G=E.Dom.get(G);if(!G){}return E.Dom.getChildrenBy(G);},getDocumentScrollLeft:function(G){G=G||K;return Math.max(G[v].scrollLeft,G.body.scrollLeft);},getDocumentScrollTop:function(G){G=G||K;return Math.max(G[v].scrollTop,G.body.scrollTop);},insertBefore:function(Y,G){Y=E.Dom.get(Y);G=E.Dom.get(G);if(!Y||!G||!G[Z]){return null;}return G[Z].insertBefore(Y,G);},insertAfter:function(Y,G){Y=E.Dom.get(Y);G=E.Dom.get(G);if(!Y||!G||!G[Z]){return null;}if(G.nextSibling){return G[Z].insertBefore(Y,G.nextSibling);}else{return G[Z].appendChild(Y);}},getClientRegion:function(){var x=E.Dom.getDocumentScrollTop(),Y=E.Dom.getDocumentScrollLeft(),y=E.Dom.getViewportWidth()+Y,G=E.Dom.getViewportHeight()+x;return new E.Region(x,y,G,Y);},setAttribute:function(Y,G,x){E.Dom.batch(Y,E.Dom._setAttribute,{attr:G,val:x});},_setAttribute:function(x,Y){var G=E.Dom._toCamel(Y.attr),y=Y.val;if(x&&x.setAttribute){if(E.Dom.DOT_ATTRIBUTES[G]){x[G]=y;}else{G=E.Dom.CUSTOM_ATTRIBUTES[G]||G;x.setAttribute(G,y);}}else{}},getAttribute:function(Y,G){return E.Dom.batch(Y,E.Dom._getAttribute,G);},_getAttribute:function(Y,G){var x;G=E.Dom.CUSTOM_ATTRIBUTES[G]||G;if(Y&&Y.getAttribute){x=Y.getAttribute(G,2);}else{}return x;},_toCamel:function(Y){var x=d;function G(y,z){return z.toUpperCase();}return x[Y]||(x[Y]=Y.indexOf("-")===-1?Y:Y.replace(/-([a-z])/gi,G));},_getClassRegex:function(Y){var G;if(Y!==undefined){if(Y.exec){G=Y;}else{G=h[Y];if(!G){Y=Y.replace(E.Dom._patterns.CLASS_RE_TOKENS,"\\$1");G=h[Y]=new RegExp(s+Y+k,U);}}}return G;},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(G,Y){return G&&G[l]==1&&(!Y||Y(G));},_calcBorders:function(x,y){var Y=parseInt(E.Dom[w](x,R),10)||0,G=parseInt(E.Dom[w](x,q),10)||0;if(H){if(N.test(x[C])){Y=0;G=0;}}y[0]+=G;y[1]+=Y;return y;}};var S=E.Dom[w];if(m.opera){E.Dom[w]=function(Y,G){var x=S(Y,G);if(X.test(G)){x=E.Dom.Color.toRGB(x);}return x;};}if(m.webkit){E.Dom[w]=function(Y,G){var x=S(Y,G);if(x==="rgba(0, 0, 0, 0)"){x="transparent";}return x;};}if(m.ie&&m.ie>=8&&K.documentElement.hasAttribute){E.Dom.DOT_ATTRIBUTES.type=true;}})();YAHOO.util.Region=function(C,D,A,B){this.top=C;this.y=C;this[1]=C;this.right=D;this.bottom=A;this.left=B;this.x=B;this[0]=B;this.width=this.right-this.left;this.height=this.bottom-this.top;};YAHOO.util.Region.prototype.contains=function(A){return(A.left>=this.left&&A.right<=this.right&&A.top>=this.top&&A.bottom<=this.bottom);};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left));};YAHOO.util.Region.prototype.intersect=function(E){var C=Math.max(this.top,E.top),D=Math.min(this.right,E.right),A=Math.min(this.bottom,E.bottom),B=Math.max(this.left,E.left);if(A>=C&&D>=B){return new YAHOO.util.Region(C,D,A,B);}else{return null;}};YAHOO.util.Region.prototype.union=function(E){var C=Math.min(this.top,E.top),D=Math.max(this.right,E.right),A=Math.max(this.bottom,E.bottom),B=Math.min(this.left,E.left);return new YAHOO.util.Region(C,D,A,B);};YAHOO.util.Region.prototype.toString=function(){return("Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}");};YAHOO.util.Region.getRegion=function(D){var F=YAHOO.util.Dom.getXY(D),C=F[1],E=F[0]+D.offsetWidth,A=F[1]+D.offsetHeight,B=F[0];return new YAHOO.util.Region(C,E,A,B);};YAHOO.util.Point=function(A,B){if(YAHOO.lang.isArray(A)){B=A[1];A=A[0];}YAHOO.util.Point.superclass.constructor.call(this,B,A,B,A);};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);(function(){var B=YAHOO.util,A="clientTop",F="clientLeft",J="parentNode",K="right",W="hasLayout",I="px",U="opacity",L="auto",D="borderLeftWidth",G="borderTopWidth",P="borderRightWidth",V="borderBottomWidth",S="visible",Q="transparent",N="height",E="width",H="style",T="currentStyle",R=/^width|height$/,O=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,M={get:function(X,Z){var Y="",a=X[T][Z];if(Z===U){Y=B.Dom.getStyle(X,U);}else{if(!a||(a.indexOf&&a.indexOf(I)>-1)){Y=a;}else{if(B.Dom.IE_COMPUTED[Z]){Y=B.Dom.IE_COMPUTED[Z](X,Z);}else{if(O.test(a)){Y=B.Dom.IE.ComputedStyle.getPixel(X,Z);}else{Y=a;}}}}return Y;},getOffset:function(Z,e){var b=Z[T][e],X=e.charAt(0).toUpperCase()+e.substr(1),c="offset"+X,Y="pixel"+X,a="",d;if(b==L){d=Z[c];if(d===undefined){a=0;}a=d;if(R.test(e)){Z[H][e]=d;if(Z[c]>d){a=d-(Z[c]-d);}Z[H][e]=L;}}else{if(!Z[H][Y]&&!Z[H][e]){Z[H][e]=b;}a=Z[H][Y];}return a+I;},getBorderWidth:function(X,Z){var Y=null;if(!X[T][W]){X[H].zoom=1;}switch(Z){case G:Y=X[A];break;case V:Y=X.offsetHeight-X.clientHeight-X[A];break;case D:Y=X[F];break;case P:Y=X.offsetWidth-X.clientWidth-X[F];break;}return Y+I;},getPixel:function(Y,X){var a=null,b=Y[T][K],Z=Y[T][X];Y[H][K]=Z;a=Y[H].pixelRight;Y[H][K]=b;return a+I;},getMargin:function(Y,X){var Z;if(Y[T][X]==L){Z=0+I;}else{Z=B.Dom.IE.ComputedStyle.getPixel(Y,X);}return Z;},getVisibility:function(Y,X){var Z;while((Z=Y[T])&&Z[X]=="inherit"){Y=Y[J];}return(Z)?Z[X]:S;},getColor:function(Y,X){return B.Dom.Color.toRGB(Y[T][X])||Q;},getBorderColor:function(Y,X){var Z=Y[T],a=Z[X]||Z.color;return B.Dom.Color.toRGB(B.Dom.Color.toHex(a));}},C={};C.top=C.right=C.bottom=C.left=C[E]=C[N]=M.getOffset;C.color=M.getColor;C[G]=C[P]=C[V]=C[D]=M.getBorderWidth;C.marginTop=C.marginRight=C.marginBottom=C.marginLeft=M.getMargin;C.visibility=M.getVisibility;C.borderColor=C.borderTopColor=C.borderRightColor=C.borderBottomColor=C.borderLeftColor=M.getBorderColor;B.Dom.IE_COMPUTED=C;B.Dom.IE_ComputedStyle=M;})();(function(){var C="toString",A=parseInt,B=RegExp,D=YAHOO.util;D.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(E){if(!D.Dom.Color.re_RGB.test(E)){E=D.Dom.Color.toHex(E);}if(D.Dom.Color.re_hex.exec(E)){E="rgb("+[A(B.$1,16),A(B.$2,16),A(B.$3,16)].join(", ")+")";}return E;},toHex:function(H){H=D.Dom.Color.KEYWORDS[H]||H;if(D.Dom.Color.re_RGB.exec(H)){var G=(B.$1.length===1)?"0"+B.$1:Number(B.$1),F=(B.$2.length===1)?"0"+B.$2:Number(B.$2),E=(B.$3.length===1)?"0"+B.$3:Number(B.$3);H=[G[C](16),F[C](16),E[C](16)].join("");}if(H.length<6){H=H.replace(D.Dom.Color.re_hex3,"$1$1");}if(H!=="transparent"&&H.indexOf("#")<0){H="#"+H;}return H.toLowerCase();}};}());YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.1",build:"19"});YAHOO.util.CustomEvent=function(D,C,B,A,E){this.type=D;this.scope=C||window;this.silent=B;this.fireOnce=E;this.fired=false;this.firedWith=null;this.signature=A||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var F="_YUICEOnSubscribe";if(D!==F){this.subscribeEvent=new YAHOO.util.CustomEvent(F,this,true);}this.lastError=null;};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(B,C,D){if(!B){throw new Error("Invalid callback for subscriber to '"+this.type+"'");}if(this.subscribeEvent){this.subscribeEvent.fire(B,C,D);}var A=new YAHOO.util.Subscriber(B,C,D);if(this.fireOnce&&this.fired){this.notify(A,this.firedWith);}else{this.subscribers.push(A);}},unsubscribe:function(D,F){if(!D){return this.unsubscribeAll();}var E=false;for(var B=0,A=this.subscribers.length;B<A;++B){var C=this.subscribers[B];if(C&&C.contains(D,F)){this._delete(B);E=true;}}return E;},fire:function(){this.lastError=null;var H=[],A=this.subscribers.length;var D=[].slice.call(arguments,0),C=true,F,B=false;if(this.fireOnce){if(this.fired){return true;}else{this.firedWith=D;}}this.fired=true;if(!A&&this.silent){return true;}if(!this.silent){}var E=this.subscribers.slice();for(F=0;F<A;++F){var G=E[F];if(!G){B=true;}else{C=this.notify(G,D);if(false===C){if(!this.silent){}break;}}}return(C!==false);},notify:function(F,C){var B,H=null,E=F.getScope(this.scope),A=YAHOO.util.Event.throwErrors;if(!this.silent){}if(this.signature==YAHOO.util.CustomEvent.FLAT){if(C.length>0){H=C[0];}try{B=F.fn.call(E,H,F.obj);}catch(G){this.lastError=G;if(A){throw G;}}}else{try{B=F.fn.call(E,this.type,C,F.obj);}catch(D){this.lastError=D;if(A){throw D;}}}return B;},unsubscribeAll:function(){var A=this.subscribers.length,B;for(B=A-1;B>-1;B--){this._delete(B);}this.subscribers=[];return A;},_delete:function(A){var B=this.subscribers[A];if(B){delete B.fn;delete B.obj;}this.subscribers.splice(A,1);},toString:function(){return"CustomEvent: "+"'"+this.type+"', "+"context: "+this.scope;}};YAHOO.util.Subscriber=function(A,B,C){this.fn=A;this.obj=YAHOO.lang.isUndefined(B)?null:B;this.overrideContext=C;};YAHOO.util.Subscriber.prototype.getScope=function(A){if(this.overrideContext){if(this.overrideContext===true){return this.obj;}else{return this.overrideContext;}}return A;};YAHOO.util.Subscriber.prototype.contains=function(A,B){if(B){return(this.fn==A&&this.obj==B);}else{return(this.fn==A);}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }";};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var G=false,H=[],J=[],A=0,E=[],B=0,C={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},D=YAHOO.env.ua.ie,F="focusin",I="focusout";return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:D,_interval:null,_dri:null,_specialTypes:{focusin:(D?"focusin":"focus"),focusout:(D?"focusout":"blur")},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){this._interval=YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true);}},onAvailable:function(Q,M,O,P,N){var K=(YAHOO.lang.isString(Q))?[Q]:Q;for(var L=0;L<K.length;L=L+1){E.push({id:K[L],fn:M,obj:O,overrideContext:P,checkReady:N});}A=this.POLL_RETRYS;this.startInterval();},onContentReady:function(N,K,L,M){this.onAvailable(N,K,L,M,true);},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments);},_addListener:function(M,K,V,P,T,Y){if(!V||!V.call){return false;}if(this._isValidCollection(M)){var W=true;for(var Q=0,S=M.length;Q<S;++Q){W=this.on(M[Q],K,V,P,T)&&W;}return W;}else{if(YAHOO.lang.isString(M)){var O=this.getEl(M);if(O){M=O;}else{this.onAvailable(M,function(){YAHOO.util.Event._addListener(M,K,V,P,T,Y);});return true;}}}if(!M){return false;}if("unload"==K&&P!==this){J[J.length]=[M,K,V,P,T];return true;}var L=M;if(T){if(T===true){L=P;}else{L=T;}}var N=function(Z){return V.call(L,YAHOO.util.Event.getEvent(Z,M),P);};var X=[M,K,V,N,L,P,T,Y];var R=H.length;H[R]=X;try{this._simpleAdd(M,K,N,Y);}catch(U){this.lastError=U;this.removeListener(M,K,V);return false;}return true;},_getType:function(K){return this._specialTypes[K]||K;},addListener:function(M,P,L,N,O){var K=((P==F||P==I)&&!YAHOO.env.ua.ie)?true:false;return this._addListener(M,this._getType(P),L,N,O,K);},addFocusListener:function(L,K,M,N){return this.on(L,F,K,M,N);},removeFocusListener:function(L,K){return this.removeListener(L,F,K);},addBlurListener:function(L,K,M,N){return this.on(L,I,K,M,N);},removeBlurListener:function(L,K){return this.removeListener(L,I,K);},removeListener:function(L,K,R){var M,P,U;K=this._getType(K);if(typeof L=="string"){L=this.getEl(L);}else{if(this._isValidCollection(L)){var S=true;for(M=L.length-1;M>-1;M--){S=(this.removeListener(L[M],K,R)&&S);}return S;}}if(!R||!R.call){return this.purgeElement(L,false,K);}if("unload"==K){for(M=J.length-1;M>-1;M--){U=J[M];if(U&&U[0]==L&&U[1]==K&&U[2]==R){J.splice(M,1);return true;}}return false;}var N=null;var O=arguments[3];if("undefined"===typeof O){O=this._getCacheIndex(H,L,K,R);}if(O>=0){N=H[O];}if(!L||!N){return false;}var T=N[this.CAPTURE]===true?true:false;try{this._simpleRemove(L,K,N[this.WFN],T);}catch(Q){this.lastError=Q;return false;}delete H[O][this.WFN];delete H[O][this.FN];H.splice(O,1);return true;},getTarget:function(M,L){var K=M.target||M.srcElement;return this.resolveTextNode(K);},resolveTextNode:function(L){try{if(L&&3==L.nodeType){return L.parentNode;}}catch(K){}return L;},getPageX:function(L){var K=L.pageX;if(!K&&0!==K){K=L.clientX||0;if(this.isIE){K+=this._getScrollLeft();}}return K;},getPageY:function(K){var L=K.pageY;if(!L&&0!==L){L=K.clientY||0;if(this.isIE){L+=this._getScrollTop();}}return L;},getXY:function(K){return[this.getPageX(K),this.getPageY(K)];},getRelatedTarget:function(L){var K=L.relatedTarget;if(!K){if(L.type=="mouseout"){K=L.toElement;}else{if(L.type=="mouseover"){K=L.fromElement;}}}return this.resolveTextNode(K);},getTime:function(M){if(!M.time){var L=new Date().getTime();try{M.time=L;}catch(K){this.lastError=K;return L;}}return M.time;},stopEvent:function(K){this.stopPropagation(K);this.preventDefault(K);},stopPropagation:function(K){if(K.stopPropagation){K.stopPropagation();}else{K.cancelBubble=true;}},preventDefault:function(K){if(K.preventDefault){K.preventDefault();}else{K.returnValue=false;}},getEvent:function(M,K){var L=M||window.event;if(!L){var N=this.getEvent.caller;while(N){L=N.arguments[0];if(L&&Event==L.constructor){break;}N=N.caller;}}return L;},getCharCode:function(L){var K=L.keyCode||L.charCode||0;if(YAHOO.env.ua.webkit&&(K in C)){K=C[K];}return K;},_getCacheIndex:function(M,P,Q,O){for(var N=0,L=M.length;N<L;N=N+1){var K=M[N];if(K&&K[this.FN]==O&&K[this.EL]==P&&K[this.TYPE]==Q){return N;}}return-1;},generateId:function(K){var L=K.id;if(!L){L="yuievtautoid-"+B;++B;K.id=L;}return L;},_isValidCollection:function(L){try{return(L&&typeof L!=="string"&&L.length&&!L.tagName&&!L.alert&&typeof L[0]!=="undefined");}catch(K){return false;}},elCache:{},getEl:function(K){return(typeof K==="string")?document.getElementById(K):K;},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(L){if(!G){G=true;var K=YAHOO.util.Event;K._ready();K._tryPreloadAttach();}},_ready:function(L){var K=YAHOO.util.Event;if(!K.DOMReady){K.DOMReady=true;K.DOMReadyEvent.fire();K._simpleRemove(document,"DOMContentLoaded",K._ready);}},_tryPreloadAttach:function(){if(E.length===0){A=0;if(this._interval){this._interval.cancel();this._interval=null;}return;}if(this.locked){return;}if(this.isIE){if(!this.DOMReady){this.startInterval();return;}}this.locked=true;var Q=!G;if(!Q){Q=(A>0&&E.length>0);}var P=[];var R=function(T,U){var S=T;if(U.overrideContext){if(U.overrideContext===true){S=U.obj;}else{S=U.overrideContext;}}U.fn.call(S,U.obj);};var L,K,O,N,M=[];for(L=0,K=E.length;L<K;L=L+1){O=E[L];if(O){N=this.getEl(O.id);if(N){if(O.checkReady){if(G||N.nextSibling||!Q){M.push(O);E[L]=null;}}else{R(N,O);E[L]=null;}}else{P.push(O);}}}for(L=0,K=M.length;L<K;L=L+1){O=M[L];R(this.getEl(O.id),O);}A--;if(Q){for(L=E.length-1;L>-1;L--){O=E[L];if(!O||!O.id){E.splice(L,1);}}this.startInterval();}else{if(this._interval){this._interval.cancel();this._interval=null;}}this.locked=false;},purgeElement:function(O,P,R){var M=(YAHOO.lang.isString(O))?this.getEl(O):O;var Q=this.getListeners(M,R),N,K;if(Q){for(N=Q.length-1;N>-1;N--){var L=Q[N];this.removeListener(M,L.type,L.fn);}}if(P&&M&&M.childNodes){for(N=0,K=M.childNodes.length;N<K;++N){this.purgeElement(M.childNodes[N],P,R);}}},getListeners:function(M,K){var P=[],L;if(!K){L=[H,J];}else{if(K==="unload"){L=[J];}else{K=this._getType(K);L=[H];}}var R=(YAHOO.lang.isString(M))?this.getEl(M):M;for(var O=0;O<L.length;O=O+1){var T=L[O];if(T){for(var Q=0,S=T.length;Q<S;++Q){var N=T[Q];if(N&&N[this.EL]===R&&(!K||K===N[this.TYPE])){P.push({type:N[this.TYPE],fn:N[this.FN],obj:N[this.OBJ],adjust:N[this.OVERRIDE],scope:N[this.ADJ_SCOPE],index:Q});}}}}return(P.length)?P:null;},_unload:function(R){var L=YAHOO.util.Event,O,N,M,Q,P,S=J.slice(),K;for(O=0,Q=J.length;O<Q;++O){M=S[O];if(M){K=window;if(M[L.ADJ_SCOPE]){if(M[L.ADJ_SCOPE]===true){K=M[L.UNLOAD_OBJ];}else{K=M[L.ADJ_SCOPE];}}M[L.FN].call(K,L.getEvent(R,M[L.EL]),M[L.UNLOAD_OBJ]);S[O]=null;}}M=null;K=null;J=null;if(H){for(N=H.length-1;N>-1;N--){M=H[N];if(M){L.removeListener(M[L.EL],M[L.TYPE],M[L.FN],N);}}M=null;}L._simpleRemove(window,"unload",L._unload);},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var K=document.documentElement,L=document.body;if(K&&(K.scrollTop||K.scrollLeft)){return[K.scrollTop,K.scrollLeft];}else{if(L){return[L.scrollTop,L.scrollLeft];}else{return[0,0];}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(M,N,L,K){M.addEventListener(N,L,(K));};}else{if(window.attachEvent){return function(M,N,L,K){M.attachEvent("on"+N,L);};}else{return function(){};}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(M,N,L,K){M.removeEventListener(N,L,(K));};}else{if(window.detachEvent){return function(L,M,K){L.detachEvent("on"+M,K);};}else{return function(){};}}}()};}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;EU.onFocus=EU.addFocusListener;EU.onBlur=EU.addBlurListener;if(EU.isIE){if(self!==self.top){document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;EU._ready();}};}else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var n=document.createElement("p");EU._dri=setInterval(function(){try{n.doScroll("left");clearInterval(EU._dri);EU._dri=null;EU._ready();n=null;}catch(ex){}},EU.POLL_INTERVAL);}}else{if(EU.webkit&&EU.webkit<525){EU._dri=setInterval(function(){var rs=document.readyState;if("loaded"==rs||"complete"==rs){clearInterval(EU._dri);EU._dri=null;EU._ready();}},EU.POLL_INTERVAL);}else{EU._simpleAdd(document,"DOMContentLoaded",EU._ready);}}EU._simpleAdd(window,"load",EU._load);EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach();})();}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(A,C,F,E){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[A];if(D){D.subscribe(C,F,E);}else{this.__yui_subscribers=this.__yui_subscribers||{};var B=this.__yui_subscribers;if(!B[A]){B[A]=[];}B[A].push({fn:C,obj:F,overrideContext:E});}},unsubscribe:function(C,E,G){this.__yui_events=this.__yui_events||{};var A=this.__yui_events;if(C){var F=A[C];if(F){return F.unsubscribe(E,G);}}else{var B=true;for(var D in A){if(YAHOO.lang.hasOwnProperty(A,D)){B=B&&A[D].unsubscribe(E,G);}}return B;}return false;},unsubscribeAll:function(A){return this.unsubscribe(A);},createEvent:function(B,G){this.__yui_events=this.__yui_events||{};var E=G||{},D=this.__yui_events,F;if(D[B]){}else{F=new YAHOO.util.CustomEvent(B,E.scope||this,E.silent,YAHOO.util.CustomEvent.FLAT,E.fireOnce);D[B]=F;if(E.onSubscribeCallback){F.subscribeEvent.subscribe(E.onSubscribeCallback);}this.__yui_subscribers=this.__yui_subscribers||{};var A=this.__yui_subscribers[B];if(A){for(var C=0;C<A.length;++C){F.subscribe(A[C].fn,A[C].obj,A[C].overrideContext);}}}return D[B];},fireEvent:function(B){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[B];if(!D){return null;}var A=[];for(var C=1;C<arguments.length;++C){A.push(arguments[C]);}return D.fire.apply(D,A);},hasEvent:function(A){if(this.__yui_events){if(this.__yui_events[A]){return true;}}return false;}};(function(){var A=YAHOO.util.Event,C=YAHOO.lang;YAHOO.util.KeyListener=function(D,I,E,F){if(!D){}else{if(!I){}else{if(!E){}}}if(!F){F=YAHOO.util.KeyListener.KEYDOWN;}var G=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(C.isString(D)){D=document.getElementById(D);}if(C.isFunction(E)){G.subscribe(E);}else{G.subscribe(E.fn,E.scope,E.correctScope);}function H(O,N){if(!I.shift){I.shift=false;}if(!I.alt){I.alt=false;}if(!I.ctrl){I.ctrl=false;}if(O.shiftKey==I.shift&&O.altKey==I.alt&&O.ctrlKey==I.ctrl){var J,M=I.keys,L;if(YAHOO.lang.isArray(M)){for(var K=0;K<M.length;K++){J=M[K];L=A.getCharCode(O);if(J==L){G.fire(L,O);break;}}}else{L=A.getCharCode(O);if(M==L){G.fire(L,O);}}}}this.enable=function(){if(!this.enabled){A.on(D,F,H);this.enabledEvent.fire(I);}this.enabled=true;};this.disable=function(){if(this.enabled){A.removeListener(D,F,H);this.disabledEvent.fire(I);}this.enabled=false;};this.toString=function(){return"KeyListener ["+I.keys+"] "+D.tagName+(D.id?"["+D.id+"]":"");};};var B=YAHOO.util.KeyListener;B.KEYDOWN="keydown";B.KEYUP="keyup";B.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38};})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.1",build:"19"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.8.1",build:"19"});
function jsDropdown(opts,selected,cssClass,optClasses,titles){if(opts==undefined)return false;if(selected==undefined)selected=0;if(cssClass==undefined)cssClass="";elementContainer='div';classContainer=cssClass+' jsSelect';elementButton='div';classButton='dropbutton';classButtonExpanded='dropbutton_expanded';elementList='ul';classList='optionList';classListExpanded='optionList_expanded';elementListItem='li';classActiveListItem='active';classFirstListItem='first';classLastListItem='last';mouseOverClass='hover';var shorten=(cssClass.indexOf("shortenText")!=-1)?true:false;var that=this;var option=opts;var selectedOption=selected;var expanded=false;var blockclose=false;this.onClickAnywhere=function(){if(blockclose){blockclose=false;}
else if(expanded){this.collapse();}}
YAHOO.util.Event.addListener(document,"click",this.onClickAnywhere,this,true);this.setOption=function(obj){for(var i=0;i<sListItem.length;i++){if(sListItem[i]==obj){if(selectedOption!=i){selectedOption=i;sCurrentSelectedText.nodeValue=(shorten)?shortenText(option[selectedOption],125):option[selectedOption];if(titles[selectedOption]!=undefined){sCurrentSelected.title=titles[selectedOption];}
if(optClasses[selectedOption]!=undefined){sCurrentSelected.className=optClasses[selectedOption];}
Dom.addClass(sCurrentSelected,classButton);Dom.addClass(sListItem[i],classActiveListItem);this.onChange();}}
else Dom.removeClass(sListItem[i],classActiveListItem);}}
this.expand=function(){expanded=true;sList.style.opacity=0;Dom.addClass(sList,classListExpanded);YAHOO.util.Dom.addClass(sCurrentSelected,classButtonExpanded);if(!that.sListY){that.sListY=Dom.getY(sList);}
var y=that.sListY;var height=sList.offsetHeight;var arr=sList;var isCityNav=0;while(arr=arr.parentNode){if(arr.id=='cityNav'){isCityNav=1;}
if(arr.id=='mainview'){break;}}
if(y+height>Dom.getViewportHeight()+Dom.getDocumentScrollTop()&&isCityNav==0){var newY=Math.max(180,y-height-sCurrentSelected.offsetHeight,Dom.getDocumentScrollTop());Dom.setY(sList,newY);sList.style.zIndex=100000;var zIndex=100000;var obj=sList;while(obj=obj.parentNode){if(obj.id=='cityNav'||obj.id=='mainview'){break;}
if(obj.style){if(!obj.oldZIndex){obj.oldZIndex=obj.style.zIndex;}
obj.style.zIndex=zIndex;zIndex--;}}}else{Dom.setY(sList,that.sListY);}
sList.style.opacity=1;Dom.setStyle(this.getSelectContainer(),'z-index',100000);}
this.collapse=function(){YAHOO.util.Dom.removeClass(sList,classListExpanded);YAHOO.util.Dom.removeClass(sCurrentSelected,classButtonExpanded);expanded=false;var obj=sList;while(obj=obj.parentNode){if(obj.oldZIndex){obj.style.zIndex=obj.oldZIndex;}}
Dom.setStyle(this.getSelectContainer(),'z-index',1000);}
var sContainer=document.createElement(elementContainer);Dom.addClass(sContainer,classContainer);var sCurrentSelected=document.createElement(elementButton);sContainer.appendChild(sCurrentSelected);sCurrentSelected.onclick=function(){if(!expanded){that.expand();blockclose=true;}
else that.collapse();}
sCurrentSelected.onmouseover=function(){Dom.addClass(this,mouseOverClass);}
sCurrentSelected.onmouseout=function(){Dom.removeClass(this,mouseOverClass);}
if(titles[selectedOption]!=undefined){sCurrentSelected.title=titles[selectedOption];}
if(optClasses[selectedOption]!=undefined){sCurrentSelected.className=optClasses[selectedOption];var imgCityType=document.createElement('span')
Dom.addClass(imgCityType,'citytype');sCurrentSelected.appendChild(imgCityType);var imgCityResource=document.createElement('span')
Dom.addClass(imgCityResource,'cityresource');sCurrentSelected.appendChild(imgCityResource);}
Dom.addClass(sCurrentSelected,classButton);var sCurrentSelectedTextVal=(shorten)?shortenText(option[selectedOption],125):option[selectedOption];var sCurrentSelectedText=document.createTextNode(sCurrentSelectedTextVal);sCurrentSelected.appendChild(sCurrentSelectedText);var sList=document.createElement(elementList);sContainer.appendChild(sList);Dom.addClass(sList,classList);var sListItem=new Array();for(var i=0;i<option.length;i++){sListItem[i]=document.createElement(elementListItem);sList.appendChild(sListItem[i]);if(titles[i]!=undefined){sListItem[i].title=titles[i];}
if(optClasses[i]!=undefined){sListItem[i].className=optClasses[i];var imgCityType=document.createElement('span')
Dom.addClass(imgCityType,'citytype');sListItem[i].appendChild(imgCityType);var imgCityResource=document.createElement('span')
Dom.addClass(imgCityResource,'cityresource');sListItem[i].appendChild(imgCityResource);}
var sListItemText=document.createTextNode(option[i]);sListItem[i].appendChild(sListItemText);sListItem[i].onclick=function(){that.setOption(this);that.collapse();};Dom.removeClass(sListItem[i],classActiveListItem);if(i==0){YAHOO.util.Dom.addClass(sListItem[i],classFirstListItem);}
if(i==option.length-1){Dom.addClass(this,mouseOverClass);Dom.addClass(sListItem[i],classLastListItem);}
if(i==selectedOption){Dom.addClass(sListItem[i],classActiveListItem);}
sListItem[i].onmouseover=function(){Dom.addClass(this,mouseOverClass);};sListItem[i].onmouseout=function(){Dom.removeClass(this,mouseOverClass);};}
this.getSelectContainer=function(){return sContainer;}
this.getCurrentSelected=function(){return sCurrentSelected;}
this.getListItem=function(i){return sListItem[i];}
this.getSelected=function(){return selectedOption;}
return this;}
function replaceSelect(mirroredSelect){var o=mirroredSelect.options;var opts=new Array();var optClasses=new Array();var titles=new Array();for(var i=0;i<o.length;i++){opts[i]=o[i].text;optClasses[i]=o[i].className;titles[i]=o[i].title;}
var selOpt=(!mirroredSelect.selectedIndex)?0:mirroredSelect.selectedIndex;var selClass=mirroredSelect.className;var replacement=new jsDropdown(opts,selOpt,selClass,optClasses,titles);YAHOO.util.Dom.addClass(mirroredSelect,'replaced');replacement.onChange=function(){mirroredSelect.selectedIndex=this.getSelected();if(mirroredSelect.onchange){mirroredSelect.onchange();}};this.focusMirrored=function(){mirroredSelect.focus();};YAHOO.util.Event.addListener(replacement.getCurrentSelected(),"click",this.focusMirrored,this,true);mirroredSelect.onfocus=function(){YAHOO.util.Dom.addClass(replacement.getSelectContainer(),'hover');if(replacement.getSelectContainer().firstChild){YAHOO.util.Dom.addClass(replacement.getSelectContainer().firstChild,'hover');}};mirroredSelect.onblur=function(){YAHOO.util.Dom.removeClass(replacement.getSelectContainer(),'hover');if(replacement.getSelectContainer().firstChild){YAHOO.util.Dom.removeClass(replacement.getSelectContainer().firstChild,'hover');}};this.changeMirrored=function(){replacement.setOption(replacement.getListItem(this.selectedIndex));};YAHOO.util.Event.addListener(mirroredSelect,"change",this.changeMirrored);mirroredSelect.onkeyup=function(e){replacement.setOption(replacement.getListItem(this.selectedIndex));};mirroredSelect.onkeypress=function(e){if(e.keyCode==13)
mirroredSelect.onchange;};mirroredSelect.parentNode.insertBefore(replacement.getSelectContainer(),mirroredSelect);}
function jsCheckbox(checkboxObj,imageObj){checkboxObj.checked=!checkboxObj.checked;jsCheckbox_Hover(checkboxObj,imageObj);}
function jsCheckbox_Hover(checkboxObj,imageObj){if(checkboxObj.checked){imageObj.src='skin/interface/checkbox_checked_hover.gif';}else{imageObj.src='skin/interface/checkbox_off_hover.gif';}}
function jsCheckbox_rollOut(checkboxObj,imageObj){if(checkboxObj.checked){imageObj.src='skin/interface/checkbox_checked.gif';}else{imageObj.src='skin/interface/checkbox_off.gif';}}
function jsUpdateRadioButton(elementName)
{var obj=document.getElementsByName(elementName);for(var i=0;i<obj.length;i++)
{var imageName="img_"+elementName+obj[i].value+"";if(obj[i].checked){document.getElementById(imageName).src="skin/interface/radio_circle_checked.gif";}else{document.getElementById(imageName).src="skin/interface/radio_circle_off.gif";}}}
function valid_num(el,e){var keycode;if(window.event){keycode=window.event.keyCode;}else if(e){keycode=e.which;}else{return true;}
if((keycode>47&&keycode<58)||keycode==44||keycode==46){return true;}else{return false;}}
function shortenText(string,buttonwidth){if(buttonwidth=="undefined")return string;var textSubstr=string;var shortenerWidth=getWidthFromText("...");var innerButtonWidth=buttonwidth-50;var overflowOffset=innerButtonWidth-getWidthFromText(textSubstr)-shortenerWidth;var shortened=false;while(overflowOffset<0){textSubstr=textSubstr.substr(0,textSubstr.length-1);overflowOffset=innerButtonWidth-getWidthFromText(textSubstr)-shortenerWidth;shortened=true;}
if(shortened)return textSubstr+"...";else return string;}
function getWidthFromText(text){var dummy=document.createElement("div");dummy.innerHTML=text;dummy.style.whiteSpace="nowrap";dummy.style.position="absolute";dummy.style.top="-100px";document.body.appendChild(dummy);var textwidth=dummy.scrollWidth;document.body.removeChild(dummy);return textwidth;}
var Dom=YAHOO.util.Dom;function getTimestring(timestamp,maxDigits,delimiter,approx,showunits,zerofill){if(typeof timestamp=="undefined"){timestamp=0;}
if(typeof maxDigits=="undefined"){maxDigits=2;}
if(typeof delimiter=="undefined"){delimiter=" ";}
if(typeof approx=="undefined"){approx="";}
if(typeof showunits=="undefined"){showunits=true;}
if(typeof zerofill=="undefined"){zerofill=false;}
var timeunits=[];timeunits['day']=60*60*24;timeunits['hour']=60*60;timeunits['minute']=60;timeunits['second']=1;var loca=[];loca['day']=(showunits)?LocalizationStrings['timeunits']['short']['day']:"";loca['hour']=(showunits)?LocalizationStrings['timeunits']['short']['hour']:"";loca['minute']=(showunits)?LocalizationStrings['timeunits']['short']['minute']:"";loca['second']=(showunits)?LocalizationStrings['timeunits']['short']['second']:"";timestamp=Math.floor(timestamp/1000);var timestring="";for(var k in timeunits){var nv=Math.floor(timestamp/timeunits[k]);if(isNaN(nv)){return timestring;}
if(maxDigits>0&&(nv>0||(zerofill&&timestring!=""))){timestamp=timestamp-nv*timeunits[k];if(timestring!=""){timestring+=delimiter;if(nv<10&&nv>0&&zerofill){nv="0"+nv;}
if(nv==0){nv="00";}}
timestring+=nv+loca[k];maxDigits--;}}
if(timestamp>0){timestring=approx+timestring;}
return timestring;}
function simpleTimer(currentdate,interval){if(!YAHOO.lang.isValue(currentdate)){currentdate=(new Date()).getTime()*1000;}
if(typeof interval=="undefined"){interval=500;}
var that=this;this.serverTimeDiff=IKARIAM.time.serverTimeDiff;this.currenttime=(new Date()).getTime()+this.serverTimeDiff;this.tm;this.createEvent("update",this);this.updatefrequency=1000;this.ls=Math.floor(this.currenttime/this.updatefrequency);this.onUpdate=function(){this.currenttime=(new Date()).getTime()+this.serverTimeDiff;if(this.ls!=Math.floor(this.currenttime/this.updatefrequency)){this.ls=Math.floor(this.currenttime/this.updatefrequency);this.fireEvent("update");}}
this.startTimer=function(){this.tm=setTimeout(function(){that.startTimer.call(that);},interval);this.onUpdate();};this.stopTimer=function(){this.tm=clearTimeout(this.iv);};}
YAHOO.augment(simpleTimer,YAHOO.util.EventProvider);function getResourceCounter(config){if(config.production==0&&typeof config.spendings=="undefined")return false;if(typeof config.spendings=="undefined"){config.spendings=[];}
var resCounter=new simpleTimer(config.currentdate,config.interval);resCounter.startdate=config.startdate*1000;resCounter.production=config.production;resCounter.limit=config.limit;resCounter.spendings=config.spendings;resCounter.startRes=config.available;resCounter.currentRes=config.available;resCounter.valueElem=Dom.get(config.valueElem);resCounter.checkBounds=function(){if(this.currentRes<this.limit[0])this.currentRes=this.limit[0];if(this.currentRes>this.limit[1])this.currentRes=this.limit[1];}
resCounter.subscribe("update",function(){this.currentRes=this.startRes+this.production*Math.floor((this.currenttime-this.startdate)/1000);this.checkBounds();for(var i=this.spendings.length-1;i>=0;--i){this.currentRes=this.currentRes-this.spendings[i]['amount']*Math.floor((this.currenttime-this.startdate)/1000/this.spendings[i]['tickInterval'])*this.spendings[i]['tickInterval']/3600;}
this.checkBounds();var ratio=this.currentRes/this.limit[1];if(ratio>=1){Dom.addClass(this.valueElem,"storage_full");}else if(ratio>=0.75){Dom.addClass(this.valueElem,"storage_danger");}
this.valueElem.innerHTML=shortenValue(this.currentRes,6);});resCounter.startTimer();return resCounter;}
function Timer(enddate,currentdate,interval){if(!YAHOO.lang.isValue(enddate)){alert("Timer enddate not a value. Variable is: "+enddate);}
if(!YAHOO.lang.isValue(currentdate)){currentdate=(new Date()).getTime()*1000;}
if(typeof interval=="undefined"){interval=500;}
if(this.enddate<this.currenttime)return false;var that=this;this.enddate=enddate*1000;this.serverTimeDiff=currentdate*1000-(new Date()).getTime();this.currenttime=(new Date()).getTime()+this.serverTimeDiff;this.tm;this.createEvent("update",this);this.createEvent("finished",this);this.updatefrequency=1000;this.ls=Math.floor(this.currenttime/this.updatefrequency);this.onUpdate=function(){this.currenttime=(new Date()).getTime()+this.serverTimeDiff;if(this.ls!=Math.floor(this.currenttime/this.updatefrequency)&&this.enddate>this.currenttime){this.ls=Math.floor(this.currenttime/this.updatefrequency);this.fireEvent("update");}
else if(this.enddate<this.currenttime){this.fireEvent("finished");clearTimeout(this.tm);}}
this.startTimer=function(){this.tm=setTimeout(function(){that.startTimer.call(that);},interval);this.onUpdate();};this.stopTimer=function(){this.tm=clearTimeout(this.iv);};}
YAHOO.augment(Timer,YAHOO.util.EventProvider);function getProgressBar(config){var pbar=new Timer(config.enddate,config.currentdate,config.interval);pbar.startdate=config.startdate*1000;pbar.duration=pbar.enddate-pbar.startdate;pbar.barEl=Dom.get(config.bar);pbar.progress=((pbar.currenttime-pbar.startdate)/pbar.duration)*100;Dom.setStyle(pbar.barEl,"width",pbar.progress+"%");pbar.subscribe("update",function(){this.progress=Math.floor(((this.currenttime-this.startdate)/this.duration)*100);Dom.setStyle(this.barEl,"width",this.progress+"%");});pbar.subscribe("finished",function(){Dom.setStyle(this.barEl,"width","100%");});pbar.startTimer();return pbar;}
function getCountdown(config){var cnt=new Timer(config.enddate,config.currentdate,config.interval);cnt.formattime=getTimestring;cnt.startdate=config.startdate*1000;cnt.El=Dom.get(config.el);cnt.args=getCountdown.arguments;cnt.subscribe("update",function(){var timeargs=[this.enddate-Math.floor(this.currenttime/1000)*1000];for(i=1;i<this.args.length;i++){timeargs.push(this.args[i]);}
this.El.innerHTML=this.formattime.apply(this,timeargs);});cnt.subscribe("finished",function(){this.El.innerHTML="-";});cnt.startTimer();return cnt;}
function happyHourCountdown(config){var cnt=new Timer(config.enddate,config.currentdate,config.interval);cnt.formattime=getTimestring;cnt.startdate=config.startdate*1000;cnt.El=Dom.get(config.el);cnt.offEl=Dom.get(config.offsetEl);cnt.args=happyHourCountdown.arguments;cnt.subscribe("update",function(){var timeargs=[this.enddate-Math.floor(this.currenttime/1000)*1000];for(i=1;i<this.args.length;i++){timeargs.push(this.args[i]);}
this.El.innerHTML=this.formattime.apply(this,timeargs);this.offEl.value=timeargs;});cnt.subscribe("finished",function(){this.El.innerHTML="-";});cnt.startTimer();return cnt;}
function getFormattedDate(timestamp,format){var currTime=new Date();currTime.setTime(timestamp);str=format;str=str.replace('d',dezInt(currTime.getDate(),2));str=str.replace('m',dezInt(currTime.getMonth()+1,2));str=str.replace('Y',currTime.getFullYear());str=str.replace('y',currTime.getFullYear().toString().substr(2,4));str=str.replace('G',currTime.getHours());str=str.replace('H',dezInt(currTime.getHours(),2));str=str.replace('i',dezInt(currTime.getMinutes(),2));str=str.replace('s',dezInt(currTime.getSeconds(),2));return str;}
YAHOO.util.Attribute=function(B,A){if(A){this.owner=A;this.configure(B,true);}};YAHOO.util.Attribute.prototype={name:undefined,value:null,owner:null,readOnly:false,writeOnce:false,_initialConfig:null,_written:false,method:null,setter:null,getter:null,validator:null,getValue:function(){var A=this.value;if(this.getter){A=this.getter.call(this.owner,this.name,A);}return A;},setValue:function(F,B){var E,A=this.owner,C=this.name;var D={type:C,prevValue:this.getValue(),newValue:F};if(this.readOnly||(this.writeOnce&&this._written)){return false;}if(this.validator&&!this.validator.call(A,F)){return false;}if(!B){E=A.fireBeforeChangeEvent(D);if(E===false){return false;}}if(this.setter){F=this.setter.call(A,F,this.name);if(F===undefined){}}if(this.method){this.method.call(A,F,this.name);}this.value=F;this._written=true;D.type=C;if(!B){this.owner.fireChangeEvent(D);}return true;},configure:function(B,C){B=B||{};if(C){this._written=false;}this._initialConfig=this._initialConfig||{};for(var A in B){if(B.hasOwnProperty(A)){this[A]=B[A];if(C){this._initialConfig[A]=B[A];}}}},resetValue:function(){return this.setValue(this._initialConfig.value);},resetConfig:function(){this.configure(this._initialConfig,true);},refresh:function(A){this.setValue(this.value,A);}};(function(){var A=YAHOO.util.Lang;YAHOO.util.AttributeProvider=function(){};YAHOO.util.AttributeProvider.prototype={_configs:null,get:function(C){this._configs=this._configs||{};var B=this._configs[C];if(!B||!this._configs.hasOwnProperty(C)){return null;}return B.getValue();},set:function(D,E,B){this._configs=this._configs||{};var C=this._configs[D];if(!C){return false;}return C.setValue(E,B);},getAttributeKeys:function(){this._configs=this._configs;var C=[],B;for(B in this._configs){if(A.hasOwnProperty(this._configs,B)&&!A.isUndefined(this._configs[B])){C[C.length]=B;}}return C;},setAttributes:function(D,B){for(var C in D){if(A.hasOwnProperty(D,C)){this.set(C,D[C],B);}}},resetValue:function(C,B){this._configs=this._configs||{};if(this._configs[C]){this.set(C,this._configs[C]._initialConfig.value,B);return true;}return false;},refresh:function(E,C){this._configs=this._configs||{};var F=this._configs;E=((A.isString(E))?[E]:E)||this.getAttributeKeys();for(var D=0,B=E.length;D<B;++D){if(F.hasOwnProperty(E[D])){this._configs[E[D]].refresh(C);}}},register:function(B,C){this.setAttributeConfig(B,C);},getAttributeConfig:function(C){this._configs=this._configs||{};var B=this._configs[C]||{};var D={};for(C in B){if(A.hasOwnProperty(B,C)){D[C]=B[C];}}return D;},setAttributeConfig:function(B,C,D){this._configs=this._configs||{};C=C||{};if(!this._configs[B]){C.name=B;this._configs[B]=this.createAttribute(C);}else{this._configs[B].configure(C,D);}},configureAttribute:function(B,C,D){this.setAttributeConfig(B,C,D);},resetAttributeConfig:function(B){this._configs=this._configs||{};this._configs[B].resetConfig();},subscribe:function(B,C){this._events=this._events||{};if(!(B in this._events)){this._events[B]=this.createEvent(B);}YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){this.subscribe.apply(this,arguments);},addListener:function(){this.subscribe.apply(this,arguments);},fireBeforeChangeEvent:function(C){var B="before";B+=C.type.charAt(0).toUpperCase()+C.type.substr(1)+"Change";C.type=B;return this.fireEvent(C.type,C);},fireChangeEvent:function(B){B.type+="Change";return this.fireEvent(B.type,B);},createAttribute:function(B){return new YAHOO.util.Attribute(B,this);}};YAHOO.augment(YAHOO.util.AttributeProvider,YAHOO.util.EventProvider);})();(function(){var B=YAHOO.util.Dom,D=YAHOO.util.AttributeProvider,C={mouseenter:true,mouseleave:true};var A=function(E,F){this.init.apply(this,arguments);};A.DOM_EVENTS={"click":true,"dblclick":true,"keydown":true,"keypress":true,"keyup":true,"mousedown":true,"mousemove":true,"mouseout":true,"mouseover":true,"mouseup":true,"mouseenter":true,"mouseleave":true,"focus":true,"blur":true,"submit":true,"change":true};A.prototype={DOM_EVENTS:null,DEFAULT_HTML_SETTER:function(G,E){var F=this.get("element");if(F){F[E]=G;}return G;},DEFAULT_HTML_GETTER:function(E){var F=this.get("element"),G;if(F){G=F[E];}return G;},appendChild:function(E){E=E.get?E.get("element"):E;return this.get("element").appendChild(E);},getElementsByTagName:function(E){return this.get("element").getElementsByTagName(E);},hasChildNodes:function(){return this.get("element").hasChildNodes();},insertBefore:function(E,F){E=E.get?E.get("element"):E;F=(F&&F.get)?F.get("element"):F;return this.get("element").insertBefore(E,F);},removeChild:function(E){E=E.get?E.get("element"):E;return this.get("element").removeChild(E);},replaceChild:function(E,F){E=E.get?E.get("element"):E;F=F.get?F.get("element"):F;return this.get("element").replaceChild(E,F);},initAttributes:function(E){},addListener:function(J,I,K,H){H=H||this;var E=YAHOO.util.Event,G=this.get("element")||this.get("id"),F=this;if(C[J]&&!E._createMouseDelegate){return false;}if(!this._events[J]){if(G&&this.DOM_EVENTS[J]){E.on(G,J,function(M,L){if(M.srcElement&&!M.target){M.target=M.srcElement;}if((M.toElement&&!M.relatedTarget)||(M.fromElement&&!M.relatedTarget)){M.relatedTarget=E.getRelatedTarget(M);}if(!M.currentTarget){M.currentTarget=G;}F.fireEvent(J,M,L);},K,H);}this.createEvent(J,{scope:this});}return YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){return this.addListener.apply(this,arguments);},subscribe:function(){return this.addListener.apply(this,arguments);},removeListener:function(F,E){return this.unsubscribe.apply(this,arguments);},addClass:function(E){B.addClass(this.get("element"),E);},getElementsByClassName:function(F,E){return B.getElementsByClassName(F,E,this.get("element"));},hasClass:function(E){return B.hasClass(this.get("element"),E);},removeClass:function(E){return B.removeClass(this.get("element"),E);},replaceClass:function(F,E){return B.replaceClass(this.get("element"),F,E);},setStyle:function(F,E){return B.setStyle(this.get("element"),F,E);},getStyle:function(E){return B.getStyle(this.get("element"),E);},fireQueue:function(){var F=this._queue;for(var G=0,E=F.length;G<E;++G){this[F[G][0]].apply(this,F[G][1]);}},appendTo:function(F,G){F=(F.get)?F.get("element"):B.get(F);this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:F});G=(G&&G.get)?G.get("element"):B.get(G);var E=this.get("element");if(!E){return false;}if(!F){return false;}if(E.parent!=F){if(G){F.insertBefore(E,G);}else{F.appendChild(E);}}this.fireEvent("appendTo",{type:"appendTo",target:F});return E;},get:function(E){var G=this._configs||{},F=G.element;if(F&&!G[E]&&!YAHOO.lang.isUndefined(F.value[E])){this._setHTMLAttrConfig(E);}return D.prototype.get.call(this,E);},setAttributes:function(K,H){var F={},I=this._configOrder;for(var J=0,E=I.length;J<E;++J){if(K[I[J]]!==undefined){F[I[J]]=true;this.set(I[J],K[I[J]],H);}}for(var G in K){if(K.hasOwnProperty(G)&&!F[G]){this.set(G,K[G],H);}}},set:function(F,H,E){var G=this.get("element");if(!G){this._queue[this._queue.length]=["set",arguments];if(this._configs[F]){this._configs[F].value=H;}return;}if(!this._configs[F]&&!YAHOO.lang.isUndefined(G[F])){this._setHTMLAttrConfig(F);}return D.prototype.set.apply(this,arguments);},setAttributeConfig:function(E,F,G){this._configOrder.push(E);D.prototype.setAttributeConfig.apply(this,arguments);},createEvent:function(F,E){this._events[F]=true;return D.prototype.createEvent.apply(this,arguments);},init:function(F,E){this._initElement(F,E);},destroy:function(){var E=this.get("element");YAHOO.util.Event.purgeElement(E,true);this.unsubscribeAll();if(E&&E.parentNode){E.parentNode.removeChild(E);}this._queue=[];this._events={};this._configs={};this._configOrder=[];},_initElement:function(G,F){this._queue=this._queue||[];this._events=this._events||{};this._configs=this._configs||{};this._configOrder=[];F=F||{};F.element=F.element||G||null;var I=false;var E=A.DOM_EVENTS;this.DOM_EVENTS=this.DOM_EVENTS||{};for(var H in E){if(E.hasOwnProperty(H)){this.DOM_EVENTS[H]=E[H];}}if(typeof F.element==="string"){this._setHTMLAttrConfig("id",{value:F.element});}if(B.get(F.element)){I=true;this._initHTMLElement(F);this._initContent(F);}YAHOO.util.Event.onAvailable(F.element,function(){if(!I){this._initHTMLElement(F);}this.fireEvent("available",{type:"available",target:B.get(F.element)});},this,true);YAHOO.util.Event.onContentReady(F.element,function(){if(!I){this._initContent(F);}this.fireEvent("contentReady",{type:"contentReady",target:B.get(F.element)});},this,true);},_initHTMLElement:function(E){this.setAttributeConfig("element",{value:B.get(E.element),readOnly:true});},_initContent:function(E){this.initAttributes(E);this.setAttributes(E,true);this.fireQueue();},_setHTMLAttrConfig:function(E,G){var F=this.get("element");G=G||{};G.name=E;G.setter=G.setter||this.DEFAULT_HTML_SETTER;G.getter=G.getter||this.DEFAULT_HTML_GETTER;G.value=G.value||F[E];this._configs[E]=new YAHOO.util.Attribute(G,this);}};YAHOO.augment(A,D);YAHOO.util.Element=A;})();YAHOO.register("element",YAHOO.util.Element,{version:"2.8.1",build:"19"});
(function(){YAHOO.widget.TabView=function(el,attr){attr=attr||{};if(arguments.length==1&&!YAHOO.lang.isString(el)&&!el.nodeName){attr=el;el=attr.element||null;}
if(!el&&!attr.element){el=_createTabViewElement.call(this,attr);}
YAHOO.widget.TabView.superclass.constructor.call(this,el,attr);};YAHOO.extend(YAHOO.widget.TabView,YAHOO.util.Element);var proto=YAHOO.widget.TabView.prototype;var Dom=YAHOO.util.Dom;var Event=YAHOO.util.Event;var Tab=YAHOO.widget.Tab;proto.CLASSNAME='yui-navset';proto.TAB_PARENT_CLASSNAME='yui-nav';proto.CONTENT_PARENT_CLASSNAME='yui-content';proto._tabParent=null;proto._contentParent=null;proto.addTab=function(tab,index){var tabs=this.get('tabs');if(!tabs){this._queue[this._queue.length]=['addTab',arguments];return false;}
index=(index===undefined)?tabs.length:index;var before=this.getTab(index);var self=this;var el=this.get('element');var tabParent=this._tabParent;var contentParent=this._contentParent;var tabElement=tab.get('element');var contentEl=tab.get('contentEl');if(before){tabParent.insertBefore(tabElement,before.get('element'));}else{tabParent.appendChild(tabElement);}
if(contentEl&&!Dom.isAncestor(contentParent,contentEl)){contentParent.appendChild(contentEl);}
if(!tab.get('active')){tab.set('contentVisible',false,true);}else{this.set('activeTab',tab,true);}
var activate=function(e){YAHOO.util.Event.preventDefault(e);var silent=false;if(this==self.get('activeTab')){silent=true;}
self.set('activeTab',this,silent);};tab.addListener(tab.get('activationEvent'),activate);tab.addListener('activationEventChange',function(e){if(e.prevValue!=e.newValue){tab.removeListener(e.prevValue,activate);tab.addListener(e.newValue,activate);}});tabs.splice(index,0,tab);};proto.DOMEventHandler=function(e){var el=this.get('element');var target=YAHOO.util.Event.getTarget(e);var tabParent=this._tabParent;if(Dom.isAncestor(tabParent,target)){var tabEl;var tab=null;var contentEl;var tabs=this.get('tabs');for(var i=0,len=tabs.length;i<len;i++){tabEl=tabs[i].get('element');contentEl=tabs[i].get('contentEl');if(target==tabEl||Dom.isAncestor(tabEl,target)){tab=tabs[i];break;}}
if(tab){tab.fireEvent(e.type,e);}}};proto.getTab=function(index){return this.get('tabs')[index];};proto.getTabIndex=function(tab){var index=null;var tabs=this.get('tabs');for(var i=0,len=tabs.length;i<len;++i){if(tab==tabs[i]){index=i;break;}}
return index;};proto.removeTab=function(tab){var tabCount=this.get('tabs').length;var index=this.getTabIndex(tab);var nextIndex=index+1;if(tab==this.get('activeTab')){if(tabCount>1){if(index+1==tabCount){this.set('activeIndex',index-1);}else{this.set('activeIndex',index+1);}}}
this._tabParent.removeChild(tab.get('element'));this._contentParent.removeChild(tab.get('contentEl'));this._configs.tabs.value.splice(index,1);};proto.toString=function(){var name=this.get('id')||this.get('tagName');return"TabView "+name;};proto.contentTransition=function(newTab,oldTab){newTab.set('contentVisible',true);oldTab.set('contentVisible',false);};proto.initAttributes=function(attr){YAHOO.widget.TabView.superclass.initAttributes.call(this,attr);if(!attr.orientation){attr.orientation='top';}
var el=this.get('element');if(!YAHOO.util.Dom.hasClass(el,this.CLASSNAME)){YAHOO.util.Dom.addClass(el,this.CLASSNAME);}
this.setAttributeConfig('tabs',{value:[],readOnly:true});this._tabParent=this.getElementsByClassName(this.TAB_PARENT_CLASSNAME,'ul')[0]||_createTabParent.call(this);this._contentParent=this.getElementsByClassName(this.CONTENT_PARENT_CLASSNAME,'div')[0]||_createContentParent.call(this);this.setAttributeConfig('orientation',{value:attr.orientation,method:function(value){var current=this.get('orientation');this.addClass('yui-navset-'+value);if(current!=value){this.removeClass('yui-navset-'+current);}
switch(value){case'bottom':this.appendChild(this._tabParent);break;}}});this.setAttributeConfig('activeIndex',{value:attr.activeIndex,method:function(value){this.set('activeTab',this.getTab(value));},validator:function(value){return!this.getTab(value).get('disabled');}});this.setAttributeConfig('activeTab',{value:attr.activeTab,method:function(tab){var activeTab=this.get('activeTab');if(tab){tab.set('active',true);this._configs['activeIndex'].value=this.getTabIndex(tab);}
if(activeTab&&activeTab!=tab){activeTab.set('active',false);}
if(activeTab&&tab!=activeTab){this.contentTransition(tab,activeTab);}else if(tab){tab.set('contentVisible',true);}},validator:function(value){return!value.get('disabled');}});if(this._tabParent){_initTabs.call(this);}
this.DOM_EVENTS.submit=false;this.DOM_EVENTS.focus=false;this.DOM_EVENTS.blur=false;for(var type in this.DOM_EVENTS){if(YAHOO.lang.hasOwnProperty(this.DOM_EVENTS,type)){this.addListener.call(this,type,this.DOMEventHandler);}}};var _initTabs=function(){var tab,attr,contentEl;var el=this.get('element');var tabs=_getChildNodes(this._tabParent);var contentElements=_getChildNodes(this._contentParent);for(var i=0,len=tabs.length;i<len;++i){attr={};if(contentElements[i]){attr.contentEl=contentElements[i];}
tab=new YAHOO.widget.Tab(tabs[i],attr);this.addTab(tab);if(tab.hasClass(tab.ACTIVE_CLASSNAME)){this._configs.activeTab.value=tab;this._configs.activeIndex.value=this.getTabIndex(tab);}}};var _createTabViewElement=function(attr){var el=document.createElement('div');if(this.CLASSNAME){el.className=this.CLASSNAME;}
return el;};var _createTabParent=function(attr){var el=document.createElement('ul');if(this.TAB_PARENT_CLASSNAME){el.className=this.TAB_PARENT_CLASSNAME;}
this.get('element').appendChild(el);return el;};var _createContentParent=function(attr){var el=document.createElement('div');if(this.CONTENT_PARENT_CLASSNAME){el.className=this.CONTENT_PARENT_CLASSNAME;}
this.get('element').appendChild(el);return el;};var _getChildNodes=function(el){var nodes=[];var childNodes=el.childNodes;for(var i=0,len=childNodes.length;i<len;++i){if(childNodes[i].nodeType==1){nodes[nodes.length]=childNodes[i];}}
return nodes;};})();(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event;var Tab=function(el,attr){attr=attr||{};if(arguments.length==1&&!YAHOO.lang.isString(el)&&!el.nodeName){attr=el;el=attr.element;}
if(!el&&!attr.element){el=_createTabElement.call(this,attr);}
this.loadHandler={success:function(o){this.set('content',o.responseText);},failure:function(o){}};Tab.superclass.constructor.call(this,el,attr);this.DOM_EVENTS={};};YAHOO.extend(Tab,YAHOO.util.Element);var proto=Tab.prototype;proto.LABEL_TAGNAME='em';proto.ACTIVE_CLASSNAME='selected';proto.DISABLED_CLASSNAME='disabled';proto.LOADING_CLASSNAME='loading';proto.dataConnection=null;proto.loadHandler=null;proto._loading=false;proto.toString=function(){var el=this.get('element');var id=el.id||el.tagName;return"Tab "+id;};proto.initAttributes=function(attr){attr=attr||{};Tab.superclass.initAttributes.call(this,attr);var el=this.get('element');this.setAttributeConfig('activationEvent',{value:attr.activationEvent||'click'});this.setAttributeConfig('labelEl',{value:attr.labelEl||_getlabelEl.call(this),method:function(value){var current=this.get('labelEl');if(current){if(current==value){return false;}
this.replaceChild(value,current);}else if(el.firstChild){this.insertBefore(value,el.firstChild);}else{this.appendChild(value);}}});this.setAttributeConfig('label',{value:attr.label||_getLabel.call(this),method:function(value){var labelEl=this.get('labelEl');if(!labelEl){this.set('labelEl',_createlabelEl.call(this));}
_setLabel.call(this,value);}});this.setAttributeConfig('contentEl',{value:attr.contentEl||document.createElement('div'),method:function(value){var current=this.get('contentEl');if(current){if(current==value){return false;}
this.replaceChild(value,current);}}});this.setAttributeConfig('content',{value:attr.content,method:function(value){this.get('contentEl').innerHTML=value;}});var _dataLoaded=false;this.setAttributeConfig('dataSrc',{value:attr.dataSrc});this.setAttributeConfig('cacheData',{value:attr.cacheData||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig('loadMethod',{value:attr.loadMethod||'GET',validator:YAHOO.lang.isString});this.setAttributeConfig('dataLoaded',{value:false,validator:YAHOO.lang.isBoolean,writeOnce:true});this.setAttributeConfig('dataTimeout',{value:attr.dataTimeout||null,validator:YAHOO.lang.isNumber});this.setAttributeConfig('active',{value:attr.active||this.hasClass(this.ACTIVE_CLASSNAME),method:function(value){if(value===true){this.addClass(this.ACTIVE_CLASSNAME);this.set('title','active');}else{this.removeClass(this.ACTIVE_CLASSNAME);this.set('title','');}},validator:function(value){return YAHOO.lang.isBoolean(value)&&!this.get('disabled');}});this.setAttributeConfig('disabled',{value:attr.disabled||this.hasClass(this.DISABLED_CLASSNAME),method:function(value){if(value===true){Dom.addClass(this.get('element'),this.DISABLED_CLASSNAME);}else{Dom.removeClass(this.get('element'),this.DISABLED_CLASSNAME);}},validator:YAHOO.lang.isBoolean});this.setAttributeConfig('href',{value:attr.href||this.getElementsByTagName('a')[0].getAttribute('href',2)||'#',method:function(value){this.getElementsByTagName('a')[0].href=value;},validator:YAHOO.lang.isString});this.setAttributeConfig('contentVisible',{value:attr.contentVisible,method:function(value){if(value){this.get('contentEl').style.display='block';if(this.get('dataSrc')){if(!this._loading&&!(this.get('dataLoaded')&&this.get('cacheData'))){_dataConnect.call(this);}}}else{this.get('contentEl').style.display='none';}},validator:YAHOO.lang.isBoolean});};var _createTabElement=function(attr){var el=document.createElement('li');var a=document.createElement('a');a.href=attr.href||'#';el.appendChild(a);var label=attr.label||null;var labelEl=attr.labelEl||null;if(labelEl){if(!label){label=_getLabel.call(this,labelEl);}}else{labelEl=_createlabelEl.call(this);}
a.appendChild(labelEl);return el;};var _getlabelEl=function(){return this.getElementsByTagName(this.LABEL_TAGNAME)[0];};var _createlabelEl=function(){var el=document.createElement(this.LABEL_TAGNAME);return el;};var _setLabel=function(label){var el=this.get('labelEl');el.innerHTML=label;};var _getLabel=function(){var label,el=this.get('labelEl');if(!el){return undefined;}
return el.innerHTML;};var _dataConnect=function(){if(!YAHOO.util.Connect){return false;}
Dom.addClass(this.get('contentEl').parentNode,this.LOADING_CLASSNAME);this._loading=true;this.dataConnection=YAHOO.util.Connect.asyncRequest(this.get('loadMethod'),this.get('dataSrc'),{success:function(o){this.loadHandler.success.call(this,o);this.set('dataLoaded',true);this.dataConnection=null;Dom.removeClass(this.get('contentEl').parentNode,this.LOADING_CLASSNAME);this._loading=false;},failure:function(o){this.loadHandler.failure.call(this,o);this.dataConnection=null;Dom.removeClass(this.get('contentEl').parentNode,this.LOADING_CLASSNAME);this._loading=false;},scope:this,timeout:this.get('dataTimeout')});};YAHOO.widget.Tab=Tab;})();YAHOO.register("tabview",YAHOO.widget.TabView,{version:"2.3.0",build:"442"});
var Dom=YAHOO.util.Dom;var Event=YAHOO.util.Event;var lang=YAHOO.lang;function Scheduler(){var tasklets=[];var timer=null;var running=false;var idle=false;this.schedule=function(f,p,s){if(!f)f=this.schedule.caller;if(!p)p=[];if(!s)s=this.schedule.caller;tasklets.push([f,p,s]);if(running&&idle){setTimeout('scheduler.loop()',0);idle=false;}}
this.run=function(){running=true;this.loop();}
this.loop=function(){var task=tasklets.shift();if(task){task[0].apply(task[2],task[1]);timer=setTimeout('scheduler.loop()',0);}else idle=true;}
this.stop=function(){running=false;clearTimeout(timer);}};var scheduler=new Scheduler();scheduler.run();function Drag(){this.dragstartTime=0;this.dragstartCoords=[0,0];this.targetEl=null;this.targetPageXY=[0,0];this.dragactive=false;this.coords=[0,0];this.targetObject={};Event.onDOMReady(function(){Event.addListener(document,"mousedown",Drag.startDetection,Drag,true);});this.startDetection=function(ev){this.targetEl=Event.getTarget(ev);this.targetObject=this.targetEl.dragObject;while(true){if(this.targetEl===null)
return;else if(typeof(this.targetEl.dragObject)=='undefined'){this.targetEl=this.targetEl.parentNode;}else{this.targetObject=this.targetEl.dragObject;break;}}
Event.stopEvent(ev);this.dragstartTime=(new Date()).getTime();this.dragstartCoords=Event.getXY(ev);var tElXY=Dom.getXY(this.targetEl);this.coords=Event.getXY(ev);this.dragStartOffset=[this.dragstartCoords[0]-tElXY[0],this.dragstartCoords[1]-tElXY[1]];Event.addListener(document,"mousemove",this.detectDrag,this,true);Event.addListener(document,"mouseup",this.endDrag,this,true);};this.stopClicks=function(ev){Event.stopEvent(ev);};this.detectDrag=function(ev){Event.stopEvent(ev);if((new Date()).getTime()>this.dragstartTime+100){this.dragactive=true;}else if(Math.abs(Event.getPageX(ev)-this.dragstartCoords[0])>8&&Math.abs(Event.getPageY(ev)-this.dragstartCoords[0])>8){this.dragactive=true;}
if(this.dragactive){Event.removeListener(document,"mousemove",this.detectDrag);Event.addListener(document,"mousemove",this.dragging,this,true);Event.addListener(document,"click",this.stopClicks,this,true);try{this.targetObject.onDrag(this.dragStartOffset);}catch(err){console.log("An exception occurred in the script. Error name: "+e.name+". Error message: "+e.message);}}};this.dragging=function(ev){Event.stopEvent(ev);this.coords=Event.getXY(ev);try{this.targetObject.whileDrag(this.coords);}catch(err){console.log("An exception occurred in the script. Error name: "+err.name+". Error message: "+err.message);}}
this.endDrag=function(ev){if(this.dragactive){Event.stopEvent(ev);this.dragactive=false;try{this.targetObject.onDrop(this.coords);}catch(err){console.log("An exception occurred in the script. Error name: "+err.name+". Error message: "+err.message);}}
scheduler.schedule(Event.removeListener,[document,"click",this.stopClicks],Event);Event.removeListener(document,"mouseup",this.endDrag);Event.removeListener(document,"mousemove");}}
var Drag=new Drag;function Draggable(el){var d=Drag;var uiElement=Dom.get(el);uiElement.dragObject=this;this.dragStartOffset=[0,0];var originPosition=[uiElement.offsetLeft,uiElement.offsetTop];var delta=[0,0];this.onDrag=function(offset){this.dragStartOffset=offset;originPosition=[uiElement.offsetLeft,uiElement.offsetTop];}
this.whileDrag=function(coords){delta=[d.coords[0]-d.dragstartCoords[0],d.coords[1]-d.dragstartCoords[1]];uiElement.style.left=(originPosition[0]+delta[0])+'px';uiElement.style.top=(originPosition[1]+delta[1])+'px';}}
function Droppable(el){}
function convertStylePx(val){if(!val){return;}
val=val.replace("px","");if(isNaN(val)){return 0;}
return parseInt(val);}
function getWidth(elem){var currentStyle;if(elem.currentStyle){currentStyle=elem.currentStyle;}
else if(window.getComputedStyle){currentStyle=document.defaultView.getComputedStyle(elem,null);}
else{currentStyle=elem.style;}
return(elem.offsetWidth-
convertStylePx(currentStyle.marginLeft)-
convertStylePx(currentStyle.marginRight)-
convertStylePx(currentStyle.borderLeftWidth)-
convertStylePx(currentStyle.borderRightWidth));}
function getHeight(elem){var currentStyle;if(elem.currentStyle){currentStyle=elem.currentStyle;}
else if(window.getComputedStyle){currentStyle=document.defaultView.getComputedStyle(elem,null);}
else{currentStyle=elem.style;}
return(elem.offsetHeight-
convertStylePx(currentStyle.marginTop)-
convertStylePx(currentStyle.marginBottom)-
convertStylePx(currentStyle.borderTopWidth)-
convertStylePx(currentStyle.borderBottomWidth));}
function Slider(el,config){var d=Drag;var thumb=Dom.get(el);this.container=thumb.parentNode;var dir=(typeof(config.dir)!='undefined')?config.dir:"ltr";if(typeof(config.from)!='undefined'){this.value=config.from.value;this.range=config.from.range;this.input=config.from.input;}else{this.value=(typeof(config.value)=='undefined')?0:config.value;this.range=(typeof(config.range)=='undefined')?[0,10]:config.range;this.input=(typeof(config.input)=='undefined')?null:config.input;}
this.input=Dom.get(this.input);var valueEl=(typeof(config.valueEl)=='undefined')?Dom.getFirstChildBy(this.container,function(el){return Dom.hasClass(el,'valuebg')}):Dom.get(config.valueEl);if(typeof(config.hiddenValues)!='undefined'){var hiddenValues=config.hiddenValues;var hiddenRange=[this.range[0],this.range[1]-hiddenValues];var hiddenValueEl=(typeof(config.hiddenValueEl)=='undefined')?Dom.getFirstChildBy(this.container,function(el){return Dom.hasClass(el,'hiddenbg')}):Dom.get(config.hiddenValueEl);var hiddenValueEl=Dom.get(hiddenValueEl);var hidden=(this.value>=hiddenRange[1])?true:false;}
this.createEvent("change");this.createEvent("setRange");this.createEvent("valueChange");this.createEvent("slideStart");this.createEvent("drag");this.createEvent("slideEnd");this.createEvent("drop");var boundaries=[0,0,0,0];var pixelScale=0;var currentStyle=(this.container.currentStyle)?this.container.currentStyle:(window.getComputedStyle)?window.getComputedStyle(this.container,null):this.container.style;this.setConstraints=function(b){boundaries=(typeof(b)=='undefined')?[convertStylePx(currentStyle.paddingTop),convertStylePx(currentStyle.paddingLeft)+convertStylePx(currentStyle.width)-(thumb.offsetWidth?thumb.offsetWidth:16),convertStylePx(currentStyle.paddingTop)+convertStylePx(currentStyle.height)-(thumb.offsetHeight?thumb.offsetHeight:30),convertStylePx(currentStyle.paddingLeft)]:b;pixelScale=convertStylePx(currentStyle.width)-(thumb.offsetWidth?thumb.offsetWidth:16);};this.setConstraints();thumb.dragObject=this;this.dragStartOffset=[0,0];var originPosition=[thumb.offsetLeft,thumb.offsetTop];var position=[0,0];var delta=[0,0];this.onDrag=function(offset){this.dragStartOffset=offset;originPosition=[thumb.offsetLeft,thumb.offsetTop];this.fireEvent("slideStart");this.fireEvent("drag");};this.whileDrag=function(coords){delta=[d.coords[0]-d.dragstartCoords[0],d.coords[1]-d.dragstartCoords[1]];position=[originPosition[0]+delta[0],originPosition[1]+delta[1]];this.dragPosition(position);};this.onDrop=function(coords){this.fireEvent("slideEnd");this.fireEvent("drop");this.setPosition(position);};this.clickContainer=function(ev){if(Event.getTarget(ev)!=thumb){var conPos=Dom.getXY(this.container);var evPos=Event.getXY(ev)
this.setPosition([evPos[0]-conPos[0]-thumb.offsetWidth/2,evPos[1]-conPos[1]-thumb.offsetWidth/2]);}};this.removeEvents=function(){Event.removeListener(this.container,"click",this.clickContainer,this,true);}
Event.addListener(this.container,"click",this.clickContainer,this,true);var absRange=null;this.setRange=function(r){if(absRange===null||r!==this.range){this.range=r;absRange=Math.abs(r[0]-r[1]);if(this.value>r[1]||this.value<r[0]){this.setValue(this.value);}else{position=this.positionByValue(this.value);this.draw();}
if(typeof(hiddenValues)=='undefined')this.fireEvent("setRange",r);}
if(absRange<=0){thumb.dragObject=undefined;}else
thumb.dragObject=this;};this.checkHidden=function(){if(this.value>=hiddenRange[1]&&hidden){hidden=false;this.setRange([hiddenRange[0],hiddenRange[1]+hiddenValues]);hiddenValueEl.style.visibility='visible';if(dir=='ltr'){hiddenValueEl.style.clip="rect(0px auto auto "+Math.round(((1-(hiddenValues/absRange))*pixelScale)+boundaries[3]+thumb.offsetWidth/2)+"px)";}
else if(dir=='rtl'){hiddenValueEl.style.clip="rect(0px "+Math.round((((hiddenValues/absRange))*pixelScale)+boundaries[3]+thumb.offsetWidth/2)+"px auto 0px)";}}else if(this.value<hiddenRange[1]&&!hidden){hidden=true;this.setRange(hiddenRange);hiddenValueEl.style.visibility='hidden';}};if(dir=='ltr'){this.valueByPosition=function(p){return(absRange>0)?Math.round((p[0]-boundaries[3])/(pixelScale/absRange))+Math.min(this.range[0],this.range[1]):this.range[0];};}
else if(dir=='rtl'){this.valueByPosition=function(p){return(absRange>0)?((-1)*Math.round((p[0]-boundaries[3])/(pixelScale/absRange))+Math.max(this.range[0],this.range[1])):this.range[1];};}
if(dir=='ltr'){this.positionByValue=function(v){var p=[];if(absRange>0){p[0]=Math.round(((v-Math.min(this.range[0],this.range[1]))*(pixelScale/absRange))+boundaries[3]);p[1]=boundaries[0];}else{p[0]=boundaries[3];p[1]=boundaries[0];}
return p;};}
else if(dir=='rtl'){this.positionByValue=function(v){var p=[];if(absRange>0){p[0]=Math.round(((v-Math.min(this.range[0],this.range[1])-absRange)*(-1)*(pixelScale/absRange))+boundaries[3]);p[1]=boundaries[0];}else{p[0]=boundaries[3];p[1]=boundaries[0];}
return p;};}
this.keepPositionBounds=function(p){p[0]=(p[0]<boundaries[3])?boundaries[3]:(p[0]>boundaries[1])?boundaries[1]:p[0];p[1]=(p[1]<boundaries[0])?boundaries[0]:(p[1]>boundaries[2])?boundaries[2]:p[1];return p;};this.keepValueBounds=function(v){return(v>this.range[1])?this.range[1]:(v<this.range[0])?this.range[0]:v;};this.keepHiddenValueBounds=function(v){return(v>hiddenRange[1]+hiddenValues)?hiddenRange[1]+hiddenValues:(v<hiddenRange[0])?hiddenRange[0]:v;};this.dragValue=function(v){v=this.keepValueBounds(v);if(v!=this.value){this.value=v;position=this.positionByValue(v);this.draw();this.fireEvent("change",this.value);this.fireEvent("valueChange");}};this.setValue=function(v){if(typeof(hiddenValues)!=='undefined'){v=this.keepHiddenValueBounds(v);}else{v=this.keepValueBounds(v);}
if(v!==this.value){this.value=v;if(typeof(hiddenValues)!=='undefined')this.checkHidden();position=this.positionByValue(v);this.draw();this.fireEvent("change",this.value);this.fireEvent("valueChange");this.fireEvent("slideEnd");}};this.dragPosition=function(p){position=this.keepPositionBounds(p);position[0]=Math.round(Math.round((position[0]-boundaries[3])/(pixelScale/absRange))*(pixelScale/absRange)+boundaries[3]);var v=this.valueByPosition(p);if(this.value!=v){this.value=v;this.fireEvent("change",this.value);this.fireEvent("valueChange");}
this.draw();};this.setPosition=function(p){position=this.keepPositionBounds(p);position[0]=Math.round(Math.round((position[0]-boundaries[3])/(pixelScale/absRange))*(pixelScale/absRange)+boundaries[3]);var v=this.valueByPosition(p);if(this.value!=v){this.value=v;this.fireEvent("change",this.value);this.fireEvent("valueChange");this.fireEvent("slideEnd");}
if(typeof(hiddenValues)!='undefined')this.checkHidden();this.draw();};if(dir=='ltr'){this.draw=function(){thumb.style.left=position[0]+'px';thumb.style.top=position[1]+'px';valueEl.style.clip="rect(0px "+(position[0]+thumb.offsetWidth/2)+"px auto 0px)";this.container.title=+this.value;};}
else if(dir=='rtl'){this.draw=function(){thumb.style.left=position[0]+'px';thumb.style.top=position[1]+'px';valueEl.style.clip="rect(0px auto auto "+(position[0]+thumb.offsetWidth/2)+"px)";this.container.title=+this.value;};}
if(typeof(hiddenValues)!='undefined')this.checkHidden();else this.setRange(this.range);this.inputs={'number':this.setValue,'range':this.setRange};}
YAHOO.augment(Slider,YAHOO.util.EventProvider);function valueInput(el,range,value){this.input=Dom.get(el);this.range=range;if(typeof(value)=="undefined"){this.value=parseFloat(this.input.value,10)}else{this.value=value;this.input.value=value;}
this.createEvent("change");this.createEvent("setRange");this.createEvent("maxLimit");this.createEvent("minLimit");this.createEvent("invalid");this.onInput=function(ev){this.checkValue(this.input.value);}
Event.addListener(this.input,"keyup",this.onInput,this,true);Event.addListener(this.input,"click",this.onInput,this,true);this.setValue=function(v){this.checkValue(v);}
this.setRange=function(r){if(r!==this.range){this.range=r;this.keepRange(this.value,r);this.fireEvent("setRange",r);}}
this.removeEvents=function(){Event.removeListener(this.input,"keyup",this.onInput,this,true);Event.removeListener(this.input,"click",this.onInput,this,true);}
this.keepRange=function(v,r){if(v>r[1]){v=r[1];this.input.value=v;this.fireEvent("maxLimit");}
else if(v<r[0]){v=r[0];this.input.value=v;this.fireEvent("minLimit");}
return v;}
this.checkValue=function(v){v=parseFloat(v,10);if(lang.isNumber(v)){try{v=this.keepRange(v,this.range);}catch(err){}
if(v!=this.value){this.input.value=v;this.value=v;this.fireEvent('change',this.value);}}else{this.fireEvent('invalid');}}
this.inputs={'number':this.setValue,'range':this.setRange};}
YAHOO.augment(valueInput,YAHOO.util.EventProvider);function UIManager(){this.connect=function(a,b){a.subscribe('change',b.inputs.number,b,true);b.subscribe('change',a.inputs.number,a,true);a.subscribe('setRange',b.inputs.range,b,true);b.subscribe('setRange',a.inputs.range,a,true);}}
var UIManager=new UIManager();sliders=[];valueInputs=[];function create_slider(config){var r=[0,config.maxValue+config.overcharge];var confObj={};if(config.textfield){valueInputs[config.id]=new valueInput(config.textfield,r,config.iniValue);confObj.from=valueInputs[config.id];}
if(config.overcharge){confObj.hiddenValues=config.overcharge;confObj.hiddenValueEl=config.bg_overcharge;}
confObj.valueEl=config.bg_value;confObj.dir=config.dir;var s=new Slider(config.thumb,confObj);s.adjustSliderRange=function(rmax){this.setRange([0,rmax]);}
s.setActualValue=s.setValue;s.actualValue=s.value;s.maxValue=s.range[1];s.subscribe('change',function(){this.actualValue=this.value;},s,true);sliders[config.id]=s;UIManager.connect(sliders[config.id],valueInputs[config.id]);return s;}
function create_ranged_slider(config){Event.onDOMReady(function(){var r=[config.minValue,config.maxValue+config.overcharge];var confObj={};if(config.textfield){var i=new valueInput(config.textfield,r,config.iniValue);confObj.from=i;}
if(config.overcharge){confObj.hiddenValues=config.overcharge;confObj.hiddenValueEl=config.bg_overcharge;}
confObj.valueEl=config.bg_value;confObj.dir=config.dir;var s=new Slider(config.thumb,confObj);s.adjustSliderRange=function(rmax){this.setRange([0,rmax]);}
s.setActualValue=s.setValue;s.actualValue=s.value;s.maxValue=s.range[1];s.subscribe('change',function(){this.actualValue=this.value;},s,true);UIManager.connect(s,i);sliders[config.id]=s;});}
function transportController(config){var availableTransporters=config.availableTransporters;var capacityPerTransport=config.capacityPerTransport;var minimumResource=config.colonizationMinimumResource;var spaceReserved=(typeof(config.spaceReserved)=='undefined')?0:config.spaceReserved;var minimalNumberOfTransporters=(!(config.minimalNumberOfTransporters)||typeof(config.minimalNumberOfTransporters)=='undefined')?0:config.minimalNumberOfTransporters;var that=this;var rI=[];this.totalCapacity=(config.useSMK)?(Math.min(config.remainingSMK,(availableTransporters*capacityPerTransport))):(availableTransporters*capacityPerTransport);this.usedCapacity=spaceReserved;this.remainingCapacity=this.totalCapacity-this.usedCapacity;this.usedTransporters=0;this.createEvent("usedTransChanged");this.createEvent("availTransChanged");this.registerInput=function(input,weight){if(!weight)weight=1;rI.push({'input':input,'weight':weight,'oldMax':input.range[1]});input.subscribe("change",that.realignInput,this,true);this.realignInput();};this.registerSlider=this.registerInput;this.unregisterInput=function(s){for(i=0;i<rI.length;i++){}
this.realignInput();};var blockEvents=false;this.setTransporters=function(n){availableTransporters=n;this.totalCapacity=(config.useSMK)?(Math.min(config.remainingSMK,(availableTransporters*capacityPerTransport))):(availableTransporters*capacityPerTransport);this.remainingCapacity=this.totalCapacity-this.usedCapacity;this.fireEvent("availTransChanged",availableTransporters);if(this.remainingCapacity<0){var uC=this.usedCapacity,tC=this.totalCapacity;blockEvents=true;for(var i=rI.length-1;i>=0;i--){var multDividend=saveDivide(tC,capacityPerTransport);var multDivisor=saveDivide(uC,capacityPerTransport);var multiplier=saveDivide(multDividend,multDivisor);uC=uC-rI[i].input.value;rI[i].input.setRange([0,Math.round(rI[i].input.value*multiplier)]);tC=tC-rI[i].input.value;}
blockEvents=false;this.remainingCapacity=this.totalCapacity-this.usedCapacity;}
this.realignInput();};this.realignInput=function(v){if(blockEvents)return false;this.usedCapacity=spaceReserved;for(var i=rI.length-1;i>=0;i--){this.usedCapacity+=rI[i].input.value;}
if(minimalNumberOfTransporters>0){this.usedCapacity+=minimumResource;}
this.remainingCapacity=Math.max(0,this.totalCapacity-this.usedCapacity);var uT=Math.ceil(saveDivide(this.usedCapacity,capacityPerTransport));if(uT!=this.usedTransporters){this.usedTransporters=uT;this.fireEvent("usedTransChanged",this.usedTransporters);}
for(var i=rI.length-1;i>=0;i--){rI[i].input.setRange([0,Math.min(rI[i].oldMax,this.remainingCapacity+rI[i].input.value)]);}}
this.setCapacityPerTransporter=function(capacity){capacityPerTransport=capacity;this.totalCapacity=(config.useSMK)?(Math.min(config.remainingSMK,(availableTransporters*capacityPerTransport))):(availableTransporters*capacityPerTransport);if(this.totalCapacity<this.usedCapacity){for(var i=rI.length-1;i>=0;i--){rI[i].input.setValue(0);}}
this.realignInput();}}
YAHOO.augment(transportController,YAHOO.util.EventProvider);function transportETAController(config){var journeyDuration=config.journeyDuration;var loadingSpeed=config.loadingSpeed;var queueTime=config.queueTime;var wood=0;var wine=0;var crystal=0;var sulfur=0;var marble=0;var that=this;this.eta=journeyDuration;this.createEvent("ETAchanged");this.updatewood=function(res){wood=parseInt(res);that.recalcETA();}
this.updateglass=function(res){crystal=parseInt(res);that.recalcETA();}
this.updatewine=function(res){wine=parseInt(res);that.recalcETA();}
this.updatemarble=function(res){marble=parseInt(res);that.recalcETA();}
this.updatesulfur=function(res){sulfur=parseInt(res);that.recalcETA();}
this.updateJD=function(duration){journeyDuration=duration;that.recalcETA();}
this.recalcETA=function(){var res=wood+wine+crystal+marble+sulfur;this.eta=parseInt(queueTime)+parseInt(journeyDuration)+(parseInt(res)/loadingSpeed);this.fireEvent("ETAchanged",this.eta);}}
YAHOO.augment(transportETAController,YAHOO.util.EventProvider);function saveDivide(a,b){var result=0;if(b!=0)result=a/b;return result;}
function journeyDurationController(){this.duration=0;this.inputs=[];this.createEvent("change");var len=0;var that=this;this.registerInput=function(input,duration){this.inputs.push(input);len=this.inputs.length-1;input.jDCpresent=(input.value>0)?true:false;input.jDCduration=duration*1000;input.subscribe('change',function(v){if(this.value!=this.jDCpresent){that.updateSlowest();this.jDCpresent=(input.value>0)?true:false;}});this.updateSlowest();};this.updateSlowest=function(){var oldDuration=this.duration;this.duration=0;for(var i=0;i<=len;i++){if(this.inputs[i].value>0){this.duration=Math.max(this.duration,this.inputs[i].jDCduration);}}
if(oldDuration!=this.duration){this.fireEvent("change",this.duration);}};}
YAHOO.augment(journeyDurationController,YAHOO.util.EventProvider);function transporterDraftController(config){var that=this;this.capacityPerTransport=config.capacityPerTransport;this.transporterSpeed=config.transporterSpeed;this.tritonInjectorLevel=config.tritonInjectorLevel;this.input=null;this.tritonInput=null;this.createEvent("capacityPerTransportChanged");this.createEvent("transporterSpeedChanged");this.createEvent("tritonChanged");this.updateDraftParameters=function(){this.capacityPerTransport=this.getCurrentCapacity();this.transporterSpeed=this.getCurrentSpeed();this.fireEvent("capacityPerTransportChanged",this.capacityPerTransport);this.fireEvent("transporterSpeedChanged",this.transporterSpeed);this.fireEvent("tritonChanged",this.tritonInjectorLevel);};this.registerInput=function(input){this.input=input;Event.addListener(this.input,'change',function(v){that.updateDraftParameters();});}
this.registerTritonInput=function(tritonInput){this.tritonInput=tritonInput;Event.addListener(this.tritonInput,'change',function(v){that.updateDraftParameters();});}
this.getCurrentSpeed=function(){return this.input.options[this.input.selectedIndex].getAttribute('speed');}
this.getCurrentCapacity=function(){return this.input.options[this.input.selectedIndex].value;}}
YAHOO.augment(transporterDraftController,YAHOO.util.EventProvider);function transporterDraftController2(config){var that=this;this.capacityPerTransport=config.capacityPerTransport;this.transporterSpeed=config.transporterSpeed;this.tritonInjectorLevel=config.tritonInjectorLevel;this.input=null;this.tritonInput=null;this.createEvent("capacityPerTransportChanged");this.createEvent("transporterSpeedChanged");this.createEvent("tritonChanged");this.updateDraftParameters=function(){this.fireEvent("capacityPerTransportChanged",this.capacityPerTransport);this.fireEvent("transporterSpeedChanged",this.transporterSpeed);this.fireEvent("tritonChanged",this.tritonInjectorLevel);};this.registerTritonInput=function(tritonInput){this.tritonInput=tritonInput;Event.addListener(this.tritonInput,'change',function(v){that.updateDraftParameters();});}
this.setCapacityPerTransporter=function(capacity){this.capacityPerTransport=capacity;that.updateDraftParameters();}
this.setSpeed=function(speed){this.transporterSpeed=speed;that.updateDraftParameters();}}
YAHOO.augment(transporterDraftController2,YAHOO.util.EventProvider);function journeyDraftDurationController(config){var that=this;var basejourneyDuration=config.journeyDuration;var baseTransporterSpeed=config.transporterSpeed;var poseidonEffect=config.poseidonEffect;var tritonInjectorLevel=config.tritonInjectorLevel;var kingOfTheHill=config.kingOfTheHill;var fleetJourneyTime=config.fleetJourneyTime;var distance=config.distance;var timeUnit=config.timeUnit;this.journeyDuration=basejourneyDuration;this.transporterSpeed=baseTransporterSpeed;this.tritonInjectorLevel=tritonInjectorLevel;this.createEvent("journeyDurationChanged");this.updateTransporterSpeed=function(speed){this.transporterSpeed=speed;that.recalcJourneyDuration();}
this.updateTritonInjector=function(level){this.tritonInjectorLevel=level;that.recalcJourneyDuration();}
this.recalcJourneyDuration=function(){var fleetSpeed=parseInt(this.transporterSpeed)*(1.0+parseInt(this.tritonInjectorLevel)+parseInt(kingOfTheHill)+parseFloat(poseidonEffect));this.journeyDuration=Math.ceil((distance*parseInt(fleetJourneyTime))/fleetSpeed);this.fireEvent("journeyDurationChanged",this.journeyDuration);}}
YAHOO.augment(journeyDraftDurationController,YAHOO.util.EventProvider);function missionUpkeepController(){this.upkeep=0;this.inputs=[];this.createEvent("change");var len=0;var that=this;this.registerInput=function(input,upkeep){this.inputs.push(input);len=this.inputs.length-1;input.mUCupkeep=upkeep;input.subscribe('change',function(v){that.sumUpkeep();});this.sumUpkeep();};this.sumUpkeep=function(){this.upkeep=0;for(var i=0;i<=len;i++){this.upkeep+=this.inputs[i].mUCupkeep*this.inputs[i].value;}
this.fireEvent("change",this.upkeep);};}
YAHOO.augment(missionUpkeepController,YAHOO.util.EventProvider);function Pulldown(pulldown,handles,status){var pulldownEl=Dom.get(pulldown);pulldownEl.contentHeight=pulldownEl.offsetHeight;pulldownEl.style.overflow="hidden";this.status=status;this.hoverEl=null;if(!lang.isArray(handles))var handleEls=[handles];else var handleEls=handles;var handleBaseClasses=[];for(i=0;i<handleEls.length;i++){handleEls[i]=Dom.get(handleEls[i]);handleBaseClasses[i]=handleEls[i].className;if(handleBaseClasses[i]!=""){var index=handleBaseClasses[i].indexOf(' ');if(index>0){handleBaseClasses[i]=handleBaseClasses[i].slice(0,index);}}}
this.expand=function(){pulldownEl.style.overflow="";this.status=1;pulldownEl.style.height=pulldownEl.contentHeight+'px';for(i=0;i<handleEls.length;i++){Dom.addClass(handleEls[i],"extended");if(handleEls[i]!=this.hoverEl){Dom.addClass(handleEls[i],handleBaseClasses[i]+"_extended");}else{Dom.removeClass(handleEls[i],handleBaseClasses[i]+"_hover");Dom.addClass(handleEls[i],handleBaseClasses[i]+"_extended_hover");}}};this.collapse=function(){pulldownEl.style.overflow="hidden";this.status=0;pulldownEl.style.height='0px';for(i=0;i<handleEls.length;i++){Dom.removeClass(handleEls[i],"extended");if(handleEls[i]!=this.hoverEl){Dom.removeClass(handleEls[i],handleBaseClasses[i]+"_extended");}else{Dom.removeClass(handleEls[i],handleBaseClasses[i]+"_extended_hover");Dom.addClass(handleEls[i],handleBaseClasses[i]+"_hover");}}};if(!this.status)this.collapse();else this.expand();this.pswitch=function(){if(this.status)this.collapse();else this.expand();};this.setHoverEl=function(el){this.hoverEl=el;for(i=0;i<handleEls.length;i++){if(handleEls[i]==this.hoverEl){Dom.addClass(handleEls[i],"hover");if(this.status){Dom.removeClass(handleEls[i],handleBaseClasses[i]+"_extended");Dom.addClass(handleEls[i],handleBaseClasses[i]+"_extended_hover");}
else Dom.addClass(handleEls[i],handleBaseClasses[i]+"_hover");}}};this.unsetHoverEl=function(el){for(i=0;i<handleEls.length;i++){if(handleEls[i]==this.hoverEl){Dom.removeClass(handleEls[i],"hover");if(this.status){Dom.removeClass(handleEls[i],handleBaseClasses[i]+"_extended_hover");Dom.addClass(handleEls[i],handleBaseClasses[i]+"_extended");}
else Dom.removeClass(handleEls[i],handleBaseClasses[i]+"_hover");}}
this.hoverEl=null;};for(i=0;i<handleEls.length;i++){Event.addListener(handleEls[i],"click",function(e){Event.stopEvent(e)
this.pswitch();},this,true);Event.addListener(handleEls[i],"mouseover",function(e){this.setHoverEl(Event.getTarget(e));},this,true);Event.addListener(handleEls[i],"mouseout",function(e){this.unsetHoverEl(Event.getTarget(e));},this,true);}}
function constructionCostController(config){var SHIP="111";var UNIT="222";var inputs;var that=this;var buttonRecruitInput=Dom.get(config.button_recruit);var unitCategory=config.unitCategory;this.inputs=new Array();this.costs=new Object();this.availableResourcesAtCity=config.availableResourcesAtCity;this.localData=config.localData;this.rowLength=config.rowLength;this.noUnitsSelectedText=config.noUnitsSelectedText;this.noUnitsAreSelected=true;this.unitCountBoxesDiv=Dom.get(config.unitIconsDiv);this.accumulatedUnitCostsDiv=Dom.get(config.unitCostsDiv);this.registerInput=function(input,resourceCost,unitTypeId,local_name,unitName){this.inputs.push(input);input.cCCcosts=resourceCost;input.name=unitName;input.oldMax=input.range[1];input.unitTypeId=unitTypeId;input.local_name=local_name;input.subscribe('change',function(v){that.sumTotalCosts();that.updateTotalCostsHTML();that.updateUnitCountIconsHTML();that.realignInput();if(that.noUnitsAreSelected){that.displayNoUnitsHTML();}});}
this.sumTotalCosts=function(){this.noUnitsAreSelected=true;for(costFactor in this.localData){this.costs[costFactor]=0}
for(i=0;i<this.inputs.length;i++){unitcount=this.inputs[i].value;unitcost=this.inputs[i].cCCcosts;if(unitcount>0){this.noUnitsAreSelected=false;this.setButtonActive();}
for(costFactor in this.localData){if(!isNaN(unitcost[costFactor])){this.costs[costFactor]+=unitcost[costFactor]*unitcount;}}}}
this.getRowCount=function(inputArray){return Math.ceil(inputArray.length/this.rowLength);}
this.displayNoUnitsHTML=function(){unitIconsDiv=this.unitCountBoxesDiv;unitIconsDiv.innerHTML='<div class="nounitsselected"><p>'+this.noUnitsSelectedText+'</p></div>';this.setButtonInactive();}
this.setButtonInactive=function(){buttonRecruitInput.disabled=true;buttonRecruitInput.setAttribute("class","button_inactive");}
this.setButtonActive=function(){buttonRecruitInput.disabled=false;buttonRecruitInput.setAttribute("class","button");}
this.updateTotalCostsHTML=function(){accumulatedUnitCostsDiv=this.accumulatedUnitCostsDiv;accumulatedUnitCostsHTML=new Array();listElementHTML="";value="";var returnInactiveString=function(amount){return(amount==0)?"_inactive":"";}
for(key in this.localData){if(key=='completiontime'){value=getTimestring(this.costs[key]*1000,3);realvalue=value;}else{realvalue=shortenValue(this.costs[key],32);value=shortenValue(this.costs[key],4);}
listElementHTML='<li class="'+this.localData[key]['className']+returnInactiveString(value)+'" title="'+realvalue+' '+this.localData[key]['langKey']+'">';listElementHTML+='<span class="textLabel">'+this.localData[key]['langKey']+' : </span>';listElementHTML+=value+'</li>';accumulatedUnitCostsHTML.push(listElementHTML);}
accumulatedUnitCostsDiv.innerHTML='<ul id="accumulatedResourcesCosts">'+accumulatedUnitCostsHTML.join(" ")+'</ul>';}
this.updateUnitCountIconsHTML=function(){rowLength=this.rowLength;unitCountIconsHTML=new Array;unitCountIconTableHTML=new Array;unitCountBoxesDiv=this.unitCountBoxesDiv;rows=0;tableElement="";for(i=0;i<this.inputs.length;i++){if(this.inputs[i].value>0){unitCount=this.inputs[i].value;unitTypeId=this.inputs[i].unitTypeId;unitName=this.inputs[i].local_name;additionalClassNames="s"+unitTypeId;if(unitCategory==SHIP){additionalClassNames+=" ship"}
unitCountIconsHTML.push("<div title='"+unitName+"' class='army "+additionalClassNames+"'><span class='textLabel'>"+unitName+": </span><div class='unitcounttextlabel'>"+unitCount+"</div></div>");}}
rows=this.getRowCount(unitCountIconsHTML);cells=rows*this.rowLength;for(i=0;i<cells;i++){if(typeof unitCountIconsHTML[i]!='undefined'){unitCountIconTableHTML.push("<td>"+unitCountIconsHTML[i]+"</td>")}else{unitCountIconTableHTML.push("<td><div class='army nobckrd'><div class='unitcounttextlabel'>&nbsp;</div></div></td>")}
if((i+1)!=cells&&(i+1)%rowLength==0){unitCountIconTableHTML.push("</tr><tr>");}}
unitCountBoxesDiv.innerHTML="<table id='unit_basket'><tr>"+unitCountIconTableHTML.join(" ")+"</tr></table>";}
this.getMaxBuildableUnits=function(i){var maxBuildableUnits=999999;unitcost=this.inputs[i].cCCcosts;for(costfactor in this.availableResourcesAtCity){if(typeof(unitcost[costfactor])!='undefined'){if(!isNaN(unitcost[costfactor])){maxBuildableUnits=Math.min(maxBuildableUnits,((this.availableResourcesAtCity[costfactor]-this.costs[costfactor])/unitcost[costfactor]));}}}
return Math.floor(maxBuildableUnits);}
this.realignInput=function(){var maxBuildableUnits;for(i=0;i<this.inputs.length;i++){maxBuildableUnits=this.getMaxBuildableUnits(i);this.inputs[i].setRange([0,Math.min(this.inputs[i].oldMax,maxBuildableUnits+this.inputs[i].value)]);}}
this.setNewMaxCitizens=function(newMax){var diff=newMax-this.availableResourcesAtCity['citizens'];this.availableResourcesAtCity['citizens']=newMax;for(i=0;i<this.inputs.length;i++){this.inputs[i].oldMax+=diff;}
this.realignInput();}}
YAHOO.augment(constructionCostController,YAHOO.util.EventProvider);
(function(){YAHOO.util.Config=function(D){if(D){this.init(D);}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[];},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE);},checkNumber:function(D){return(!isNaN(D));},fireEvent:function(D,F){var E=this.config[D];if(E&&E.event){E.event.fire(F);}},addProperty:function(E,D){E=E.toLowerCase();this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner);}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value);}},getConfig:function(){var D={},F=this.config,G,E;for(G in F){if(B.hasOwnProperty(F,G)){E=F[G];if(E&&E.event){D[G]=E.value;}}}return D;},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value;}else{return undefined;}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true;}}else{return false;}},setProperty:function(E,G,D){var F;E=E.toLowerCase();if(this.queueInProgress&&!D){this.queueProperty(E,G);return true;}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false;}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G]);}return true;}}else{return false;}}},queueProperty:function(S,P){S=S.toLowerCase();var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false;}else{if(!B.isUndefined(P)){R.value=P;}else{P=R.value;}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break;}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P]);}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break;}}}}}return true;}else{return false;}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D);}else{this.fireEvent(D,E.value);}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F];}}this.initialConfig=E;}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F]);}}},refresh:function(){var D;for(D in this.config){if(B.hasOwnProperty(this.config,D)){this.refireEvent(D);}}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.eventQueue[E]=null;this.fireEvent(D,G);}}this.queueInProgress=false;this.eventQueue=[];},subscribeToConfigEvent:function(D,E,G,H){var F=this.config[D.toLowerCase()];if(F&&F.event){if(!A.alreadySubscribed(F.event,E,G)){F.event.subscribe(E,G,H);}return true;}else{return false;}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G);}else{return false;}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]";}return D;},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", ";}}return D;},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null;}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null;}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true;}}while(G--);}return false;};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Module=function(R,Q){if(R){this.init(R,Q);}else{}};var F=YAHOO.util.Dom,D=YAHOO.util.Config,N=YAHOO.util.Event,M=YAHOO.util.CustomEvent,G=YAHOO.widget.Module,I=YAHOO.env.ua,H,P,O,E,A={"BEFORE_INIT":"beforeInit","INIT":"init","APPEND":"append","BEFORE_RENDER":"beforeRender","RENDER":"render","CHANGE_HEADER":"changeHeader","CHANGE_BODY":"changeBody","CHANGE_FOOTER":"changeFooter","CHANGE_CONTENT":"changeContent","DESTROY":"destroy","BEFORE_SHOW":"beforeShow","SHOW":"show","BEFORE_HIDE":"beforeHide","HIDE":"hide"},J={"VISIBLE":{key:"visible",value:true,validator:YAHOO.lang.isBoolean},"EFFECT":{key:"effect",suppressEvent:true,supercedes:["visible"]},"MONITOR_RESIZE":{key:"monitorresize",value:true},"APPEND_TO_DOCUMENT_BODY":{key:"appendtodocumentbody",value:false}};G.IMG_ROOT=null;G.IMG_ROOT_SSL=null;G.CSS_MODULE="yui-module";G.CSS_HEADER="hd";G.CSS_BODY="bd";G.CSS_FOOTER="ft";G.RESIZE_MONITOR_SECURE_URL="javascript:false;";G.RESIZE_MONITOR_BUFFER=1;G.textResizeEvent=new M("textResize");G.forceDocumentRedraw=function(){var Q=document.documentElement;if(Q){Q.className+=" ";Q.className=YAHOO.lang.trim(Q.className);}};function L(){if(!H){H=document.createElement("div");H.innerHTML=('<div class="'+G.CSS_HEADER+'"></div>'+'<div class="'+G.CSS_BODY+'"></div><div class="'+G.CSS_FOOTER+'"></div>');P=H.firstChild;O=P.nextSibling;E=O.nextSibling;}return H;}function K(){if(!P){L();}return(P.cloneNode(false));}function B(){if(!O){L();}return(O.cloneNode(false));}function C(){if(!E){L();}return(E.cloneNode(false));}G.prototype={constructor:G,element:null,header:null,body:null,footer:null,id:null,imageRoot:G.IMG_ROOT,initEvents:function(){var Q=M.LIST;this.beforeInitEvent=this.createEvent(A.BEFORE_INIT);this.beforeInitEvent.signature=Q;this.initEvent=this.createEvent(A.INIT);this.initEvent.signature=Q;this.appendEvent=this.createEvent(A.APPEND);this.appendEvent.signature=Q;this.beforeRenderEvent=this.createEvent(A.BEFORE_RENDER);this.beforeRenderEvent.signature=Q;this.renderEvent=this.createEvent(A.RENDER);this.renderEvent.signature=Q;this.changeHeaderEvent=this.createEvent(A.CHANGE_HEADER);this.changeHeaderEvent.signature=Q;this.changeBodyEvent=this.createEvent(A.CHANGE_BODY);this.changeBodyEvent.signature=Q;this.changeFooterEvent=this.createEvent(A.CHANGE_FOOTER);this.changeFooterEvent.signature=Q;this.changeContentEvent=this.createEvent(A.CHANGE_CONTENT);this.changeContentEvent.signature=Q;this.destroyEvent=this.createEvent(A.DESTROY);this.destroyEvent.signature=Q;this.beforeShowEvent=this.createEvent(A.BEFORE_SHOW);this.beforeShowEvent.signature=Q;this.showEvent=this.createEvent(A.SHOW);this.showEvent.signature=Q;this.beforeHideEvent=this.createEvent(A.BEFORE_HIDE);this.beforeHideEvent.signature=Q;this.hideEvent=this.createEvent(A.HIDE);this.hideEvent.signature=Q;},platform:function(){var Q=navigator.userAgent.toLowerCase();if(Q.indexOf("windows")!=-1||Q.indexOf("win32")!=-1){return"windows";}else{if(Q.indexOf("macintosh")!=-1){return"mac";}else{return false;}}}(),browser:function(){var Q=navigator.userAgent.toLowerCase();if(Q.indexOf("opera")!=-1){return"opera";}else{if(Q.indexOf("msie 7")!=-1){return"ie7";}else{if(Q.indexOf("msie")!=-1){return"ie";}else{if(Q.indexOf("safari")!=-1){return"safari";}else{if(Q.indexOf("gecko")!=-1){return"gecko";}else{return false;}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true;}else{return false;}}(),initDefaultConfig:function(){this.cfg.addProperty(J.VISIBLE.key,{handler:this.configVisible,value:J.VISIBLE.value,validator:J.VISIBLE.validator});this.cfg.addProperty(J.EFFECT.key,{suppressEvent:J.EFFECT.suppressEvent,supercedes:J.EFFECT.supercedes});this.cfg.addProperty(J.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:J.MONITOR_RESIZE.value});this.cfg.addProperty(J.APPEND_TO_DOCUMENT_BODY.key,{value:J.APPEND_TO_DOCUMENT_BODY.value});},init:function(V,U){var S,W;this.initEvents();this.beforeInitEvent.fire(G);this.cfg=new D(this);if(this.isSecure){this.imageRoot=G.IMG_ROOT_SSL;}if(typeof V=="string"){S=V;V=document.getElementById(V);if(!V){V=(L()).cloneNode(false);V.id=S;}}this.id=F.generateId(V);this.element=V;W=this.element.firstChild;if(W){var R=false,Q=false,T=false;do{if(1==W.nodeType){if(!R&&F.hasClass(W,G.CSS_HEADER)){this.header=W;R=true;}else{if(!Q&&F.hasClass(W,G.CSS_BODY)){this.body=W;Q=true;}else{if(!T&&F.hasClass(W,G.CSS_FOOTER)){this.footer=W;T=true;}}}}}while((W=W.nextSibling));}this.initDefaultConfig();F.addClass(this.element,G.CSS_MODULE);if(U){this.cfg.applyConfig(U,true);}if(!D.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);}this.initEvent.fire(G);},initResizeMonitor:function(){var R=(I.gecko&&this.platform=="windows");if(R){var Q=this;setTimeout(function(){Q._initResizeMonitor();},0);}else{this._initResizeMonitor();}},_initResizeMonitor:function(){var Q,S,U;function W(){G.textResizeEvent.fire();}if(!I.opera){S=F.get("_yuiResizeMonitor");var V=this._supportsCWResize();if(!S){S=document.createElement("iframe");if(this.isSecure&&G.RESIZE_MONITOR_SECURE_URL&&I.ie){S.src=G.RESIZE_MONITOR_SECURE_URL;}if(!V){U=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");S.src="data:text/html;charset=utf-8,"+encodeURIComponent(U);}S.id="_yuiResizeMonitor";S.title="Text Resize Monitor";S.style.position="absolute";S.style.visibility="hidden";var R=document.body,T=R.firstChild;if(T){R.insertBefore(S,T);}else{R.appendChild(S);}S.style.backgroundColor="transparent";S.style.borderWidth="0";S.style.width="2em";S.style.height="2em";S.style.left="0";S.style.top=(-1*(S.offsetHeight+G.RESIZE_MONITOR_BUFFER))+"px";S.style.visibility="visible";if(I.webkit){Q=S.contentWindow.document;Q.open();Q.close();}}if(S&&S.contentWindow){G.textResizeEvent.subscribe(this.onDomResize,this,true);if(!G.textResizeInitialized){if(V){if(!N.on(S.contentWindow,"resize",W)){N.on(S,"resize",W);}}G.textResizeInitialized=true;}this.resizeMonitor=S;}}},_supportsCWResize:function(){var Q=true;if(I.gecko&&I.gecko<=1.8){Q=false;}return Q;},onDomResize:function(S,R){var Q=-1*(this.resizeMonitor.offsetHeight+G.RESIZE_MONITOR_BUFFER);this.resizeMonitor.style.top=Q+"px";this.resizeMonitor.style.left="0";},setHeader:function(R){var Q=this.header||(this.header=K());if(R.nodeName){Q.innerHTML="";Q.appendChild(R);}else{Q.innerHTML=R;}if(this._rendered){this._renderHeader();}this.changeHeaderEvent.fire(R);this.changeContentEvent.fire();},appendToHeader:function(R){var Q=this.header||(this.header=K());Q.appendChild(R);this.changeHeaderEvent.fire(R);this.changeContentEvent.fire();},setBody:function(R){var Q=this.body||(this.body=B());if(R.nodeName){Q.innerHTML="";Q.appendChild(R);}else{Q.innerHTML=R;}if(this._rendered){this._renderBody();}this.changeBodyEvent.fire(R);this.changeContentEvent.fire();},appendToBody:function(R){var Q=this.body||(this.body=B());Q.appendChild(R);this.changeBodyEvent.fire(R);this.changeContentEvent.fire();},setFooter:function(R){var Q=this.footer||(this.footer=C());if(R.nodeName){Q.innerHTML="";Q.appendChild(R);}else{Q.innerHTML=R;}if(this._rendered){this._renderFooter();}this.changeFooterEvent.fire(R);this.changeContentEvent.fire();},appendToFooter:function(R){var Q=this.footer||(this.footer=C());Q.appendChild(R);this.changeFooterEvent.fire(R);this.changeContentEvent.fire();},render:function(S,Q){var T=this;function R(U){if(typeof U=="string"){U=document.getElementById(U);}if(U){T._addToParent(U,T.element);T.appendEvent.fire();}}this.beforeRenderEvent.fire();if(!Q){Q=this.element;}if(S){R(S);}else{if(!F.inDocument(this.element)){return false;}}this._renderHeader(Q);this._renderBody(Q);this._renderFooter(Q);this._rendered=true;this.renderEvent.fire();return true;},_renderHeader:function(Q){Q=Q||this.element;if(this.header&&!F.inDocument(this.header)){var R=Q.firstChild;if(R){Q.insertBefore(this.header,R);}else{Q.appendChild(this.header);}}},_renderBody:function(Q){Q=Q||this.element;if(this.body&&!F.inDocument(this.body)){if(this.footer&&F.isAncestor(Q,this.footer)){Q.insertBefore(this.body,this.footer);}else{Q.appendChild(this.body);}}},_renderFooter:function(Q){Q=Q||this.element;if(this.footer&&!F.inDocument(this.footer)){Q.appendChild(this.footer);}},destroy:function(){var Q;if(this.element){N.purgeElement(this.element,true);Q=this.element.parentNode;}if(Q){Q.removeChild(this.element);}this.element=null;this.header=null;this.body=null;this.footer=null;G.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire();},show:function(){this.cfg.setProperty("visible",true);},hide:function(){this.cfg.setProperty("visible",false);},configVisible:function(R,Q,S){var T=Q[0];if(T){this.beforeShowEvent.fire();F.setStyle(this.element,"display","block");this.showEvent.fire();}else{this.beforeHideEvent.fire();F.setStyle(this.element,"display","none");this.hideEvent.fire();}},configMonitorResize:function(S,R,T){var Q=R[0];if(Q){this.initResizeMonitor();}else{G.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null;}},_addToParent:function(Q,R){if(!this.cfg.getProperty("appendtodocumentbody")&&Q===document.body&&Q.firstChild){Q.insertBefore(R,Q.firstChild);}else{Q.appendChild(R);}},toString:function(){return"Module "+this.id;}};YAHOO.lang.augmentProto(G,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Overlay=function(P,O){YAHOO.widget.Overlay.superclass.constructor.call(this,P,O);};var I=YAHOO.lang,M=YAHOO.util.CustomEvent,G=YAHOO.widget.Module,N=YAHOO.util.Event,F=YAHOO.util.Dom,D=YAHOO.util.Config,K=YAHOO.env.ua,B=YAHOO.widget.Overlay,H="subscribe",E="unsubscribe",C="contained",J,A={"BEFORE_MOVE":"beforeMove","MOVE":"move"},L={"X":{key:"x",validator:I.isNumber,suppressEvent:true,supercedes:["iframe"]},"Y":{key:"y",validator:I.isNumber,suppressEvent:true,supercedes:["iframe"]},"XY":{key:"xy",suppressEvent:true,supercedes:["iframe"]},"CONTEXT":{key:"context",suppressEvent:true,supercedes:["iframe"]},"FIXED_CENTER":{key:"fixedcenter",value:false,supercedes:["iframe","visible"]},"WIDTH":{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"HEIGHT":{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"AUTO_FILL_HEIGHT":{key:"autofillheight",supercedes:["height"],value:"body"},"ZINDEX":{key:"zindex",value:null},"CONSTRAIN_TO_VIEWPORT":{key:"constraintoviewport",value:false,validator:I.isBoolean,supercedes:["iframe","x","y","xy"]},"IFRAME":{key:"iframe",value:(K.ie==6?true:false),validator:I.isBoolean,supercedes:["zindex"]},"PREVENT_CONTEXT_OVERLAP":{key:"preventcontextoverlap",value:false,validator:I.isBoolean,supercedes:["constraintoviewport"]}};B.IFRAME_SRC="javascript:false;";B.IFRAME_OFFSET=3;B.VIEWPORT_OFFSET=10;B.TOP_LEFT="tl";B.TOP_RIGHT="tr";B.BOTTOM_LEFT="bl";B.BOTTOM_RIGHT="br";B.PREVENT_OVERLAP_X={"tltr":true,"blbr":true,"brbl":true,"trtl":true};B.PREVENT_OVERLAP_Y={"trbr":true,"tlbl":true,"bltl":true,"brtr":true};B.CSS_OVERLAY="yui-overlay";B.CSS_HIDDEN="yui-overlay-hidden";B.CSS_IFRAME="yui-overlay-iframe";B.STD_MOD_RE=/^\s*?(body|footer|header)\s*?$/i;B.windowScrollEvent=new M("windowScroll");B.windowResizeEvent=new M("windowResize");B.windowScrollHandler=function(P){var O=N.getTarget(P);if(!O||O===window||O===window.document){if(K.ie){if(!window.scrollEnd){window.scrollEnd=-1;}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){B.windowScrollEvent.fire();},1);}else{B.windowScrollEvent.fire();}}};B.windowResizeHandler=function(O){if(K.ie){if(!window.resizeEnd){window.resizeEnd=-1;}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){B.windowResizeEvent.fire();},100);}else{B.windowResizeEvent.fire();}};B._initialized=null;if(B._initialized===null){N.on(window,"scroll",B.windowScrollHandler);N.on(window,"resize",B.windowResizeHandler);B._initialized=true;}B._TRIGGER_MAP={"windowScroll":B.windowScrollEvent,"windowResize":B.windowResizeEvent,"textResize":G.textResizeEvent};YAHOO.extend(B,G,{CONTEXT_TRIGGERS:[],init:function(P,O){B.superclass.init.call(this,P);this.beforeInitEvent.fire(B);F.addClass(this.element,B.CSS_OVERLAY);if(O){this.cfg.applyConfig(O,true);}if(this.platform=="mac"&&K.gecko){if(!D.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);}if(!D.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true);}}this.initEvent.fire(B);},initEvents:function(){B.superclass.initEvents.call(this);var O=M.LIST;this.beforeMoveEvent=this.createEvent(A.BEFORE_MOVE);this.beforeMoveEvent.signature=O;this.moveEvent=this.createEvent(A.MOVE);this.moveEvent.signature=O;},initDefaultConfig:function(){B.superclass.initDefaultConfig.call(this);var O=this.cfg;O.addProperty(L.X.key,{handler:this.configX,validator:L.X.validator,suppressEvent:L.X.suppressEvent,supercedes:L.X.supercedes});O.addProperty(L.Y.key,{handler:this.configY,validator:L.Y.validator,suppressEvent:L.Y.suppressEvent,supercedes:L.Y.supercedes});O.addProperty(L.XY.key,{handler:this.configXY,suppressEvent:L.XY.suppressEvent,supercedes:L.XY.supercedes});O.addProperty(L.CONTEXT.key,{handler:this.configContext,suppressEvent:L.CONTEXT.suppressEvent,supercedes:L.CONTEXT.supercedes});O.addProperty(L.FIXED_CENTER.key,{handler:this.configFixedCenter,value:L.FIXED_CENTER.value,validator:L.FIXED_CENTER.validator,supercedes:L.FIXED_CENTER.supercedes});O.addProperty(L.WIDTH.key,{handler:this.configWidth,suppressEvent:L.WIDTH.suppressEvent,supercedes:L.WIDTH.supercedes});O.addProperty(L.HEIGHT.key,{handler:this.configHeight,suppressEvent:L.HEIGHT.suppressEvent,supercedes:L.HEIGHT.supercedes});O.addProperty(L.AUTO_FILL_HEIGHT.key,{handler:this.configAutoFillHeight,value:L.AUTO_FILL_HEIGHT.value,validator:this._validateAutoFill,supercedes:L.AUTO_FILL_HEIGHT.supercedes});O.addProperty(L.ZINDEX.key,{handler:this.configzIndex,value:L.ZINDEX.value});O.addProperty(L.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:L.CONSTRAIN_TO_VIEWPORT.value,validator:L.CONSTRAIN_TO_VIEWPORT.validator,supercedes:L.CONSTRAIN_TO_VIEWPORT.supercedes});O.addProperty(L.IFRAME.key,{handler:this.configIframe,value:L.IFRAME.value,validator:L.IFRAME.validator,supercedes:L.IFRAME.supercedes});O.addProperty(L.PREVENT_CONTEXT_OVERLAP.key,{value:L.PREVENT_CONTEXT_OVERLAP.value,validator:L.PREVENT_CONTEXT_OVERLAP.validator,supercedes:L.PREVENT_CONTEXT_OVERLAP.supercedes});},moveTo:function(O,P){this.cfg.setProperty("xy",[O,P]);},hideMacGeckoScrollbars:function(){F.replaceClass(this.element,"show-scrollbars","hide-scrollbars");},showMacGeckoScrollbars:function(){F.replaceClass(this.element,"hide-scrollbars","show-scrollbars");},_setDomVisibility:function(O){F.setStyle(this.element,"visibility",(O)?"visible":"hidden");var P=B.CSS_HIDDEN;if(O){F.removeClass(this.element,P);}else{F.addClass(this.element,P);}},configVisible:function(R,O,X){var Q=O[0],S=F.getStyle(this.element,"visibility"),Y=this.cfg.getProperty("effect"),V=[],U=(this.platform=="mac"&&K.gecko),g=D.alreadySubscribed,W,P,f,c,b,a,d,Z,T;if(S=="inherit"){f=this.element.parentNode;while(f.nodeType!=9&&f.nodeType!=11){S=F.getStyle(f,"visibility");if(S!="inherit"){break;}f=f.parentNode;}if(S=="inherit"){S="visible";}}if(Y){if(Y instanceof Array){Z=Y.length;for(c=0;c<Z;c++){W=Y[c];V[V.length]=W.effect(this,W.duration);}}else{V[V.length]=Y.effect(this,Y.duration);}}if(Q){if(U){this.showMacGeckoScrollbars();}if(Y){if(Q){if(S!="visible"||S===""){this.beforeShowEvent.fire();T=V.length;for(b=0;b<T;b++){P=V[b];if(b===0&&!g(P.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){P.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true);}P.animateIn();}}}}else{if(S!="visible"||S===""){this.beforeShowEvent.fire();this._setDomVisibility(true);this.cfg.refireEvent("iframe");this.showEvent.fire();}else{this._setDomVisibility(true);}}}else{if(U){this.hideMacGeckoScrollbars();}if(Y){if(S=="visible"){this.beforeHideEvent.fire();T=V.length;for(a=0;a<T;a++){d=V[a];if(a===0&&!g(d.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){d.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);}d.animateOut();}}else{if(S===""){this._setDomVisibility(false);}}}else{if(S=="visible"||S===""){this.beforeHideEvent.fire();this._setDomVisibility(false);this.hideEvent.fire();}else{this._setDomVisibility(false);}}}},doCenterOnDOMEvent:function(){var O=this.cfg,P=O.getProperty("fixedcenter");if(O.getProperty("visible")){if(P&&(P!==C||this.fitsInViewport())){this.center();}}},fitsInViewport:function(){var S=B.VIEWPORT_OFFSET,Q=this.element,T=Q.offsetWidth,R=Q.offsetHeight,O=F.getViewportWidth(),P=F.getViewportHeight();return((T+S<O)&&(R+S<P));},configFixedCenter:function(S,Q,T){var U=Q[0],P=D.alreadySubscribed,R=B.windowResizeEvent,O=B.windowScrollEvent;if(U){this.center();if(!P(this.beforeShowEvent,this.center)){this.beforeShowEvent.subscribe(this.center);}if(!P(R,this.doCenterOnDOMEvent,this)){R.subscribe(this.doCenterOnDOMEvent,this,true);}if(!P(O,this.doCenterOnDOMEvent,this)){O.subscribe(this.doCenterOnDOMEvent,this,true);}}else{this.beforeShowEvent.unsubscribe(this.center);R.unsubscribe(this.doCenterOnDOMEvent,this);O.unsubscribe(this.doCenterOnDOMEvent,this);}},configHeight:function(R,P,S){var O=P[0],Q=this.element;F.setStyle(Q,"height",O);this.cfg.refireEvent("iframe");},configAutoFillHeight:function(T,S,P){var V=S[0],Q=this.cfg,U="autofillheight",W="height",R=Q.getProperty(U),O=this._autoFillOnHeightChange;Q.unsubscribeFromConfigEvent(W,O);G.textResizeEvent.unsubscribe(O);this.changeContentEvent.unsubscribe(O);if(R&&V!==R&&this[R]){F.setStyle(this[R],W,"");}if(V){V=I.trim(V.toLowerCase());Q.subscribeToConfigEvent(W,O,this[V],this);G.textResizeEvent.subscribe(O,this[V],this);this.changeContentEvent.subscribe(O,this[V],this);Q.setProperty(U,V,true);}},configWidth:function(R,O,S){var Q=O[0],P=this.element;F.setStyle(P,"width",Q);this.cfg.refireEvent("iframe");},configzIndex:function(Q,O,R){var S=O[0],P=this.element;if(!S){S=F.getStyle(P,"zIndex");if(!S||isNaN(S)){S=0;}}if(this.iframe||this.cfg.getProperty("iframe")===true){if(S<=0){S=1;}}F.setStyle(P,"zIndex",S);this.cfg.setProperty("zIndex",S,true);if(this.iframe){this.stackIframe();}},configXY:function(Q,P,R){var T=P[0],O=T[0],S=T[1];this.cfg.setProperty("x",O);this.cfg.setProperty("y",S);this.beforeMoveEvent.fire([O,S]);O=this.cfg.getProperty("x");S=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([O,S]);},configX:function(Q,P,R){var O=P[0],S=this.cfg.getProperty("y");this.cfg.setProperty("x",O,true);this.cfg.setProperty("y",S,true);this.beforeMoveEvent.fire([O,S]);O=this.cfg.getProperty("x");S=this.cfg.getProperty("y");F.setX(this.element,O,true);this.cfg.setProperty("xy",[O,S],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([O,S]);},configY:function(Q,P,R){var O=this.cfg.getProperty("x"),S=P[0];this.cfg.setProperty("x",O,true);this.cfg.setProperty("y",S,true);this.beforeMoveEvent.fire([O,S]);O=this.cfg.getProperty("x");S=this.cfg.getProperty("y");F.setY(this.element,S,true);this.cfg.setProperty("xy",[O,S],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([O,S]);},showIframe:function(){var P=this.iframe,O;if(P){O=this.element.parentNode;if(O!=P.parentNode){this._addToParent(O,P);}P.style.display="block";}},hideIframe:function(){if(this.iframe){this.iframe.style.display="none";}},syncIframe:function(){var O=this.iframe,Q=this.element,S=B.IFRAME_OFFSET,P=(S*2),R;if(O){O.style.width=(Q.offsetWidth+P+"px");O.style.height=(Q.offsetHeight+P+"px");R=this.cfg.getProperty("xy");if(!I.isArray(R)||(isNaN(R[0])||isNaN(R[1]))){this.syncPosition();R=this.cfg.getProperty("xy");}F.setXY(O,[(R[0]-S),(R[1]-S)]);}},stackIframe:function(){if(this.iframe){var O=F.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(O)&&!isNaN(O)){F.setStyle(this.iframe,"zIndex",(O-1));}}},configIframe:function(R,Q,S){var O=Q[0];function T(){var V=this.iframe,W=this.element,X;if(!V){if(!J){J=document.createElement("iframe");if(this.isSecure){J.src=B.IFRAME_SRC;}if(K.ie){J.style.filter="alpha(opacity=0)";J.frameBorder=0;}else{J.style.opacity="0";}J.style.position="absolute";J.style.border="none";J.style.margin="0";J.style.padding="0";J.style.display="none";J.tabIndex=-1;J.className=B.CSS_IFRAME;}V=J.cloneNode(false);V.id=this.id+"_f";X=W.parentNode;var U=X||document.body;this._addToParent(U,V);this.iframe=V;}this.showIframe();this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true;}}function P(){T.call(this);this.beforeShowEvent.unsubscribe(P);this._iframeDeferred=false;}if(O){if(this.cfg.getProperty("visible")){T.call(this);}else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(P);this._iframeDeferred=true;}}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false;}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);}},configConstrainToViewport:function(P,O,Q){var R=O[0];if(R){if(!D.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);}if(!D.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM)){this.beforeShowEvent.subscribe(this._primeXYFromDOM);}}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this);}},configContext:function(U,T,Q){var X=T[0],R,O,V,S,P,W=this.CONTEXT_TRIGGERS;if(X){R=X[0];O=X[1];V=X[2];S=X[3];P=X[4];if(W&&W.length>0){S=(S||[]).concat(W);}if(R){if(typeof R=="string"){this.cfg.setProperty("context",[document.getElementById(R),O,V,S,P],true);}if(O&&V){this.align(O,V,P);}if(this._contextTriggers){this._processTriggers(this._contextTriggers,E,this._alignOnTrigger);}if(S){this._processTriggers(S,H,this._alignOnTrigger);this._contextTriggers=S;}}}},_alignOnTrigger:function(P,O){this.align();},_findTriggerCE:function(O){var P=null;if(O instanceof M){P=O;}else{if(B._TRIGGER_MAP[O]){P=B._TRIGGER_MAP[O];}}return P;},_processTriggers:function(S,U,R){var Q,T;for(var P=0,O=S.length;P<O;++P){Q=S[P];T=this._findTriggerCE(Q);if(T){T[U](R,this,true);}else{this[U](Q,R);}}},align:function(P,W,S){var V=this.cfg.getProperty("context"),T=this,O,Q,U;function R(Z,a){var Y=null,X=null;switch(P){case B.TOP_LEFT:Y=a;X=Z;break;case B.TOP_RIGHT:Y=a-Q.offsetWidth;X=Z;break;case B.BOTTOM_LEFT:Y=a;X=Z-Q.offsetHeight;break;case B.BOTTOM_RIGHT:Y=a-Q.offsetWidth;X=Z-Q.offsetHeight;break;}if(Y!==null&&X!==null){if(S){Y+=S[0];X+=S[1];}T.moveTo(Y,X);}}if(V){O=V[0];Q=this.element;T=this;if(!P){P=V[1];}if(!W){W=V[2];}if(!S&&V[4]){S=V[4];}if(Q&&O){U=F.getRegion(O);switch(W){case B.TOP_LEFT:R(U.top,U.left);break;case B.TOP_RIGHT:R(U.top,U.right);break;case B.BOTTOM_LEFT:R(U.bottom,U.left);break;case B.BOTTOM_RIGHT:R(U.bottom,U.right);break;}}}},enforceConstraints:function(P,O,Q){var S=O[0];var R=this.getConstrainedXY(S[0],S[1]);this.cfg.setProperty("x",R[0],true);this.cfg.setProperty("y",R[1],true);this.cfg.setProperty("xy",R,true);},_getConstrainedPos:function(X,P){var T=this.element,R=B.VIEWPORT_OFFSET,Z=(X=="x"),Y=(Z)?T.offsetWidth:T.offsetHeight,S=(Z)?F.getViewportWidth():F.getViewportHeight(),c=(Z)?F.getDocumentScrollLeft():F.getDocumentScrollTop(),b=(Z)?B.PREVENT_OVERLAP_X:B.PREVENT_OVERLAP_Y,O=this.cfg.getProperty("context"),U=(Y+R<S),W=this.cfg.getProperty("preventcontextoverlap")&&O&&b[(O[1]+O[2])],V=c+R,a=c+S-Y-R,Q=P;if(P<V||P>a){if(W){Q=this._preventOverlap(X,O[0],Y,S,c);}else{if(U){if(P<V){Q=V;}else{if(P>a){Q=a;}}}else{Q=V;}}}return Q;},_preventOverlap:function(X,W,Y,U,b){var Z=(X=="x"),T=B.VIEWPORT_OFFSET,S=this,Q=((Z)?F.getX(W):F.getY(W))-b,O=(Z)?W.offsetWidth:W.offsetHeight,P=Q-T,R=(U-(Q+O))-T,c=false,V=function(){var d;if((S.cfg.getProperty(X)-b)>Q){d=(Q-Y);}else{d=(Q+O);}S.cfg.setProperty(X,(d+b),true);return d;},a=function(){var e=((S.cfg.getProperty(X)-b)>Q)?R:P,d;if(Y>e){if(c){V();}else{V();c=true;d=a();}}return d;};a();return this.cfg.getProperty(X);},getConstrainedX:function(O){return this._getConstrainedPos("x",O);},getConstrainedY:function(O){return this._getConstrainedPos("y",O);},getConstrainedXY:function(O,P){return[this.getConstrainedX(O),this.getConstrainedY(P)];},center:function(){var R=B.VIEWPORT_OFFSET,S=this.element.offsetWidth,Q=this.element.offsetHeight,P=F.getViewportWidth(),T=F.getViewportHeight(),O,U;if(S<P){O=(P/2)-(S/2)+F.getDocumentScrollLeft();}else{O=R+F.getDocumentScrollLeft();}if(Q<T){U=(T/2)-(Q/2)+F.getDocumentScrollTop();}else{U=R+F.getDocumentScrollTop();}this.cfg.setProperty("xy",[parseInt(O,10),parseInt(U,10)]);this.cfg.refireEvent("iframe");if(K.webkit){this.forceContainerRedraw();}},syncPosition:function(){var O=F.getXY(this.element);this.cfg.setProperty("x",O[0],true);this.cfg.setProperty("y",O[1],true);this.cfg.setProperty("xy",O,true);},onDomResize:function(Q,P){var O=this;B.superclass.onDomResize.call(this,Q,P);setTimeout(function(){O.syncPosition();O.cfg.refireEvent("iframe");O.cfg.refireEvent("context");},0);},_getComputedHeight:(function(){if(document.defaultView&&document.defaultView.getComputedStyle){return function(P){var O=null;if(P.ownerDocument&&P.ownerDocument.defaultView){var Q=P.ownerDocument.defaultView.getComputedStyle(P,"");if(Q){O=parseInt(Q.height,10);}}return(I.isNumber(O))?O:null;};}else{return function(P){var O=null;if(P.style.pixelHeight){O=P.style.pixelHeight;}return(I.isNumber(O))?O:null;};}})(),_validateAutoFillHeight:function(O){return(!O)||(I.isString(O)&&B.STD_MOD_RE.test(O));},_autoFillOnHeightChange:function(R,P,Q){var O=this.cfg.getProperty("height");if((O&&O!=="auto")||(O===0)){this.fillHeight(Q);}},_getPreciseHeight:function(P){var O=P.offsetHeight;if(P.getBoundingClientRect){var Q=P.getBoundingClientRect();O=Q.bottom-Q.top;}return O;},fillHeight:function(R){if(R){var P=this.innerElement||this.element,O=[this.header,this.body,this.footer],V,W=0,X=0,T=0,Q=false;for(var U=0,S=O.length;U<S;U++){V=O[U];if(V){if(R!==V){X+=this._getPreciseHeight(V);}else{Q=true;}}}if(Q){if(K.ie||K.opera){F.setStyle(R,"height",0+"px");}W=this._getComputedHeight(P);if(W===null){F.addClass(P,"yui-override-padding");W=P.clientHeight;F.removeClass(P,"yui-override-padding");}T=Math.max(W-X,0);F.setStyle(R,"height",T+"px");if(R.offsetHeight!=T){T=Math.max(T-(R.offsetHeight-T),0);}F.setStyle(R,"height",T+"px");}}},bringToTop:function(){var S=[],R=this.element;function V(Z,Y){var b=F.getStyle(Z,"zIndex"),a=F.getStyle(Y,"zIndex"),X=(!b||isNaN(b))?0:parseInt(b,10),W=(!a||isNaN(a))?0:parseInt(a,10);if(X>W){return-1;}else{if(X<W){return 1;}else{return 0;}}}function Q(Y){var X=F.hasClass(Y,B.CSS_OVERLAY),W=YAHOO.widget.Panel;if(X&&!F.isAncestor(R,Y)){if(W&&F.hasClass(Y,W.CSS_PANEL)){S[S.length]=Y.parentNode;}else{S[S.length]=Y;}}}F.getElementsBy(Q,"DIV",document.body);S.sort(V);var O=S[0],U;if(O){U=F.getStyle(O,"zIndex");if(!isNaN(U)){var T=false;if(O!=R){T=true;}else{if(S.length>1){var P=F.getStyle(S[1],"zIndex");if(!isNaN(P)&&(U==P)){T=true;}}}if(T){this.cfg.setProperty("zindex",(parseInt(U,10)+2));}}}},destroy:function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);}this.iframe=null;B.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);B.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);G.textResizeEvent.unsubscribe(this._autoFillOnHeightChange);if(this._contextTriggers){this._processTriggers(this._contextTriggers,E,this._alignOnTrigger);}B.superclass.destroy.call(this);},forceContainerRedraw:function(){var O=this;F.addClass(O.element,"yui-force-redraw");setTimeout(function(){F.removeClass(O.element,"yui-force-redraw");},0);},toString:function(){return"Overlay "+this.id;}});}());(function(){YAHOO.widget.OverlayManager=function(G){this.init(G);};var D=YAHOO.widget.Overlay,C=YAHOO.util.Event,E=YAHOO.util.Dom,B=YAHOO.util.Config,F=YAHOO.util.CustomEvent,A=YAHOO.widget.OverlayManager;A.CSS_FOCUSED="focused";A.prototype={constructor:A,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"});},init:function(I){this.cfg=new B(this);this.initDefaultConfig();if(I){this.cfg.applyConfig(I,true);}this.cfg.fireQueue();var H=null;this.getActive=function(){return H;};this.focus=function(J){var K=this.find(J);if(K){K.focus();}};this.remove=function(K){var M=this.find(K),J;if(M){if(H==M){H=null;}var L=(M.element===null&&M.cfg===null)?true:false;if(!L){J=E.getStyle(M.element,"zIndex");M.cfg.setProperty("zIndex",-1000,true);}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,(this.overlays.length-1));M.hideEvent.unsubscribe(M.blur);M.destroyEvent.unsubscribe(this._onOverlayDestroy,M);M.focusEvent.unsubscribe(this._onOverlayFocusHandler,M);M.blurEvent.unsubscribe(this._onOverlayBlurHandler,M);if(!L){C.removeListener(M.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);M.cfg.setProperty("zIndex",J,true);M.cfg.setProperty("manager",null);}if(M.focusEvent._managed){M.focusEvent=null;}if(M.blurEvent._managed){M.blurEvent=null;}if(M.focus._managed){M.focus=null;}if(M.blur._managed){M.blur=null;}}};this.blurAll=function(){var K=this.overlays.length,J;if(K>0){J=K-1;do{this.overlays[J].blur();}while(J--);}};this._manageBlur=function(J){var K=false;if(H==J){E.removeClass(H.element,A.CSS_FOCUSED);H=null;K=true;}return K;};this._manageFocus=function(J){var K=false;if(H!=J){if(H){H.blur();}H=J;this.bringToTop(H);E.addClass(H.element,A.CSS_FOCUSED);K=true;}return K;};var G=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[];}if(G){this.register(G);this.overlays.sort(this.compareZIndexDesc);}},_onOverlayElementFocus:function(I){var G=C.getTarget(I),H=this.close;if(H&&(G==H||E.isAncestor(H,G))){this.blur();}else{this.focus();}},_onOverlayDestroy:function(H,G,I){this.remove(I);},_onOverlayFocusHandler:function(H,G,I){this._manageFocus(I);},_onOverlayBlurHandler:function(H,G,I){this._manageBlur(I);},_bindFocus:function(G){var H=this;if(!G.focusEvent){G.focusEvent=G.createEvent("focus");G.focusEvent.signature=F.LIST;G.focusEvent._managed=true;}else{G.focusEvent.subscribe(H._onOverlayFocusHandler,G,H);}if(!G.focus){C.on(G.element,H.cfg.getProperty("focusevent"),H._onOverlayElementFocus,null,G);G.focus=function(){if(H._manageFocus(this)){if(this.cfg.getProperty("visible")&&this.focusFirst){this.focusFirst();}this.focusEvent.fire();}};G.focus._managed=true;}},_bindBlur:function(G){var H=this;if(!G.blurEvent){G.blurEvent=G.createEvent("blur");G.blurEvent.signature=F.LIST;G.focusEvent._managed=true;}else{G.blurEvent.subscribe(H._onOverlayBlurHandler,G,H);}if(!G.blur){G.blur=function(){if(H._manageBlur(this)){this.blurEvent.fire();}};G.blur._managed=true;}G.hideEvent.subscribe(G.blur);},_bindDestroy:function(G){var H=this;G.destroyEvent.subscribe(H._onOverlayDestroy,G,H);},_syncZIndex:function(G){var H=E.getStyle(G.element,"zIndex");if(!isNaN(H)){G.cfg.setProperty("zIndex",parseInt(H,10));}else{G.cfg.setProperty("zIndex",0);}},register:function(G){var J=false,H,I;if(G instanceof D){G.cfg.addProperty("manager",{value:this});this._bindFocus(G);this._bindBlur(G);this._bindDestroy(G);this._syncZIndex(G);this.overlays.push(G);this.bringToTop(G);J=true;}else{if(G instanceof Array){for(H=0,I=G.length;H<I;H++){J=this.register(G[H])||J;}}}return J;},bringToTop:function(M){var I=this.find(M),L,G,J;if(I){J=this.overlays;J.sort(this.compareZIndexDesc);G=J[0];if(G){L=E.getStyle(G.element,"zIndex");if(!isNaN(L)){var K=false;if(G!==I){K=true;}else{if(J.length>1){var H=E.getStyle(J[1].element,"zIndex");if(!isNaN(H)&&(L==H)){K=true;}}}if(K){I.cfg.setProperty("zindex",(parseInt(L,10)+2));}}J.sort(this.compareZIndexDesc);}}},find:function(G){var K=G instanceof D,I=this.overlays,M=I.length,J=null,L,H;if(K||typeof G=="string"){for(H=M-1;H>=0;H--){L=I[H];if((K&&(L===G))||(L.id==G)){J=L;break;}}}return J;},compareZIndexDesc:function(J,I){var H=(J.cfg)?J.cfg.getProperty("zIndex"):null,G=(I.cfg)?I.cfg.getProperty("zIndex"):null;if(H===null&&G===null){return 0;}else{if(H===null){return 1;}else{if(G===null){return-1;}else{if(H>G){return-1;}else{if(H<G){return 1;}else{return 0;}}}}}},showAll:function(){var H=this.overlays,I=H.length,G;for(G=I-1;G>=0;G--){H[G].show();}},hideAll:function(){var H=this.overlays,I=H.length,G;for(G=I-1;G>=0;G--){H[G].hide();}},toString:function(){return"OverlayManager";}};}());(function(){YAHOO.widget.Tooltip=function(P,O){YAHOO.widget.Tooltip.superclass.constructor.call(this,P,O);};var E=YAHOO.lang,N=YAHOO.util.Event,M=YAHOO.util.CustomEvent,C=YAHOO.util.Dom,J=YAHOO.widget.Tooltip,H=YAHOO.env.ua,G=(H.ie&&(H.ie<=6||document.compatMode=="BackCompat")),F,I={"PREVENT_OVERLAP":{key:"preventoverlap",value:true,validator:E.isBoolean,supercedes:["x","y","xy"]},"SHOW_DELAY":{key:"showdelay",value:200,validator:E.isNumber},"AUTO_DISMISS_DELAY":{key:"autodismissdelay",value:5000,validator:E.isNumber},"HIDE_DELAY":{key:"hidedelay",value:250,validator:E.isNumber},"TEXT":{key:"text",suppressEvent:true},"CONTAINER":{key:"container"},"DISABLED":{key:"disabled",value:false,suppressEvent:true},"XY_OFFSET":{key:"xyoffset",value:[0,25],suppressEvent:true}},A={"CONTEXT_MOUSE_OVER":"contextMouseOver","CONTEXT_MOUSE_OUT":"contextMouseOut","CONTEXT_TRIGGER":"contextTrigger"};J.CSS_TOOLTIP="yui-tt";function K(Q,O){var P=this.cfg,R=P.getProperty("width");if(R==O){P.setProperty("width",Q);}}function D(P,O){if("_originalWidth"in this){K.call(this,this._originalWidth,this._forcedWidth);}var Q=document.body,U=this.cfg,T=U.getProperty("width"),R,S;if((!T||T=="auto")&&(U.getProperty("container")!=Q||U.getProperty("x")>=C.getViewportWidth()||U.getProperty("y")>=C.getViewportHeight())){S=this.element.cloneNode(true);S.style.visibility="hidden";S.style.top="0px";S.style.left="0px";Q.appendChild(S);R=(S.offsetWidth+"px");Q.removeChild(S);S=null;U.setProperty("width",R);U.refireEvent("xy");this._originalWidth=T||"";this._forcedWidth=R;}}function B(P,O,Q){this.render(Q);}function L(){N.onDOMReady(B,this.cfg.getProperty("container"),this);}YAHOO.extend(J,YAHOO.widget.Overlay,{init:function(P,O){J.superclass.init.call(this,P);this.beforeInitEvent.fire(J);C.addClass(this.element,J.CSS_TOOLTIP);if(O){this.cfg.applyConfig(O,true);}this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.subscribe("changeContent",D);this.subscribe("init",L);this.subscribe("render",this.onRender);this.initEvent.fire(J);},initEvents:function(){J.superclass.initEvents.call(this);var O=M.LIST;this.contextMouseOverEvent=this.createEvent(A.CONTEXT_MOUSE_OVER);this.contextMouseOverEvent.signature=O;this.contextMouseOutEvent=this.createEvent(A.CONTEXT_MOUSE_OUT);this.contextMouseOutEvent.signature=O;this.contextTriggerEvent=this.createEvent(A.CONTEXT_TRIGGER);this.contextTriggerEvent.signature=O;},initDefaultConfig:function(){J.superclass.initDefaultConfig.call(this);this.cfg.addProperty(I.PREVENT_OVERLAP.key,{value:I.PREVENT_OVERLAP.value,validator:I.PREVENT_OVERLAP.validator,supercedes:I.PREVENT_OVERLAP.supercedes});this.cfg.addProperty(I.SHOW_DELAY.key,{handler:this.configShowDelay,value:200,validator:I.SHOW_DELAY.validator});this.cfg.addProperty(I.AUTO_DISMISS_DELAY.key,{handler:this.configAutoDismissDelay,value:I.AUTO_DISMISS_DELAY.value,validator:I.AUTO_DISMISS_DELAY.validator});this.cfg.addProperty(I.HIDE_DELAY.key,{handler:this.configHideDelay,value:I.HIDE_DELAY.value,validator:I.HIDE_DELAY.validator});this.cfg.addProperty(I.TEXT.key,{handler:this.configText,suppressEvent:I.TEXT.suppressEvent});this.cfg.addProperty(I.CONTAINER.key,{handler:this.configContainer,value:document.body});this.cfg.addProperty(I.DISABLED.key,{handler:this.configContainer,value:I.DISABLED.value,supressEvent:I.DISABLED.suppressEvent});this.cfg.addProperty(I.XY_OFFSET.key,{value:I.XY_OFFSET.value.concat(),supressEvent:I.XY_OFFSET.suppressEvent});},configText:function(P,O,Q){var R=O[0];if(R){this.setBody(R);}},configContainer:function(Q,P,R){var O=P[0];if(typeof O=="string"){this.cfg.setProperty("container",document.getElementById(O),true);}},_removeEventListeners:function(){var R=this._context,O,Q,P;if(R){O=R.length;if(O>0){P=O-1;do{Q=R[P];N.removeListener(Q,"mouseover",this.onContextMouseOver);N.removeListener(Q,"mousemove",this.onContextMouseMove);N.removeListener(Q,"mouseout",this.onContextMouseOut);}while(P--);}}},configContext:function(T,P,U){var S=P[0],V,O,R,Q;if(S){if(!(S instanceof Array)){if(typeof S=="string"){this.cfg.setProperty("context",[document.getElementById(S)],true);}else{this.cfg.setProperty("context",[S],true);}S=this.cfg.getProperty("context");}this._removeEventListeners();this._context=S;V=this._context;if(V){O=V.length;if(O>0){Q=O-1;do{R=V[Q];N.on(R,"mouseover",this.onContextMouseOver,this);N.on(R,"mousemove",this.onContextMouseMove,this);N.on(R,"mouseout",this.onContextMouseOut,this);}while(Q--);}}}},onContextMouseMove:function(P,O){O.pageX=N.getPageX(P);O.pageY=N.getPageY(P);},onContextMouseOver:function(Q,P){var O=this;if(O.title){P._tempTitle=O.title;O.title="";}if(P.fireEvent("contextMouseOver",O,Q)!==false&&!P.cfg.getProperty("disabled")){if(P.hideProcId){clearTimeout(P.hideProcId);P.hideProcId=null;}N.on(O,"mousemove",P.onContextMouseMove,P);P.showProcId=P.doShow(Q,O);}},onContextMouseOut:function(Q,P){var O=this;if(P._tempTitle){O.title=P._tempTitle;P._tempTitle=null;}if(P.showProcId){clearTimeout(P.showProcId);P.showProcId=null;}if(P.hideProcId){clearTimeout(P.hideProcId);P.hideProcId=null;}P.fireEvent("contextMouseOut",O,Q);P.hideProcId=setTimeout(function(){P.hide();},P.cfg.getProperty("hidedelay"));},doShow:function(R,O){var T=this.cfg.getProperty("xyoffset"),P=T[0],S=T[1],Q=this;if(H.opera&&O.tagName&&O.tagName.toUpperCase()=="A"){S+=12;}return setTimeout(function(){var U=Q.cfg.getProperty("text");if(Q._tempTitle&&(U===""||YAHOO.lang.isUndefined(U)||YAHOO.lang.isNull(U))){Q.setBody(Q._tempTitle);}else{Q.cfg.refireEvent("text");}Q.moveTo(Q.pageX+P,Q.pageY+S);if(Q.cfg.getProperty("preventoverlap")){Q.preventOverlap(Q.pageX,Q.pageY);}N.removeListener(O,"mousemove",Q.onContextMouseMove);Q.contextTriggerEvent.fire(O);Q.show();Q.hideProcId=Q.doHide();},this.cfg.getProperty("showdelay"));},doHide:function(){var O=this;return setTimeout(function(){O.hide();},this.cfg.getProperty("autodismissdelay"));},preventOverlap:function(S,R){var O=this.element.offsetHeight,Q=new YAHOO.util.Point(S,R),P=C.getRegion(this.element);P.top-=5;P.left-=5;P.right+=5;P.bottom+=5;if(P.contains(Q)){this.cfg.setProperty("y",(R-O-5));}},onRender:function(S,R){function T(){var W=this.element,V=this.underlay;if(V){V.style.width=(W.offsetWidth+6)+"px";V.style.height=(W.offsetHeight+1)+"px";}}function P(){C.addClass(this.underlay,"yui-tt-shadow-visible");if(H.ie){this.forceUnderlayRedraw();}}function O(){C.removeClass(this.underlay,"yui-tt-shadow-visible");}function U(){var X=this.underlay,W,V,Z,Y;if(!X){W=this.element;V=YAHOO.widget.Module;Z=H.ie;Y=this;if(!F){F=document.createElement("div");F.className="yui-tt-shadow";}X=F.cloneNode(false);W.appendChild(X);this.underlay=X;this._shadow=this.underlay;P.call(this);this.subscribe("beforeShow",P);this.subscribe("hide",O);if(G){window.setTimeout(function(){T.call(Y);},0);this.cfg.subscribeToConfigEvent("width",T);this.cfg.subscribeToConfigEvent("height",T);this.subscribe("changeContent",T);V.textResizeEvent.subscribe(T,this,true);this.subscribe("destroy",function(){V.textResizeEvent.unsubscribe(T,this);});}}}function Q(){U.call(this);this.unsubscribe("beforeShow",Q);}if(this.cfg.getProperty("visible")){U.call(this);}else{this.subscribe("beforeShow",Q);}},forceUnderlayRedraw:function(){var O=this;C.addClass(O.underlay,"yui-force-redraw");setTimeout(function(){C.removeClass(O.underlay,"yui-force-redraw");},0);},destroy:function(){this._removeEventListeners();J.superclass.destroy.call(this);},toString:function(){return"Tooltip "+this.id;}});}());(function(){YAHOO.widget.Panel=function(V,U){YAHOO.widget.Panel.superclass.constructor.call(this,V,U);};var S=null;var E=YAHOO.lang,F=YAHOO.util,A=F.Dom,T=F.Event,M=F.CustomEvent,K=YAHOO.util.KeyListener,I=F.Config,H=YAHOO.widget.Overlay,O=YAHOO.widget.Panel,L=YAHOO.env.ua,P=(L.ie&&(L.ie<=6||document.compatMode=="BackCompat")),G,Q,C,D={"SHOW_MASK":"showMask","HIDE_MASK":"hideMask","DRAG":"drag"},N={"CLOSE":{key:"close",value:true,validator:E.isBoolean,supercedes:["visible"]},"DRAGGABLE":{key:"draggable",value:(F.DD?true:false),validator:E.isBoolean,supercedes:["visible"]},"DRAG_ONLY":{key:"dragonly",value:false,validator:E.isBoolean,supercedes:["draggable"]},"UNDERLAY":{key:"underlay",value:"shadow",supercedes:["visible"]},"MODAL":{key:"modal",value:false,validator:E.isBoolean,supercedes:["visible","zindex"]},"KEY_LISTENERS":{key:"keylisteners",suppressEvent:true,supercedes:["visible"]},"STRINGS":{key:"strings",supercedes:["close"],validator:E.isObject,value:{close:"Close"}}};O.CSS_PANEL="yui-panel";O.CSS_PANEL_CONTAINER="yui-panel-container";O.FOCUSABLE=["a","button","select","textarea","input","iframe"];function J(V,U){if(!this.header&&this.cfg.getProperty("draggable")){this.setHeader("&#160;");}}function R(V,U,W){var Z=W[0],X=W[1],Y=this.cfg,a=Y.getProperty("width");if(a==X){Y.setProperty("width",Z);}this.unsubscribe("hide",R,W);}function B(V,U){var Y,X,W;if(P){Y=this.cfg;X=Y.getProperty("width");if(!X||X=="auto"){W=(this.element.offsetWidth+"px");Y.setProperty("width",W);this.subscribe("hide",R,[(X||""),W]);}}}YAHOO.extend(O,H,{init:function(V,U){O.superclass.init.call(this,V);this.beforeInitEvent.fire(O);A.addClass(this.element,O.CSS_PANEL);this.buildWrapper();if(U){this.cfg.applyConfig(U,true);}this.subscribe("showMask",this._addFocusHandlers);this.subscribe("hideMask",this._removeFocusHandlers);this.subscribe("beforeRender",J);this.subscribe("render",function(){this.setFirstLastFocusable();this.subscribe("changeContent",this.setFirstLastFocusable);});this.subscribe("show",this.focusFirst);this.initEvent.fire(O);},_onElementFocus:function(Z){if(S===this){var Y=T.getTarget(Z),X=document.documentElement,V=(Y!==X&&Y!==window);if(V&&Y!==this.element&&Y!==this.mask&&!A.isAncestor(this.element,Y)){try{if(this.firstElement){this.firstElement.focus();}else{if(this._modalFocus){this._modalFocus.focus();}else{this.innerElement.focus();}}}catch(W){try{if(V&&Y!==document.body){Y.blur();}}catch(U){}}}}},_addFocusHandlers:function(V,U){if(!this.firstElement){if(L.webkit||L.opera){if(!this._modalFocus){this._createHiddenFocusElement();}}else{this.innerElement.tabIndex=0;}}this.setTabLoop(this.firstElement,this.lastElement);T.onFocus(document.documentElement,this._onElementFocus,this,true);S=this;},_createHiddenFocusElement:function(){var U=document.createElement("button");U.style.height="1px";U.style.width="1px";U.style.position="absolute";U.style.left="-10000em";U.style.opacity=0;U.tabIndex=-1;this.innerElement.appendChild(U);this._modalFocus=U;},_removeFocusHandlers:function(V,U){T.removeFocusListener(document.documentElement,this._onElementFocus,this);if(S==this){S=null;}},focusFirst:function(W,U,Y){var V=this.firstElement;if(U&&U[1]){T.stopEvent(U[1]);}if(V){try{V.focus();}catch(X){}}},focusLast:function(W,U,Y){var V=this.lastElement;if(U&&U[1]){T.stopEvent(U[1]);}if(V){try{V.focus();}catch(X){}}},setTabLoop:function(X,Z){var V=this.preventBackTab,W=this.preventTabOut,U=this.showEvent,Y=this.hideEvent;if(V){V.disable();U.unsubscribe(V.enable,V);Y.unsubscribe(V.disable,V);V=this.preventBackTab=null;}if(W){W.disable();U.unsubscribe(W.enable,W);Y.unsubscribe(W.disable,W);W=this.preventTabOut=null;}if(X){this.preventBackTab=new K(X,{shift:true,keys:9},{fn:this.focusLast,scope:this,correctScope:true});V=this.preventBackTab;U.subscribe(V.enable,V,true);Y.subscribe(V.disable,V,true);}if(Z){this.preventTabOut=new K(Z,{shift:false,keys:9},{fn:this.focusFirst,scope:this,correctScope:true});W=this.preventTabOut;U.subscribe(W.enable,W,true);Y.subscribe(W.disable,W,true);}},getFocusableElements:function(U){U=U||this.innerElement;var X={};for(var W=0;W<O.FOCUSABLE.length;W++){X[O.FOCUSABLE[W]]=true;}function V(Y){if(Y.focus&&Y.type!=="hidden"&&!Y.disabled&&X[Y.tagName.toLowerCase()]){return true;}return false;}return A.getElementsBy(V,null,U);},setFirstLastFocusable:function(){this.firstElement=null;this.lastElement=null;var U=this.getFocusableElements();this.focusableElements=U;if(U.length>0){this.firstElement=U[0];this.lastElement=U[U.length-1];}if(this.cfg.getProperty("modal")){this.setTabLoop(this.firstElement,this.lastElement);}},initEvents:function(){O.superclass.initEvents.call(this);var U=M.LIST;this.showMaskEvent=this.createEvent(D.SHOW_MASK);this.showMaskEvent.signature=U;this.hideMaskEvent=this.createEvent(D.HIDE_MASK);this.hideMaskEvent.signature=U;this.dragEvent=this.createEvent(D.DRAG);this.dragEvent.signature=U;},initDefaultConfig:function(){O.superclass.initDefaultConfig.call(this);this.cfg.addProperty(N.CLOSE.key,{handler:this.configClose,value:N.CLOSE.value,validator:N.CLOSE.validator,supercedes:N.CLOSE.supercedes});this.cfg.addProperty(N.DRAGGABLE.key,{handler:this.configDraggable,value:(F.DD)?true:false,validator:N.DRAGGABLE.validator,supercedes:N.DRAGGABLE.supercedes});this.cfg.addProperty(N.DRAG_ONLY.key,{value:N.DRAG_ONLY.value,validator:N.DRAG_ONLY.validator,supercedes:N.DRAG_ONLY.supercedes});this.cfg.addProperty(N.UNDERLAY.key,{handler:this.configUnderlay,value:N.UNDERLAY.value,supercedes:N.UNDERLAY.supercedes});this.cfg.addProperty(N.MODAL.key,{handler:this.configModal,value:N.MODAL.value,validator:N.MODAL.validator,supercedes:N.MODAL.supercedes});this.cfg.addProperty(N.KEY_LISTENERS.key,{handler:this.configKeyListeners,suppressEvent:N.KEY_LISTENERS.suppressEvent,supercedes:N.KEY_LISTENERS.supercedes});this.cfg.addProperty(N.STRINGS.key,{value:N.STRINGS.value,handler:this.configStrings,validator:N.STRINGS.validator,supercedes:N.STRINGS.supercedes});},configClose:function(X,V,Y){var Z=V[0],W=this.close,U=this.cfg.getProperty("strings");if(Z){if(!W){if(!C){C=document.createElement("a");C.className="container-close";C.href="#";}W=C.cloneNode(true);this.innerElement.appendChild(W);W.innerHTML=(U&&U.close)?U.close:"&#160;";T.on(W,"click",this._doClose,this,true);this.close=W;}else{W.style.display="block";}}else{if(W){W.style.display="none";}}},_doClose:function(U){T.preventDefault(U);this.hide();},configDraggable:function(V,U,W){var X=U[0];if(X){if(!F.DD){this.cfg.setProperty("draggable",false);return;}if(this.header){A.setStyle(this.header,"cursor","move");this.registerDragDrop();}this.subscribe("beforeShow",B);}else{if(this.dd){this.dd.unreg();}if(this.header){A.setStyle(this.header,"cursor","auto");}this.unsubscribe("beforeShow",B);}},configUnderlay:function(d,c,Z){var b=(this.platform=="mac"&&L.gecko),e=c[0].toLowerCase(),V=this.underlay,W=this.element;function X(){var f=false;if(!V){if(!Q){Q=document.createElement("div");Q.className="underlay";}V=Q.cloneNode(false);this.element.appendChild(V);this.underlay=V;if(P){this.sizeUnderlay();this.cfg.subscribeToConfigEvent("width",this.sizeUnderlay);this.cfg.subscribeToConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.subscribe(this.sizeUnderlay);YAHOO.widget.Module.textResizeEvent.subscribe(this.sizeUnderlay,this,true);}if(L.webkit&&L.webkit<420){this.changeContentEvent.subscribe(this.forceUnderlayRedraw);}f=true;}}function a(){var f=X.call(this);if(!f&&P){this.sizeUnderlay();}this._underlayDeferred=false;this.beforeShowEvent.unsubscribe(a);}function Y(){if(this._underlayDeferred){this.beforeShowEvent.unsubscribe(a);this._underlayDeferred=false;}if(V){this.cfg.unsubscribeFromConfigEvent("width",this.sizeUnderlay);this.cfg.unsubscribeFromConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.forceUnderlayRedraw);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.sizeUnderlay,this,true);this.element.removeChild(V);this.underlay=null;}}switch(e){case"shadow":A.removeClass(W,"matte");A.addClass(W,"shadow");break;case"matte":if(!b){Y.call(this);}A.removeClass(W,"shadow");A.addClass(W,"matte");break;default:if(!b){Y.call(this);}A.removeClass(W,"shadow");A.removeClass(W,"matte");break;}if((e=="shadow")||(b&&!V)){if(this.cfg.getProperty("visible")){var U=X.call(this);if(!U&&P){this.sizeUnderlay();}}else{if(!this._underlayDeferred){this.beforeShowEvent.subscribe(a);this._underlayDeferred=true;}}}},configModal:function(V,U,X){var W=U[0];if(W){if(!this._hasModalityEventListeners){this.subscribe("beforeShow",this.buildMask);this.subscribe("beforeShow",this.bringToTop);this.subscribe("beforeShow",this.showMask);this.subscribe("hide",this.hideMask);H.windowResizeEvent.subscribe(this.sizeMask,this,true);this._hasModalityEventListeners=true;}}else{if(this._hasModalityEventListeners){if(this.cfg.getProperty("visible")){this.hideMask();this.removeMask();}this.unsubscribe("beforeShow",this.buildMask);this.unsubscribe("beforeShow",this.bringToTop);this.unsubscribe("beforeShow",this.showMask);this.unsubscribe("hide",this.hideMask);H.windowResizeEvent.unsubscribe(this.sizeMask,this);this._hasModalityEventListeners=false;}}},removeMask:function(){var V=this.mask,U;if(V){this.hideMask();U=V.parentNode;if(U){U.removeChild(V);}this.mask=null;}},configKeyListeners:function(X,U,a){var W=U[0],Z,Y,V;if(W){if(W instanceof Array){Y=W.length;for(V=0;V<Y;V++){Z=W[V];if(!I.alreadySubscribed(this.showEvent,Z.enable,Z)){this.showEvent.subscribe(Z.enable,Z,true);}if(!I.alreadySubscribed(this.hideEvent,Z.disable,Z)){this.hideEvent.subscribe(Z.disable,Z,true);this.destroyEvent.subscribe(Z.disable,Z,true);}}}else{if(!I.alreadySubscribed(this.showEvent,W.enable,W)){this.showEvent.subscribe(W.enable,W,true);}if(!I.alreadySubscribed(this.hideEvent,W.disable,W)){this.hideEvent.subscribe(W.disable,W,true);this.destroyEvent.subscribe(W.disable,W,true);}}}},configStrings:function(V,U,W){var X=E.merge(N.STRINGS.value,U[0]);this.cfg.setProperty(N.STRINGS.key,X,true);},configHeight:function(X,V,Y){var U=V[0],W=this.innerElement;A.setStyle(W,"height",U);this.cfg.refireEvent("iframe");},_autoFillOnHeightChange:function(X,V,W){O.superclass._autoFillOnHeightChange.apply(this,arguments);if(P){var U=this;setTimeout(function(){U.sizeUnderlay();},0);}},configWidth:function(X,U,Y){var W=U[0],V=this.innerElement;A.setStyle(V,"width",W);this.cfg.refireEvent("iframe");},configzIndex:function(V,U,X){O.superclass.configzIndex.call(this,V,U,X);if(this.mask||this.cfg.getProperty("modal")===true){var W=A.getStyle(this.element,"zIndex");if(!W||isNaN(W)){W=0;}if(W===0){this.cfg.setProperty("zIndex",1);}else{this.stackMask();}}},buildWrapper:function(){var W=this.element.parentNode,U=this.element,V=document.createElement("div");V.className=O.CSS_PANEL_CONTAINER;V.id=U.id+"_c";if(W){W.insertBefore(V,U);}V.appendChild(U);this.element=V;this.innerElement=U;A.setStyle(this.innerElement,"visibility","inherit");},sizeUnderlay:function(){var V=this.underlay,U;if(V){U=this.element;V.style.width=U.offsetWidth+"px";V.style.height=U.offsetHeight+"px";}},registerDragDrop:function(){var V=this;if(this.header){if(!F.DD){return;}var U=(this.cfg.getProperty("dragonly")===true);this.dd=new F.DD(this.element.id,this.id,{dragOnly:U});if(!this.header.id){this.header.id=this.id+"_h";}this.dd.startDrag=function(){var X,Z,W,c,b,a;if(YAHOO.env.ua.ie==6){A.addClass(V.element,"drag");}if(V.cfg.getProperty("constraintoviewport")){var Y=H.VIEWPORT_OFFSET;X=V.element.offsetHeight;Z=V.element.offsetWidth;W=A.getViewportWidth();c=A.getViewportHeight();b=A.getDocumentScrollLeft();a=A.getDocumentScrollTop();if(X+Y<c){this.minY=a+Y;this.maxY=a+c-X-Y;}else{this.minY=a+Y;this.maxY=a+Y;}if(Z+Y<W){this.minX=b+Y;this.maxX=b+W-Z-Y;}else{this.minX=b+Y;this.maxX=b+Y;}this.constrainX=true;this.constrainY=true;}else{this.constrainX=false;this.constrainY=false;}V.dragEvent.fire("startDrag",arguments);};this.dd.onDrag=function(){V.syncPosition();V.cfg.refireEvent("iframe");if(this.platform=="mac"&&YAHOO.env.ua.gecko){this.showMacGeckoScrollbars();}V.dragEvent.fire("onDrag",arguments);};this.dd.endDrag=function(){if(YAHOO.env.ua.ie==6){A.removeClass(V.element,"drag");}V.dragEvent.fire("endDrag",arguments);V.moveEvent.fire(V.cfg.getProperty("xy"));};this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA");}},buildMask:function(){var U=this.mask;if(!U){if(!G){G=document.createElement("div");G.className="mask";G.innerHTML="&#160;";}U=G.cloneNode(true);U.id=this.id+"_mask";document.body.insertBefore(U,document.body.firstChild);this.mask=U;if(YAHOO.env.ua.gecko&&this.platform=="mac"){A.addClass(this.mask,"block-scrollbars");}this.stackMask();}},hideMask:function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.style.display="none";A.removeClass(document.body,"masked");this.hideMaskEvent.fire();}},showMask:function(){if(this.cfg.getProperty("modal")&&this.mask){A.addClass(document.body,"masked");this.sizeMask();this.mask.style.display="block";this.showMaskEvent.fire();}},sizeMask:function(){if(this.mask){var V=this.mask,W=A.getViewportWidth(),U=A.getViewportHeight();if(V.offsetHeight>U){V.style.height=U+"px";}if(V.offsetWidth>W){V.style.width=W+"px";}V.style.height=A.getDocumentHeight()+"px";V.style.width=A.getDocumentWidth()+"px";}},stackMask:function(){if(this.mask){var U=A.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(U)&&!isNaN(U)){A.setStyle(this.mask,"zIndex",U-1);}}},render:function(U){return O.superclass.render.call(this,U,this.innerElement);},_renderHeader:function(U){U=U||this.innerElement;O.superclass._renderHeader.call(this,U);},_renderBody:function(U){U=U||this.innerElement;O.superclass._renderBody.call(this,U);},_renderFooter:function(U){U=U||this.innerElement;O.superclass._renderFooter.call(this,U);},destroy:function(){H.windowResizeEvent.unsubscribe(this.sizeMask,this);this.removeMask();if(this.close){T.purgeElement(this.close);}O.superclass.destroy.call(this);},forceUnderlayRedraw:function(){var U=this.underlay;A.addClass(U,"yui-force-redraw");setTimeout(function(){A.removeClass(U,"yui-force-redraw");},0);},toString:function(){return"Panel "+this.id;}});}());(function(){YAHOO.widget.Dialog=function(J,I){YAHOO.widget.Dialog.superclass.constructor.call(this,J,I);};var B=YAHOO.util.Event,G=YAHOO.util.CustomEvent,E=YAHOO.util.Dom,A=YAHOO.widget.Dialog,F=YAHOO.lang,H={"BEFORE_SUBMIT":"beforeSubmit","SUBMIT":"submit","MANUAL_SUBMIT":"manualSubmit","ASYNC_SUBMIT":"asyncSubmit","FORM_SUBMIT":"formSubmit","CANCEL":"cancel"},C={"POST_METHOD":{key:"postmethod",value:"async"},"POST_DATA":{key:"postdata",value:null},"BUTTONS":{key:"buttons",value:"none",supercedes:["visible"]},"HIDEAFTERSUBMIT":{key:"hideaftersubmit",value:true}};A.CSS_DIALOG="yui-dialog";function D(){var L=this._aButtons,J,K,I;if(F.isArray(L)){J=L.length;if(J>0){I=J-1;do{K=L[I];if(YAHOO.widget.Button&&K instanceof YAHOO.widget.Button){K.destroy();}else{if(K.tagName.toUpperCase()=="BUTTON"){B.purgeElement(K);B.purgeElement(K,false);}}}while(I--);}}}YAHOO.extend(A,YAHOO.widget.Panel,{form:null,initDefaultConfig:function(){A.superclass.initDefaultConfig.call(this);this.callback={success:null,failure:null,argument:null};this.cfg.addProperty(C.POST_METHOD.key,{handler:this.configPostMethod,value:C.POST_METHOD.value,validator:function(I){if(I!="form"&&I!="async"&&I!="none"&&I!="manual"){return false;}else{return true;}}});this.cfg.addProperty(C.POST_DATA.key,{value:C.POST_DATA.value});this.cfg.addProperty(C.HIDEAFTERSUBMIT.key,{value:C.HIDEAFTERSUBMIT.value});this.cfg.addProperty(C.BUTTONS.key,{handler:this.configButtons,value:C.BUTTONS.value,supercedes:C.BUTTONS.supercedes});},initEvents:function(){A.superclass.initEvents.call(this);var I=G.LIST;this.beforeSubmitEvent=this.createEvent(H.BEFORE_SUBMIT);this.beforeSubmitEvent.signature=I;this.submitEvent=this.createEvent(H.SUBMIT);this.submitEvent.signature=I;this.manualSubmitEvent=this.createEvent(H.MANUAL_SUBMIT);this.manualSubmitEvent.signature=I;this.asyncSubmitEvent=this.createEvent(H.ASYNC_SUBMIT);this.asyncSubmitEvent.signature=I;this.formSubmitEvent=this.createEvent(H.FORM_SUBMIT);this.formSubmitEvent.signature=I;this.cancelEvent=this.createEvent(H.CANCEL);this.cancelEvent.signature=I;},init:function(J,I){A.superclass.init.call(this,J);this.beforeInitEvent.fire(A);E.addClass(this.element,A.CSS_DIALOG);this.cfg.setProperty("visible",false);if(I){this.cfg.applyConfig(I,true);}this.showEvent.subscribe(this.focusFirst,this,true);this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.subscribe("changeBody",this.registerForm);this.initEvent.fire(A);},doSubmit:function(){var P=YAHOO.util.Connect,Q=this.form,K=false,N=false,R,M,L,I;switch(this.cfg.getProperty("postmethod")){case"async":R=Q.elements;M=R.length;if(M>0){L=M-1;do{if(R[L].type=="file"){K=true;break;}}while(L--);}if(K&&YAHOO.env.ua.ie&&this.isSecure){N=true;}I=this._getFormAttributes(Q);P.setForm(Q,K,N);var J=this.cfg.getProperty("postdata");var O=P.asyncRequest(I.method,I.action,this.callback,J);this.asyncSubmitEvent.fire(O);break;case"form":Q.submit();this.formSubmitEvent.fire();break;case"none":case"manual":this.manualSubmitEvent.fire();break;}},_getFormAttributes:function(K){var I={method:null,action:null};if(K){if(K.getAttributeNode){var J=K.getAttributeNode("action");var L=K.getAttributeNode("method");if(J){I.action=J.value;}if(L){I.method=L.value;}}else{I.action=K.getAttribute("action");I.method=K.getAttribute("method");}}I.method=(F.isString(I.method)?I.method:"POST").toUpperCase();I.action=F.isString(I.action)?I.action:"";return I;},registerForm:function(){var I=this.element.getElementsByTagName("form")[0];if(this.form){if(this.form==I&&E.isAncestor(this.element,this.form)){return;}else{B.purgeElement(this.form);this.form=null;}}if(!I){I=document.createElement("form");I.name="frm_"+this.id;this.body.appendChild(I);}if(I){this.form=I;B.on(I,"submit",this._submitHandler,this,true);}},_submitHandler:function(I){B.stopEvent(I);this.submit();this.form.blur();},setTabLoop:function(I,J){I=I||this.firstButton;J=this.lastButton||J;A.superclass.setTabLoop.call(this,I,J);},setFirstLastFocusable:function(){A.superclass.setFirstLastFocusable.call(this);var J,I,K,L=this.focusableElements;this.firstFormElement=null;this.lastFormElement=null;if(this.form&&L&&L.length>0){I=L.length;for(J=0;J<I;++J){K=L[J];if(this.form===K.form){this.firstFormElement=K;break;}}for(J=I-1;J>=0;--J){K=L[J];if(this.form===K.form){this.lastFormElement=K;break;}}}},configClose:function(J,I,K){A.superclass.configClose.apply(this,arguments);},_doClose:function(I){B.preventDefault(I);this.cancel();},configButtons:function(S,R,M){var N=YAHOO.widget.Button,U=R[0],K=this.innerElement,T,P,J,Q,O,I,L;D.call(this);this._aButtons=null;if(F.isArray(U)){O=document.createElement("span");O.className="button-group";Q=U.length;this._aButtons=[];this.defaultHtmlButton=null;for(L=0;L<Q;L++){T=U[L];if(N){J=new N({label:T.text});J.appendTo(O);P=J.get("element");if(T.isDefault){J.addClass("default");this.defaultHtmlButton=P;}if(F.isFunction(T.handler)){J.set("onclick",{fn:T.handler,obj:this,scope:this});}else{if(F.isObject(T.handler)&&F.isFunction(T.handler.fn)){J.set("onclick",{fn:T.handler.fn,obj:((!F.isUndefined(T.handler.obj))?T.handler.obj:this),scope:(T.handler.scope||this)});}}this._aButtons[this._aButtons.length]=J;}else{P=document.createElement("button");P.setAttribute("type","button");if(T.isDefault){P.className="default";this.defaultHtmlButton=P;}P.innerHTML=T.text;if(F.isFunction(T.handler)){B.on(P,"click",T.handler,this,true);}else{if(F.isObject(T.handler)&&F.isFunction(T.handler.fn)){B.on(P,"click",T.handler.fn,((!F.isUndefined(T.handler.obj))?T.handler.obj:this),(T.handler.scope||this));}}O.appendChild(P);this._aButtons[this._aButtons.length]=P;}T.htmlButton=P;if(L===0){this.firstButton=P;}if(L==(Q-1)){this.lastButton=P;}}this.setFooter(O);I=this.footer;if(E.inDocument(this.element)&&!E.isAncestor(K,I)){K.appendChild(I);}this.buttonSpan=O;}else{O=this.buttonSpan;I=this.footer;if(O&&I){I.removeChild(O);this.buttonSpan=null;this.firstButton=null;this.lastButton=null;this.defaultHtmlButton=null;}}this.changeContentEvent.fire();},getButtons:function(){return this._aButtons||null;},focusFirst:function(K,I,M){var J=this.firstFormElement;if(I&&I[1]){B.stopEvent(I[1]);}if(J){try{J.focus();}catch(L){}}else{if(this.defaultHtmlButton){this.focusDefaultButton();}else{this.focusFirstButton();}}},focusLast:function(K,I,M){var N=this.cfg.getProperty("buttons"),J=this.lastFormElement;if(I&&I[1]){B.stopEvent(I[1]);}if(N&&F.isArray(N)){this.focusLastButton();}else{if(J){try{J.focus();}catch(L){}}}},_getButton:function(J){var I=YAHOO.widget.Button;if(I&&J&&J.nodeName&&J.id){J=I.getButton(J.id)||J;}return J;},focusDefaultButton:function(){var I=this._getButton(this.defaultHtmlButton);if(I){try{I.focus();}catch(J){}}},blurButtons:function(){var N=this.cfg.getProperty("buttons"),K,M,J,I;if(N&&F.isArray(N)){K=N.length;if(K>0){I=(K-1);do{M=N[I];if(M){J=this._getButton(M.htmlButton);if(J){try{J.blur();}catch(L){}}}}while(I--);}}},focusFirstButton:function(){var L=this.cfg.getProperty("buttons"),K,I;if(L&&F.isArray(L)){K=L[0];if(K){I=this._getButton(K.htmlButton);if(I){try{I.focus();}catch(J){}}}}},focusLastButton:function(){var M=this.cfg.getProperty("buttons"),J,L,I;if(M&&F.isArray(M)){J=M.length;if(J>0){L=M[(J-1)];if(L){I=this._getButton(L.htmlButton);if(I){try{I.focus();}catch(K){}}}}}},configPostMethod:function(J,I,K){this.registerForm();},validate:function(){return true;},submit:function(){if(this.validate()){if(this.beforeSubmitEvent.fire()){this.doSubmit();this.submitEvent.fire();if(this.cfg.getProperty("hideaftersubmit")){this.hide();}return true;}else{return false;}}else{return false;}},cancel:function(){this.cancelEvent.fire();this.hide();},getData:function(){var Y=this.form,J,R,U,L,S,P,O,I,V,K,W,Z,N,a,M,X,T;function Q(c){var b=c.tagName.toUpperCase();return((b=="INPUT"||b=="TEXTAREA"||b=="SELECT")&&c.name==L);}if(Y){J=Y.elements;R=J.length;U={};for(X=0;X<R;X++){L=J[X].name;S=E.getElementsBy(Q,"*",Y);P=S.length;if(P>0){if(P==1){S=S[0];O=S.type;I=S.tagName.toUpperCase();switch(I){case"INPUT":if(O=="checkbox"){U[L]=S.checked;}else{if(O!="radio"){U[L]=S.value;}}break;case"TEXTAREA":U[L]=S.value;break;case"SELECT":V=S.options;K=V.length;W=[];for(T=0;T<K;T++){Z=V[T];if(Z.selected){M=Z.attributes.value;W[W.length]=(M&&M.specified)?Z.value:Z.text;}}U[L]=W;break;}}else{O=S[0].type;switch(O){case"radio":for(T=0;T<P;T++){N=S[T];if(N.checked){U[L]=N.value;break;}}break;case"checkbox":W=[];for(T=0;T<P;T++){a=S[T];if(a.checked){W[W.length]=a.value;}}U[L]=W;break;}}}}}return U;},destroy:function(){D.call(this);this._aButtons=null;var I=this.element.getElementsByTagName("form"),J;if(I.length>0){J=I[0];if(J){B.purgeElement(J);if(J.parentNode){J.parentNode.removeChild(J);}this.form=null;}}A.superclass.destroy.call(this);},toString:function(){return"Dialog "+this.id;}});}());(function(){YAHOO.widget.SimpleDialog=function(E,D){YAHOO.widget.SimpleDialog.superclass.constructor.call(this,E,D);};var C=YAHOO.util.Dom,B=YAHOO.widget.SimpleDialog,A={"ICON":{key:"icon",value:"none",suppressEvent:true},"TEXT":{key:"text",value:"",suppressEvent:true,supercedes:["icon"]}};B.ICON_BLOCK="blckicon";B.ICON_ALARM="alrticon";B.ICON_HELP="hlpicon";B.ICON_INFO="infoicon";B.ICON_WARN="warnicon";B.ICON_TIP="tipicon";B.ICON_CSS_CLASSNAME="yui-icon";B.CSS_SIMPLEDIALOG="yui-simple-dialog";YAHOO.extend(B,YAHOO.widget.Dialog,{initDefaultConfig:function(){B.superclass.initDefaultConfig.call(this);this.cfg.addProperty(A.ICON.key,{handler:this.configIcon,value:A.ICON.value,suppressEvent:A.ICON.suppressEvent});this.cfg.addProperty(A.TEXT.key,{handler:this.configText,value:A.TEXT.value,suppressEvent:A.TEXT.suppressEvent,supercedes:A.TEXT.supercedes});},init:function(E,D){B.superclass.init.call(this,E);this.beforeInitEvent.fire(B);C.addClass(this.element,B.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(D){this.cfg.applyConfig(D,true);}this.beforeRenderEvent.subscribe(function(){if(!this.body){this.setBody("");}},this,true);this.initEvent.fire(B);},registerForm:function(){B.superclass.registerForm.call(this);this.form.innerHTML+='<input type="hidden" name="'+this.id+'" value=""/>';},configIcon:function(K,J,H){var D=J[0],E=this.body,F=B.ICON_CSS_CLASSNAME,L,I,G;if(D&&D!="none"){L=C.getElementsByClassName(F,"*",E);if(L.length===1){I=L[0];G=I.parentNode;if(G){G.removeChild(I);I=null;}}if(D.indexOf(".")==-1){I=document.createElement("span");I.className=(F+" "+D);I.innerHTML="&#160;";}else{I=document.createElement("img");I.src=(this.imageRoot+D);I.className=F;}if(I){E.insertBefore(I,E.firstChild);}}},configText:function(E,D,F){var G=D[0];if(G){this.setBody(G);this.cfg.refireEvent("icon");}},toString:function(){return"SimpleDialog "+this.id;}});}());(function(){YAHOO.widget.ContainerEffect=function(E,H,G,D,F){if(!F){F=YAHOO.util.Anim;}this.overlay=E;this.attrIn=H;this.attrOut=G;this.targetElement=D||E.element;this.animClass=F;};var B=YAHOO.util.Dom,C=YAHOO.util.CustomEvent,A=YAHOO.widget.ContainerEffect;A.FADE=function(D,F){var G=YAHOO.util.Easing,I={attributes:{opacity:{from:0,to:1}},duration:F,method:G.easeIn},E={attributes:{opacity:{to:0}},duration:F,method:G.easeOut},H=new A(D,I,E,D.element);H.handleUnderlayStart=function(){var K=this.overlay.underlay;if(K&&YAHOO.env.ua.ie){var J=(K.filters&&K.filters.length>0);if(J){B.addClass(D.element,"yui-effect-fade");}}};H.handleUnderlayComplete=function(){var J=this.overlay.underlay;if(J&&YAHOO.env.ua.ie){B.removeClass(D.element,"yui-effect-fade");}};H.handleStartAnimateIn=function(K,J,L){B.addClass(L.overlay.element,"hide-select");if(!L.overlay.underlay){L.overlay.cfg.refireEvent("underlay");}L.handleUnderlayStart();L.overlay._setDomVisibility(true);B.setStyle(L.overlay.element,"opacity",0);};H.handleCompleteAnimateIn=function(K,J,L){B.removeClass(L.overlay.element,"hide-select");if(L.overlay.element.style.filter){L.overlay.element.style.filter=null;}L.handleUnderlayComplete();L.overlay.cfg.refireEvent("iframe");L.animateInCompleteEvent.fire();};H.handleStartAnimateOut=function(K,J,L){B.addClass(L.overlay.element,"hide-select");L.handleUnderlayStart();};H.handleCompleteAnimateOut=function(K,J,L){B.removeClass(L.overlay.element,"hide-select");if(L.overlay.element.style.filter){L.overlay.element.style.filter=null;}L.overlay._setDomVisibility(false);B.setStyle(L.overlay.element,"opacity",1);L.handleUnderlayComplete();L.overlay.cfg.refireEvent("iframe");L.animateOutCompleteEvent.fire();};H.init();return H;};A.SLIDE=function(F,D){var I=YAHOO.util.Easing,L=F.cfg.getProperty("x")||B.getX(F.element),K=F.cfg.getProperty("y")||B.getY(F.element),M=B.getClientWidth(),H=F.element.offsetWidth,J={attributes:{points:{to:[L,K]}},duration:D,method:I.easeIn},E={attributes:{points:{to:[(M+25),K]}},duration:D,method:I.easeOut},G=new A(F,J,E,F.element,YAHOO.util.Motion);G.handleStartAnimateIn=function(O,N,P){P.overlay.element.style.left=((-25)-H)+"px";P.overlay.element.style.top=K+"px";};G.handleTweenAnimateIn=function(Q,P,R){var S=B.getXY(R.overlay.element),O=S[0],N=S[1];if(B.getStyle(R.overlay.element,"visibility")=="hidden"&&O<L){R.overlay._setDomVisibility(true);}R.overlay.cfg.setProperty("xy",[O,N],true);R.overlay.cfg.refireEvent("iframe");};G.handleCompleteAnimateIn=function(O,N,P){P.overlay.cfg.setProperty("xy",[L,K],true);P.startX=L;P.startY=K;P.overlay.cfg.refireEvent("iframe");P.animateInCompleteEvent.fire();};G.handleStartAnimateOut=function(O,N,R){var P=B.getViewportWidth(),S=B.getXY(R.overlay.element),Q=S[1];R.animOut.attributes.points.to=[(P+25),Q];};G.handleTweenAnimateOut=function(P,O,Q){var S=B.getXY(Q.overlay.element),N=S[0],R=S[1];Q.overlay.cfg.setProperty("xy",[N,R],true);Q.overlay.cfg.refireEvent("iframe");};G.handleCompleteAnimateOut=function(O,N,P){P.overlay._setDomVisibility(false);P.overlay.cfg.setProperty("xy",[L,K]);P.animateOutCompleteEvent.fire();};G.init();return G;};A.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=C.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=C.LIST;this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=C.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=C.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this);},animateIn:function(){this.beforeAnimateInEvent.fire();this.animIn.animate();},animateOut:function(){this.beforeAnimateOutEvent.fire();this.animOut.animate();},handleStartAnimateIn:function(E,D,F){},handleTweenAnimateIn:function(E,D,F){},handleCompleteAnimateIn:function(E,D,F){},handleStartAnimateOut:function(E,D,F){},handleTweenAnimateOut:function(E,D,F){},handleCompleteAnimateOut:function(E,D,F){},toString:function(){var D="ContainerEffect";if(this.overlay){D+=" ["+this.overlay.toString()+"]";}return D;}};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider);})();YAHOO.register("container",YAHOO.widget.Module,{version:"2.8.1",build:"19"});
function resourceStack(config){if(typeof config=="undefined"){alert("fatal error in resourceStack - no object!");}
if(typeof config['container']=="undefined"){alert("fatal error in resourceStack - container element not defined!");}
if(typeof config['language_dir']=="undefined"){alert("fatal error in resourceStack - language direction not defined!");}
if(typeof config['resourceicon']=="undefined"){alert("fatal error in resourceStack - icon element not defined!");}
if(typeof config['value']=="undefined"){config['value']=0;}
var container=Dom.get(config['container']);var icon=Dom.get(config['resourceicon']);icon=container.removeChild(icon);var iniValue=config['value'];if(typeof config['width']=="undefined"){config['width']=Dom.getStyle(container,"width");}
var containerwidth=config['width'];var icons=new Array();var addIcon=function(){var e=icon.cloneNode(true);e.id="";Dom.setStyle(e,"display","none");container.appendChild(e);icons.push(e);return e;}
var removeIcon=function(){var e=icons[icons.length-1]
container.removeChild(e);icons.pop();return e;}
this.setIcons=function(numIcons){if(numIcons==icons.length)return true;if(numIcons>(containerwidth-icon.width-1)/2)numIcons=(containerwidth-icon.width-1)/2;while(icons.length>numIcons){removeIcon();}
for(i=0;i<numIcons;i++){if(icons.length-1<i){addIcon();}
var pos=0;var overlap=icon.width*numIcons-containerwidth;if(overlap<=0){pos=0;}
else{pos=overlap/(numIcons-1);if((pos%1)!=0){var roundingInterval=(numIcons-1)/Math.round((pos%1)*(numIcons-1));if(Math.floor((i-1)%roundingInterval)==0){pos=Math.ceil(pos);}else{pos=Math.floor(pos);}}}
if(i>0){var marginElem="margin-left";if(config['language_dir']=='rtl')marginElem="margin-right";Dom.setStyle(icons[i],marginElem,-pos+"px");}
Dom.setStyle(icons[i],"display","inline");}}}
if(typeof IKARIAM=="undefined"){var IKARIAM={};}
IKARIAM.helpers={};IKARIAM.helpers.shortenValue=function(value,to){var steps={k:3,m:6};value=Math.floor(value).toString();var unit='';var retval=value;if(value.length>to){for(var i in steps){retval=Math.floor(value/Math.pow(10,steps[i]));unit=i;if(retval.toString().length<to){break;}}}
return this.locaNumberFormat(retval,0)+unit;};IKARIAM.helpers.locaNumberFormat=function(number,to){if(typeof to=="undefined")to=0;return this.number_format(number,to,LocalizationStrings['decimalPoint'],LocalizationStrings['thousandSeperator']);}
IKARIAM.helpers.number_format=function(number,decimals,dec_point,thousands_sep){var exponent="";var numberstr=number.toString();var eindex=numberstr.indexOf("e");if(eindex>-1){exponent=numberstr.substring(eindex);number=parseFloat(numberstr.substring(0,eindex));}
if(decimals!=null){var temp=Math.pow(10,decimals);number=Math.round(number*temp)/temp;}
var sign=number<0?"-":"";var integer=(number>0?Math.floor(number):Math.abs(Math.ceil(number))).toString();var fractional=number.toString().substring(integer.length+sign.length);dec_point=dec_point!=null?dec_point:".";fractional=decimals!=null&&decimals>0||fractional.length>1?(dec_point+fractional.substring(1)):"";if(decimals!=null&&decimals>0){for(i=fractional.length-1,z=decimals;i<z;++i)fractional+="0";}
thousands_sep=(thousands_sep!=dec_point||fractional.length==0)?thousands_sep:null;if(thousands_sep!=null&&thousands_sep!=""){for(i=integer.length-3;i>0;i-=3)integer=integer.substring(0,i)+thousands_sep+integer.substring(i);}
return sign+integer+fractional+exponent;}
function addListener(obj,type,fn)
{if(obj.addEventListener){if(type=='mousewheel'){type='DOMMouseScroll';}
obj.addEventListener(type,fn,false);}else if(obj.attachEvent){obj["e"+type+fn]=fn;obj[type+fn]=function(){obj["e"+type+fn](window.event);};obj.attachEvent('on'+type,obj[type+fn]);}}
function removeListener(obj,type,fn){if(obj.removeEventListener){obj.removeEventListener(type,fn,false);}else if(obj.detachEvent){obj.detachEvent("on"+type,obj[type+fn]);obj[type+fn]=null;obj["e"+type+fn]=null;}}
function dezInt(num,size,prefix){prefix=(prefix)?prefix:"0";var minus=(num<0)?"-":"",result=(prefix=="0")?minus:"";num=Math.abs(parseInt(num,10));size-=(""+num).length;for(var i=1;i<=size;i++){result+=""+prefix;}
result+=((prefix!="0")?minus:"")+num;return result;}
function ajaxSendUrl(aUrl){var xmlHttp=null;if(typeof XMLHttpRequest!='undefined'){xmlHttp=new XMLHttpRequest();}
if(!xmlHttp){try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){xmlHttp=null;}}}
if(xmlHttp){xmlHttp.open('POST',aUrl,true);xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4){}};xmlHttp.send(null);}}
function ajaxHandlerCall(aUrl){ajaxRequest(aUrl,ajaxResponder);}
function ajaxRequest(aUrl,aFunction){var xmlHttp=null;if(typeof XMLHttpRequest!='undefined'){xmlHttp=new XMLHttpRequest();}
if(!xmlHttp){try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){xmlHttp=null;}}}
if(xmlHttp){xmlHttp.open('POST',aUrl,true);xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4&&"undefined"!=typeof(aFunction)){var tmp=new aFunction(xmlHttp.responseText);}};xmlHttp.send(null);}}
function ajaxRequestPost(aUrl,params,aFunction,aSync){if(typeof(aSync)=='undefined'){aSync=true;}
var xmlHttp=null;if(typeof XMLHttpRequest!='undefined'){xmlHttp=new XMLHttpRequest();}
if(!xmlHttp){try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){xmlHttp=null;}}}
if(xmlHttp){xmlHttp.open('POST',aUrl,aSync);xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlHttp.setRequestHeader("Content-length",params.length);xmlHttp.setRequestHeader("Connection","close");xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4&&"undefined"!=typeof(aFunction)){var tmp=new aFunction(xmlHttp.responseText);}};xmlHttp.send(params);}}
var shortenValue=IKARIAM.helpers.shortenValue;var locaNumberFormat=IKARIAM.helpers.locaNumberFormat;var number_format=IKARIAM.helpers.number_format;(function(){if(typeof(this.Uencode)==="undefined"){var Uencode=function(cfgObj){if(!(this instanceof Uencode)){return new Uencode(cfgObj);}
this.window=cfgObj&&cfgObj.window?cfgObj.window:window;this.Uencode={};this.Uencode.ini={};if(cfgObj){for(var ini in cfgObj.ini){this.Uencode.ini[ini]={};this.Uencode.ini[ini].local_value=cfgObj.ini[ini];this.Uencode.ini[ini].global_value=cfgObj.ini[ini];}}};}
var Uencode_shared={};Uencode.prototype={constructor:Uencode,urlencode:function(str){str=(str+'').toString();return encodeURIComponent(str).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/%20/g,'+');}};this.Uencode=Uencode;}());$URLencoder=new Uencode();function in_array(item,arr){for(p=0;p<arr.length;p++)if(item==arr[p])return true;return false;}
function loadURL(dest,objectId){try{xmlhttp=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");document.getElementById(objectId).innerHTML="Loading...";}catch(e){}
xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){document.getElementById(objectId).innerHTML=xmlhttp.responseText;}}}
xmlhttp.open("GET",dest);xmlhttp.send(null);}
function ajaxResponder(ajaxResponse){var responseArray;this.changeClass=function(params){var element=Dom.get(params[0]);element.className=params[1];}
this.changeHTML=function(params){var element=Dom.get(params[0]);element.innerHTML=params[1];}
this.custom=function(name,params){window[name](params);}
try{responseArray=JSON.parse(ajaxResponse);for(var i=0;i<responseArray.length;i++){var func=responseArray[i][0];try{if(func=="custom"){var tmp=this[func](responseArray[i][1][0],responseArray[i][1][1]);}else{var tmp=this[func](responseArray[i][1]);}}catch(e){alert("Funktion: "+responseArray[i][0]+"\nParameter: "+responseArray[i][1]+"\nFehler: "+e.description);}}}catch(e){alert(ajaxResponse);}}
if(!this.JSON){JSON={};}
(function(){function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z';};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapeable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapeable.lastIndex=0;return escapeable.test(string)?'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==='string'){return c;}
return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(typeof value.length==='number'&&!value.propertyIsEnumerable('length')){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+
partial.join(',\n'+gap)+'\n'+
mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+
mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}})();
function Notes(){var messageLayer=null;var charLayer=null;var notes="";var top=this;var maxChars=0;var initalMessage=null;this.init=function(obj,charDiv){messageLayer=obj;charLayer=charDiv;messageLayer.onkeyup=this.updateNotes;notes=messageLayer.value;initalMessage=notes;charLayer.innerHTML=maxChars-notes.length;}
this.setMaxChars=function(c){maxChars=c;}
this.updateNotes=function(){var anz=messageLayer.value.length;if(anz>maxChars){messageLayer.value=messageLayer.value.substring(0,maxChars);alert(LocalizationStrings['warnings']['tolargeText']);frei=0;}
else frei=maxChars-anz;charLayer.value=frei;notes=messageLayer.value;charLayer.innerHTML=maxChars-notes.length;}
this.save=function(){if(initalMessage!=notes){top.updateNotes();var params="notes="+$URLencoder.urlencode(notes);ajaxRequestPost('?action=Diplomacy&function=saveAvatarNotes',params,top.saveResponse,false);}}
this.saveResponse=function(msg){if(top&&top.updateMessageLayer){top.updateMessageLayer();}}}
(function(){var WidgetName="Carousel";YAHOO.widget.Carousel=function(el,cfg){YAHOO.widget.Carousel.superclass.constructor.call(this,el,cfg);};var
Carousel=YAHOO.widget.Carousel,Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,JS=YAHOO.lang,instances={},syncUiOnItemInsert=true,afterScrollEvent="afterScroll",allItemsRemovedEvent="allItemsRemoved",beforeHideEvent="beforeHide",beforePageChangeEvent="beforePageChange",beforeScrollEvent="beforeScroll",beforeShowEvent="beforeShow",blurEvent="blur",focusEvent="focus",hideEvent="hide",itemAddedEvent="itemAdded",itemRemovedEvent="itemRemoved",itemReplacedEvent="itemReplaced",itemSelectedEvent="itemSelected",loadItemsEvent="loadItems",navigationStateChangeEvent="navigationStateChange",pageChangeEvent="pageChange",renderEvent="render",showEvent="show",startAutoPlayEvent="startAutoPlay",stopAutoPlayEvent="stopAutoPlay",uiUpdateEvent="uiUpdate";function setStyles(el,styles){var which;for(which in styles){if(styles.hasOwnProperty(which)){Dom.setStyle(el,which,styles[which]);}}}
function createElement(el,attrs){var newEl=document.createElement(el);attrs=attrs||{};if(attrs.className){Dom.addClass(newEl,attrs.className);}
if(attrs.styles){setStyles(newEl,attrs.styles);}
if(attrs.parent){attrs.parent.appendChild(newEl);}
if(attrs.id){newEl.setAttribute("id",attrs.id);}
if(attrs.content){if(attrs.content.nodeName){newEl.appendChild(attrs.content);}else{newEl.innerHTML=attrs.content;}}
return newEl;}
function getStyle(el,style,type){var value;if(!el){return 0;}
function getStyleIntVal(el,style){var val;if(style=="marginRight"&&(YAHOO.env.ua.webkit||(YAHOO.env.ua.ie&&YAHOO.env.ua.ie>=9))){val=parseInt(Dom.getStyle(el,"marginLeft"),10);}else{val=parseInt(Dom.getStyle(el,style),10);}
return JS.isNumber(val)?val:0;}
function getStyleFloatVal(el,style){var val;if(style=="marginRight"&&YAHOO.env.ua.webkit){val=parseFloat(Dom.getStyle(el,"marginLeft"));}else{val=parseFloat(Dom.getStyle(el,style));}
return JS.isNumber(val)?val:0;}
if(typeof type=="undefined"){type="int";}
switch(style){case"height":value=el.offsetHeight;if(value>0){value+=getStyleIntVal(el,"marginTop")+
getStyleIntVal(el,"marginBottom");}else{value=getStyleFloatVal(el,"height")+
getStyleIntVal(el,"marginTop")+
getStyleIntVal(el,"marginBottom")+
getStyleIntVal(el,"borderTopWidth")+
getStyleIntVal(el,"borderBottomWidth")+
getStyleIntVal(el,"paddingTop")+
getStyleIntVal(el,"paddingBottom");}
break;case"width":value=el.offsetWidth;if(value>0){value+=getStyleIntVal(el,"marginLeft")+
getStyleIntVal(el,"marginRight");}else{value=getStyleFloatVal(el,"width")+
getStyleIntVal(el,"marginLeft")+
getStyleIntVal(el,"marginRight")+
getStyleIntVal(el,"borderLeftWidth")+
getStyleIntVal(el,"borderRightWidth")+
getStyleIntVal(el,"paddingLeft")+
getStyleIntVal(el,"paddingRight");}
break;default:if(type=="int"){value=getStyleIntVal(el,style);}else if(type=="float"){value=getStyleFloatVal(el,style);}else{value=Dom.getStyle(el,style);}
break;}
return value;}
function getCarouselItemSize(which){var carousel=this,child,item,size=0,vertical=false;if(carousel._itemAttrCache[which]){return carousel._itemAttrCache[which];}
if(carousel._itemsTable.numItems===0){return 0;}
item=carousel._findClosestSibling(-1);if(JS.isUndefined(item)){return 0;}
child=Dom.get(item.id);if(typeof which=="undefined"){vertical=carousel.get("isVertical");}else{vertical=which=="height";}
if(vertical){size=getStyle(child,"height");}else{size=getStyle(child,"width");}
if(size){carousel._itemAttrCache[which]=size;}
return size;}
function getRevealSize(){var carousel=this,isVertical,sz;isVertical=carousel.get("isVertical");sz=getCarouselItemSize.call(carousel,isVertical?"height":"width");return(sz*carousel.get("revealAmount")/100);}
function getCarouselItemPosition(pos){var carousel=this,itemsPerRow=carousel._cols,itemsPerCol=carousel._rows,page,sz,isVertical,isRtl,itemsCol,itemsRow,sentinel,top,left,rsz,delta,styles={},itemsTable=carousel._itemsTable;isVertical=carousel.get("isVertical");isRtl=carousel.get("isRtl");sz=getCarouselItemSize.call(carousel,isVertical?"height":"width");rsz=getRevealSize.call(carousel);if(itemsPerCol){page=this.getPageForItem(pos);if(isVertical){itemsRow=Math.floor(pos/itemsPerRow);delta=itemsRow;top=delta*sz;styles.top=(top+rsz)+"px";sz=getCarouselItemSize.call(carousel,"width");itemsCol=pos%itemsPerRow;delta=itemsCol;left=delta*sz;styles.left=left+"px";}else{itemsCol=pos%itemsPerRow;sentinel=(page-1)*itemsPerRow;delta=itemsCol+sentinel;left=delta*sz;styles.left=isRtl?"auto":(left+rsz)+"px";styles.right=isRtl?(left+rsz)+"px":"auto";sz=getCarouselItemSize.call(carousel,"height");itemsRow=Math.floor(pos/itemsPerRow);sentinel=(page-1)*itemsPerCol;delta=itemsRow-sentinel;top=delta*sz;styles.top=top+"px";}}else{if(isVertical){styles.left=isRtl?"auto":0;styles.right=isRtl?0:"auto";styles.top=((pos*sz)+rsz)+"px";}else{styles.left=isRtl?"auto":((pos*sz)+rsz)+"px";styles.right=isRtl?((pos*sz)+rsz)+"px":"auto";styles.top=0;}}
return styles;}
function getFirstVisibleForPosition(pos){var num=this.get("numVisible");return Math.floor(pos/num)*num;}
function getScrollOffset(delta){var carousel=this,itemSize=0,size=0,attr=carousel.get("isVertical")?"height":"width";itemSize=getCarouselItemSize.call(carousel,attr);size=itemSize*delta;return size;}
function scrollPageBackward(ev,obj){obj.scrollPageBackward();Event.preventDefault(ev);}
function scrollPageForward(ev,obj){obj.scrollPageForward();Event.preventDefault(ev);}
function setItemSelection(newpos,oldpos){var carousel=this,cssClass=carousel.CLASSES,el,firstItem=carousel._firstItem,numItems=carousel.get("numItems"),numVisible=carousel.get("numVisible"),position=oldpos,sentinel=firstItem+numVisible-1;if(position>=0&&position<numItems){if(!JS.isUndefined(carousel._itemsTable.items[position])){el=Dom.get(carousel._itemsTable.items[position].id);if(el){Dom.removeClass(el,cssClass.SELECTED_ITEM);}}}
if(JS.isNumber(newpos)){newpos=parseInt(newpos,10);newpos=JS.isNumber(newpos)?newpos:0;}else{newpos=firstItem;}
if(JS.isUndefined(carousel._itemsTable.items[newpos])){newpos=getFirstVisibleForPosition.call(carousel,newpos);carousel.scrollTo(newpos);}
if(!JS.isUndefined(carousel._itemsTable.items[newpos])){el=Dom.get(carousel._itemsTable.items[newpos].id);if(el){Dom.addClass(el,cssClass.SELECTED_ITEM);}}
if(newpos<firstItem||newpos>sentinel){newpos=getFirstVisibleForPosition.call(carousel,newpos);carousel.scrollTo(newpos);}}
function showNavigation(hide){var carousel=this,cfg=carousel.get("navigation");if(JS.isUndefined(cfg)){return;}
if(JS.isUndefined(hide)){if(!JS.isUndefined(cfg.prev)&&JS.isArray(cfg.prev)&&!JS.isUndefined(cfg.prev[0])){Dom.setStyle(cfg.prev[0],"visibility","visible");}
if(!JS.isUndefined(cfg.next)&&JS.isArray(cfg.next)&&!JS.isUndefined(cfg.next[0])){Dom.setStyle(cfg.next[0],"visibility","visible");}
if(!JS.isUndefined(carousel._pages)&&!JS.isUndefined(carousel._pages.el)){Dom.setStyle(carousel._pages.el,"visibility","visible");}}else{if(!JS.isUndefined(cfg.prev)&&JS.isArray(cfg.prev)&&!JS.isUndefined(cfg.prev[0])){Dom.setStyle(cfg.prev[0],"visibility","hidden");}
if(!JS.isUndefined(cfg.next)&&JS.isArray(cfg.next)&&!JS.isUndefined(cfg.next[0])){Dom.setStyle(cfg.next[0],"visibility","hidden");}
if(!JS.isUndefined(carousel._pages)&&!JS.isUndefined(carousel._pages.el)){Dom.setStyle(carousel._pages.el,"visibility","hidden");}}}
function syncNavigation(){var attach=false,carousel=this,cssClass=carousel.CLASSES,i,navigation,sentinel;if(!carousel._hasRendered){return;}
navigation=carousel.get("navigation");sentinel=carousel._firstItem+carousel.get("numVisible");if(navigation.prev){if(carousel.get("numItems")===0||carousel._firstItem===0){if(carousel.get("numItems")===0||!carousel.get("isCircular")){Event.removeListener(navigation.prev,"click",scrollPageBackward);Dom.addClass(navigation.prev,cssClass.FIRST_NAV_DISABLED);for(i=0;i<carousel._navBtns.prev.length;i++){carousel._navBtns.prev[i].setAttribute("disabled","true");}
carousel._prevEnabled=false;}else{attach=!carousel._prevEnabled;}}else{attach=!carousel._prevEnabled;}
if(attach){Event.on(navigation.prev,"click",scrollPageBackward,carousel);Dom.removeClass(navigation.prev,cssClass.FIRST_NAV_DISABLED);for(i=0;i<carousel._navBtns.prev.length;i++){carousel._navBtns.prev[i].removeAttribute("disabled");}
carousel._prevEnabled=true;}}
attach=false;if(navigation.next){if(sentinel>=carousel.get("numItems")){if(!carousel.get("isCircular")){Event.removeListener(navigation.next,"click",scrollPageForward);Dom.addClass(navigation.next,cssClass.DISABLED);for(i=0;i<carousel._navBtns.next.length;i++){carousel._navBtns.next[i].setAttribute("disabled","true");}
carousel._nextEnabled=false;}else{attach=!carousel._nextEnabled;}}else{attach=!carousel._nextEnabled;}
if(attach){Event.on(navigation.next,"click",scrollPageForward,carousel);Dom.removeClass(navigation.next,cssClass.DISABLED);for(i=0;i<carousel._navBtns.next.length;i++){carousel._navBtns.next[i].removeAttribute("disabled");}
carousel._nextEnabled=true;}}
carousel.fireEvent(navigationStateChangeEvent,{next:carousel._nextEnabled,prev:carousel._prevEnabled});}
function syncPagerUi(page){var carousel=this,numPages,numVisible;if(!carousel._hasRendered){return;}
numVisible=carousel.get("numVisible");if(!JS.isNumber(page)){page=Math.floor(carousel.get("selectedItem")/numVisible);}
numPages=Math.ceil(carousel.get("numItems")/numVisible);carousel._pages.num=numPages;carousel._pages.cur=page;if(numPages>carousel.CONFIG.MAX_PAGER_BUTTONS){carousel._updatePagerMenu();}else{carousel._updatePagerButtons();}}
function getDimensions(el,which){switch(which){case'height':return getStyle(el,"marginTop")+
getStyle(el,"marginBottom")+
getStyle(el,"paddingTop")+
getStyle(el,"paddingBottom")+
getStyle(el,"borderTopWidth")+
getStyle(el,"borderBottomWidth");case'width':return getStyle(el,"marginLeft")+
getStyle(el,"marginRight")+
getStyle(el,"paddingLeft")+
getStyle(el,"paddingRight")+
getStyle(el,"borderLeftWidth")+
getStyle(el,"borderRightWidth");default:break;}
return getStyle(el,which);}
function syncUi(o){var carousel=this;if(!JS.isObject(o)){return;}
switch(o.ev){case itemAddedEvent:carousel._syncUiForItemAdd(o);break;case itemRemovedEvent:carousel._syncUiForItemRemove(o);break;case itemReplacedEvent:carousel._syncUiForItemReplace(o);break;case loadItemsEvent:carousel._syncUiForLazyLoading(o);break;}
carousel.fireEvent(uiUpdateEvent);}
function updateStateAfterScroll(item,sentinel){var carousel=this,page=carousel.get("currentPage"),newPage,numPerPage=carousel.get("numVisible");newPage=parseInt(carousel._firstItem/numPerPage,10);if(newPage!=page){carousel.setAttributeConfig("currentPage",{value:newPage});carousel.fireEvent(pageChangeEvent,newPage);}
if(carousel.get("selectOnScroll")){if(carousel.get("selectedItem")!=carousel._selectedItem){carousel.set("selectedItem",carousel._selectedItem);}}
clearTimeout(carousel._autoPlayTimer);delete carousel._autoPlayTimer;if(carousel.isAutoPlayOn()){carousel.startAutoPlay();}
carousel.fireEvent(afterScrollEvent,{first:carousel._firstItem,last:sentinel},carousel);}
Carousel.getById=function(id){return instances[id]?instances[id].object:false;};YAHOO.extend(Carousel,YAHOO.util.Element,{_rows:null,_cols:null,_animObj:null,_carouselEl:null,_clipEl:null,_firstItem:0,_hasFocus:false,_hasRendered:false,_isAnimationInProgress:false,_isAutoPlayInProgress:false,_itemsTable:null,_navBtns:null,_navEl:null,_nextEnabled:true,_pages:null,_pagination:null,_prevEnabled:true,_recomputeSize:true,_itemAttrCache:null,CLASSES:{BUTTON:"yui-carousel-button",CAROUSEL:"yui-carousel",CAROUSEL_EL:"yui-carousel-element",CONTAINER:"yui-carousel-container",CONTENT:"yui-carousel-content",DISABLED:"yui-carousel-button-disabled",FIRST_NAV:" yui-carousel-first-button",FIRST_NAV_DISABLED:"yui-carousel-first-button-disabled",FIRST_PAGE:"yui-carousel-nav-first-page",FOCUSSED_BUTTON:"yui-carousel-button-focus",HORIZONTAL:"yui-carousel-horizontal",ITEM_LOADING:"yui-carousel-item-loading",MIN_WIDTH:"yui-carousel-min-width",NAVIGATION:"yui-carousel-nav",NEXT_NAV:" yui-carousel-next-button",NEXT_PAGE:"yui-carousel-next",NAV_CONTAINER:"yui-carousel-buttons",PAGER_ITEM:"yui-carousel-pager-item",PAGINATION:"yui-carousel-pagination",PAGE_FOCUS:"yui-carousel-nav-page-focus",PREV_PAGE:"yui-carousel-prev",ITEM:"yui-carousel-item",SELECTED_ITEM:"yui-carousel-item-selected",SELECTED_NAV:"yui-carousel-nav-page-selected",VERTICAL:"yui-carousel-vertical",MULTI_ROW:"yui-carousel-multi-row",ROW:"yui-carousel-row",VERTICAL_CONTAINER:"yui-carousel-vertical-container",VISIBLE:"yui-carousel-visible"},CONFIG:{FIRST_VISIBLE:0,HORZ_MIN_WIDTH:180,MAX_PAGER_BUTTONS:5,VERT_MIN_WIDTH:115,NUM_VISIBLE:3},STRINGS:{ITEM_LOADING_CONTENT:"Loading",NEXT_BUTTON_TEXT:"Next Page",PAGER_PREFIX_TEXT:"Go to page ",PREVIOUS_BUTTON_TEXT:"Previous Page"},addItem:function(item,index){var carousel=this,className,content,elId,replaceItems=0,newIndex,numItems=carousel.get("numItems");if(!item){return false;}
if(JS.isString(item)||item.nodeName){content=item.nodeName?item.innerHTML:item;}else if(JS.isObject(item)){content=item.content;}else{return false;}
className=carousel.CLASSES.ITEM+
(item.className?" "+item.className:"");elId=item.id?item.id:Dom.generateId();if(JS.isUndefined(index)){carousel._itemsTable.items.push({item:content,className:className,id:elId});newIndex=carousel._itemsTable.items.length-1;}else{if(index<0||index>numItems){return false;}
if(!carousel._itemsTable.items[index]){carousel._itemsTable.items[index]=undefined;replaceItems=1;}
carousel._itemsTable.items.splice(index,replaceItems,{item:content,className:className,id:elId});}
carousel._itemsTable.numItems++;if(numItems<carousel._itemsTable.items.length){carousel.set("numItems",carousel._itemsTable.items.length);}
carousel.fireEvent(itemAddedEvent,{pos:index,ev:itemAddedEvent,newPos:newIndex});return true;},addItems:function(items){var i,n,rv=true;if(!JS.isArray(items)){return false;}
syncUiOnItemInsert=false;for(i=0,n=items.length;i<n;i++){if(this.addItem(items[i][0],items[i][1])===false){rv=false;}}
syncUiOnItemInsert=true;this._syncUiItems();return rv;},blur:function(){this._carouselEl.blur();this.fireEvent(blurEvent);},clearItems:function(){var carousel=this,n=carousel.get("numItems");while(n>0){if(!carousel.removeItem(0)){}
if(carousel._itemsTable.numItems===0){carousel.set("numItems",0);break;}
n--;}
carousel.fireEvent(allItemsRemovedEvent);},focus:function(){var carousel=this,first,focusEl,isSelectionInvisible,itemsTable,last,numVisible,selectOnScroll,selected,selItem;if(!carousel._hasRendered){return;}
if(carousel.isAnimating()){return;}
selItem=carousel.get("selectedItem");numVisible=carousel.get("numVisible");selectOnScroll=carousel.get("selectOnScroll");selected=(selItem>=0)?carousel.getItem(selItem):null;first=carousel.get("firstVisible");last=first+numVisible-1;isSelectionInvisible=(selItem<first||selItem>last);focusEl=(selected&&selected.id)?Dom.get(selected.id):null;itemsTable=carousel._itemsTable;if(!selectOnScroll&&isSelectionInvisible){focusEl=(itemsTable&&itemsTable.items&&itemsTable.items[first])?Dom.get(itemsTable.items[first].id):null;}
if(focusEl){try{focusEl.focus();}catch(ex){}}
carousel.fireEvent(focusEvent);},hide:function(){var carousel=this;if(carousel.fireEvent(beforeHideEvent)!==false){carousel.removeClass(carousel.CLASSES.VISIBLE);showNavigation.call(carousel,false);carousel.fireEvent(hideEvent);}},init:function(el,attrs){var carousel=this,elId=el,parse=false,selected;if(!el){return;}
carousel._hasRendered=false;carousel._navBtns={prev:[],next:[]};carousel._pages={el:null,num:0,cur:0};carousel._pagination={};carousel._itemAttrCache={};carousel._itemsTable={loading:{},numItems:0,items:[],size:0};if(JS.isString(el)){el=Dom.get(el);}else if(!el.nodeName){return;}
Carousel.superclass.init.call(carousel,el,attrs);selected=carousel.get("selectedItem");if(selected>0){carousel.set("firstVisible",getFirstVisibleForPosition.call(carousel,selected));}
if(el){if(!el.id){el.setAttribute("id",Dom.generateId());}
parse=carousel._parseCarousel(el);if(!parse){carousel._createCarousel(elId);}}else{el=carousel._createCarousel(elId);}
elId=el.id;carousel.initEvents();if(parse){carousel._parseCarouselItems();}
if(selected>0){setItemSelection.call(carousel,selected,0);}
if(!attrs||typeof attrs.isVertical=="undefined"){carousel.set("isVertical",false);}
carousel._parseCarouselNavigation(el);carousel._navEl=carousel._setupCarouselNavigation();instances[elId]={object:carousel};carousel._loadItems(Math.min(carousel.get("firstVisible")+carousel.get("numVisible"),carousel.get("numItems"))-1);},initAttributes:function(attrs){var carousel=this;attrs=attrs||{};Carousel.superclass.initAttributes.call(carousel,attrs);carousel.setAttributeConfig("carouselEl",{validator:JS.isString,value:attrs.carouselEl||"OL"});carousel.setAttributeConfig("carouselItemEl",{validator:JS.isString,value:attrs.carouselItemEl||"LI"});carousel.setAttributeConfig("currentPage",{readOnly:true,value:0});carousel.setAttributeConfig("firstVisible",{method:carousel._setFirstVisible,validator:carousel._validateFirstVisible,value:attrs.firstVisible||carousel.CONFIG.FIRST_VISIBLE});carousel.setAttributeConfig("selectOnScroll",{validator:JS.isBoolean,value:attrs.selectOnScroll||true});carousel.setAttributeConfig("numVisible",{setter:carousel._numVisibleSetter,method:carousel._setNumVisible,validator:carousel._validateNumVisible,value:attrs.numVisible||carousel.CONFIG.NUM_VISIBLE});carousel.setAttributeConfig("numItems",{method:carousel._setNumItems,validator:carousel._validateNumItems,value:carousel._itemsTable.numItems});carousel.setAttributeConfig("scrollIncrement",{validator:carousel._validateScrollIncrement,value:attrs.scrollIncrement||1});carousel.setAttributeConfig("selectedItem",{setter:carousel._selectedItemSetter,method:carousel._setSelectedItem,validator:JS.isNumber,value:-1});carousel.setAttributeConfig("revealAmount",{method:carousel._setRevealAmount,validator:carousel._validateRevealAmount,value:attrs.revealAmount||0});carousel.setAttributeConfig("isCircular",{validator:JS.isBoolean,value:attrs.isCircular||false});carousel.setAttributeConfig("isVertical",{method:carousel._setOrientation,validator:JS.isBoolean,value:attrs.isVertical||false});carousel.setAttributeConfig("isRtl",{validator:JS.isBoolean,value:attrs.isRtl||false});carousel.setAttributeConfig("navigation",{method:carousel._setNavigation,validator:carousel._validateNavigation,value:attrs.navigation||{prev:null,next:null,page:null}});carousel.setAttributeConfig("animation",{validator:carousel._validateAnimation,value:attrs.animation||{speed:0,effect:null}});carousel.setAttributeConfig("autoPlay",{validator:JS.isNumber,value:attrs.autoPlay||0});carousel.setAttributeConfig("autoPlayInterval",{validator:JS.isNumber,value:attrs.autoPlayInterval||0});carousel.setAttributeConfig("numPages",{readOnly:true,getter:carousel._getNumPages});carousel.setAttributeConfig("lastVisible",{readOnly:true,getter:carousel._getLastVisible});},initEvents:function(){var carousel=this,cssClass=carousel.CLASSES,focussedLi;carousel.on("keydown",carousel._keyboardEventHandler);carousel.on(afterScrollEvent,syncNavigation);carousel.on(itemAddedEvent,syncUi);carousel.on(itemRemovedEvent,syncUi);carousel.on(itemReplacedEvent,syncUi);carousel.on(itemSelectedEvent,carousel._focusHandler);carousel.on(loadItemsEvent,syncUi);carousel.on(allItemsRemovedEvent,function(ev){carousel.scrollTo(0);syncNavigation.call(carousel);syncPagerUi.call(carousel);});carousel.on(pageChangeEvent,syncPagerUi,carousel);carousel.on(renderEvent,function(ev){if(carousel.get("selectedItem")===null||carousel.get("selectedItem")<=0){carousel.set("selectedItem",carousel.get("firstVisible"));}
syncNavigation.call(carousel,ev);syncPagerUi.call(carousel,ev);carousel._setClipContainerSize();carousel.show();});carousel.on("selectedItemChange",function(ev){setItemSelection.call(carousel,ev.newValue,ev.prevValue);if(ev.newValue>=0){carousel._updateTabIndex(carousel.getElementForItem(ev.newValue));}
carousel.fireEvent(itemSelectedEvent,ev.newValue);});carousel.on(uiUpdateEvent,function(ev){syncNavigation.call(carousel,ev);syncPagerUi.call(carousel,ev);});carousel.on("firstVisibleChange",function(ev){if(!carousel.get("selectOnScroll")){if(ev.newValue>=0){carousel._updateTabIndex(carousel.getElementForItem(ev.newValue));}}});carousel.on("click",function(ev){if(carousel.isAutoPlayOn()){carousel.stopAutoPlay();}
carousel._itemClickHandler(ev);carousel._pagerClickHandler(ev);});Event.onFocus(carousel.get("element"),function(ev,obj){var target=Event.getTarget(ev);if(target&&target.nodeName.toUpperCase()=="A"&&Dom.getAncestorByClassName(target,cssClass.NAVIGATION)){if(focussedLi){Dom.removeClass(focussedLi,cssClass.PAGE_FOCUS);}
focussedLi=target.parentNode;Dom.addClass(focussedLi,cssClass.PAGE_FOCUS);}else{if(focussedLi){Dom.removeClass(focussedLi,cssClass.PAGE_FOCUS);}}
obj._hasFocus=true;obj._updateNavButtons(Event.getTarget(ev),true);},carousel);Event.onBlur(carousel.get("element"),function(ev,obj){obj._hasFocus=false;obj._updateNavButtons(Event.getTarget(ev),false);},carousel);},isAnimating:function(){return this._isAnimationInProgress;},isAutoPlayOn:function(){return this._isAutoPlayInProgress;},getElementForItem:function(index){var carousel=this;if(index<0||index>=carousel.get("numItems")){return null;}
if(carousel._itemsTable.items[index]){return Dom.get(carousel._itemsTable.items[index].id);}
return null;},getElementForItems:function(){var carousel=this,els=[],i;for(i=0;i<carousel._itemsTable.numItems;i++){els.push(carousel.getElementForItem(i));}
return els;},getItem:function(index){var carousel=this;if(index<0||index>=carousel.get("numItems")){return null;}
if(carousel._itemsTable.items.length>index){if(!JS.isUndefined(carousel._itemsTable.items[index])){return carousel._itemsTable.items[index];}}
return null;},getItems:function(){return this._itemsTable.items;},getLoadingItems:function(){return this._itemsTable.loading;},getRows:function(){return this._rows;},getCols:function(){return this._cols;},getItemPositionById:function(id){var carousel=this,n=carousel.get("numItems"),i=0,items=carousel._itemsTable.items,item;while(i<n){item=items[i]||{};if(item.id==id){return i;}
i++;}
return-1;},getVisibleItems:function(){var carousel=this,i=carousel.get("firstVisible"),n=i+carousel.get("numVisible"),r=[];while(i<n){r.push(carousel.getElementForItem(i));i++;}
return r;},removeItem:function(index){var carousel=this,itemsTable=carousel._itemsTable,item,num=carousel.get("numItems");if(index<0||index>=num){return false;}
item=itemsTable.items.splice(index,1);if(item&&item.length==1){if(itemsTable.numItems){itemsTable.numItems--;}
carousel.set("numItems",num-1);carousel.fireEvent(itemRemovedEvent,{item:item[0],pos:index,ev:itemRemovedEvent});return true;}
return false;},replaceItem:function(item,index){var carousel=this,className,content,elId,numItems=carousel.get("numItems"),oel,el=item;if(!item){return false;}
if(JS.isString(item)||item.nodeName){content=item.nodeName?item.innerHTML:item;}else if(JS.isObject(item)){content=item.content;}else{return false;}
if(JS.isUndefined(index)){return false;}else{if(index<0||index>=numItems){return false;}
oel=carousel._itemsTable.items[index];if(!oel){oel=carousel._itemsTable.loading[index];carousel._itemsTable.items[index]=undefined;}
elId=oel.id||Dom.generateId();carousel._itemsTable.items.splice(index,1,{item:content,className:carousel.CLASSES.ITEM+(item.className?" "+item.className:""),id:elId});el=carousel._itemsTable.items[index];}
carousel.fireEvent(itemReplacedEvent,{newItem:el,oldItem:oel,pos:index,ev:itemReplacedEvent});return true;},replaceItems:function(items){var i,n,rv=true;if(!JS.isArray(items)){return false;}
syncUiOnItemInsert=false;for(i=0,n=items.length;i<n;i++){if(this.replaceItem(items[i][0],items[i][1])===false){rv=false;}}
syncUiOnItemInsert=true;this._syncUiItems();return rv;},render:function(appendTo){var carousel=this,cssClass=carousel.CLASSES,rows=carousel._rows;carousel.addClass(cssClass.CAROUSEL);if(!carousel._clipEl){carousel._clipEl=carousel._createCarouselClip();carousel._clipEl.appendChild(carousel._carouselEl);}
if(appendTo){carousel.appendChild(carousel._clipEl);carousel.appendTo(appendTo);}else{if(!Dom.inDocument(carousel.get("element"))){return false;}
carousel.appendChild(carousel._clipEl);}
if(rows){Dom.addClass(carousel._clipEl,cssClass.MULTI_ROW);}
if(carousel.get("isVertical")){carousel.addClass(cssClass.VERTICAL);}else{carousel.addClass(cssClass.HORIZONTAL);}
if(carousel.get("numItems")<1){return false;}
carousel._refreshUi();return true;},scrollBackward:function(){var carousel=this;carousel.scrollTo(carousel._firstItem-
carousel.get("scrollIncrement"));},scrollForward:function(){var carousel=this;carousel.scrollTo(carousel._firstItem+
carousel.get("scrollIncrement"));},scrollPageBackward:function(){var carousel=this,isVertical=carousel.get("isVertical"),isRtl=carousel.get("isRtl"),cols=carousel._cols,firstVisible=carousel.get("firstVisible"),item=firstVisible-carousel.get("numVisible");if(item<0){if(cols){item=firstVisible-cols;}}
carousel.scrollTo(item);},scrollPageForward:function(){var carousel=this,item=carousel._firstItem+carousel.get("numVisible");if(item>carousel.get("numItems")){item=0;}
if(carousel.get("selectOnScroll")){carousel._selectedItem=carousel._getSelectedItem(item);}
carousel.scrollTo(item);},scrollTo:function(item,dontSelect){var carousel=this,animate,animCfg,isCircular,isVertical,isRtl,delta,direction,firstItem,lastItem,itemsPerRow,itemsPerCol,numItems,numPerPage,offset,page,rv,sentinel,index,stopAutoScroll,itemsTable=carousel._itemsTable;if(itemsTable.numItems===0||item==carousel._firstItem||carousel.isAnimating()){return;}
animCfg=carousel.get("animation");isCircular=carousel.get("isCircular");isVertical=carousel.get("isVertical");isRtl=carousel.get("isRtl");itemsPerRow=carousel._cols;itemsPerCol=carousel._rows;firstItem=carousel._firstItem;numItems=carousel.get("numItems");numPerPage=carousel.get("numVisible");page=carousel.get("currentPage");stopAutoScroll=function(){if(carousel.isAutoPlayOn()){carousel.stopAutoPlay();}};if(item<0){if(isCircular){if(numItems%numPerPage!==0){item=numItems+(numItems%numPerPage)-numPerPage-1;}else{item=numItems+item;}}else{stopAutoScroll.call(carousel);return;}}else if(numItems>0&&item>numItems-1){if(carousel.get("isCircular")){item=numItems-item;}else{stopAutoScroll.call(carousel);return;}}
if(isNaN(item)){return;}
direction=(carousel._firstItem>item)?"backward":"forward";sentinel=firstItem+numPerPage;sentinel=(sentinel>numItems-1)?numItems-1:sentinel;rv=carousel.fireEvent(beforeScrollEvent,{dir:direction,first:firstItem,last:sentinel});if(rv===false){return;}
carousel.fireEvent(beforePageChangeEvent,{page:page});lastItem=item+numPerPage-1;carousel._loadItems(lastItem>numItems-1?numItems-1:lastItem);delta=0-item;if(itemsPerCol){if(isVertical){delta=parseInt(delta/itemsPerRow,10);}else{delta=parseInt(delta/itemsPerCol,10);}}
carousel._firstItem=item;carousel.set("firstVisible",item);if(!dontSelect&&carousel.get("selectOnScroll")){carousel._selectedItem=item;}
sentinel=item+numPerPage;sentinel=(sentinel>numItems-1)?numItems-1:sentinel;offset=getScrollOffset.call(carousel,delta);animate=animCfg.speed>0;if(animate){carousel._animateAndSetCarouselOffset(offset,item,sentinel,dontSelect);}else{carousel._setCarouselOffset(offset);updateStateAfterScroll.call(carousel,item,sentinel);}},getPageForItem:function(item){return Math.ceil((item+1)/parseInt(this.get("numVisible"),10));},getFirstVisibleOnPage:function(page){return(page-1)*this.get("numVisible");},selectPreviousItem:function(){var carousel=this,newpos=0,selected=carousel.get("selectedItem");if(selected==carousel._firstItem){newpos=selected-carousel.get("numVisible");carousel._selectedItem=carousel._getSelectedItem(selected-1);carousel.scrollTo(newpos,true);}else{newpos=carousel.get("selectedItem")-
carousel.get("scrollIncrement");carousel.set("selectedItem",carousel._getSelectedItem(newpos));}},selectNextItem:function(){var carousel=this,newpos=0;newpos=carousel.get("selectedItem")+
carousel.get("scrollIncrement");carousel.set("selectedItem",carousel._getSelectedItem(newpos));},show:function(){var carousel=this,cssClass=carousel.CLASSES;if(carousel.fireEvent(beforeShowEvent)!==false){carousel.addClass(cssClass.VISIBLE);showNavigation.call(carousel);carousel.fireEvent(showEvent);}},startAutoPlay:function(){var carousel=this,timer;if(JS.isUndefined(carousel._autoPlayTimer)){timer=carousel.get("autoPlayInterval");if(timer<=0){return;}
carousel._isAutoPlayInProgress=true;carousel.fireEvent(startAutoPlayEvent);carousel._autoPlayTimer=setTimeout(function(){carousel._autoScroll();},timer);}},stopAutoPlay:function(){var carousel=this;if(!JS.isUndefined(carousel._autoPlayTimer)){clearTimeout(carousel._autoPlayTimer);delete carousel._autoPlayTimer;carousel._isAutoPlayInProgress=false;carousel.fireEvent(stopAutoPlayEvent);}},updatePagination:function(){var carousel=this,pagination=carousel._pagination;if(!pagination.el){return false;}
var numItems=carousel.get('numItems'),numVisible=carousel.get('numVisible'),firstVisible=carousel.get('firstVisible')+1,currentPage=carousel.get('currentPage')+1,numPages=carousel.get('numPages'),replacements={'numVisible':numVisible,'numPages':numPages,'numItems':numItems,'selectedItem':carousel.get('selectedItem')+1,'currentPage':currentPage,'firstVisible':firstVisible,'lastVisible':carousel.get("lastVisible")+1},cb=pagination.callback||{},scope=cb.scope&&cb.obj?cb.obj:carousel;pagination.el.innerHTML=JS.isFunction(cb.fn)?cb.fn.apply(scope,[pagination.template,replacements]):YAHOO.lang.substitute(pagination.template,replacements);},registerPagination:function(tpl,pos,cb){var carousel=this;carousel._pagination.template=tpl;carousel._pagination.callback=cb||{};if(!carousel._pagination.el){carousel._pagination.el=createElement('DIV',{className:carousel.CLASSES.PAGINATION});if(pos=="before"){carousel._navEl.insertBefore(carousel._pagination.el,carousel._navEl.firstChild);}else{carousel._navEl.appendChild(carousel._pagination.el);}
carousel.on('itemSelected',carousel.updatePagination);carousel.on('pageChange',carousel.updatePagination);}
carousel.updatePagination();},toString:function(){return WidgetName+(this.get?" (#"+this.get("id")+")":"");},_animateAndSetCarouselOffset:function(offset,item,sentinel){var carousel=this,animCfg=carousel.get("animation"),animObj=null;if(carousel.get("isVertical")){animObj=new YAHOO.util.Motion(carousel._carouselEl,{top:{to:offset}},animCfg.speed,animCfg.effect);}else if(carousel.get("isRtl")){animObj=new YAHOO.util.Motion(carousel._carouselEl,{right:{to:offset}},animCfg.speed,animCfg.effect);}else{animObj=new YAHOO.util.Motion(carousel._carouselEl,{left:{to:offset}},animCfg.speed,animCfg.effect);}
carousel._isAnimationInProgress=true;animObj.onComplete.subscribe(carousel._animationCompleteHandler,{scope:carousel,item:item,last:sentinel});animObj.animate();},_animationCompleteHandler:function(ev,p,o){o.scope._isAnimationInProgress=false;updateStateAfterScroll.call(o.scope,o.item,o.last);},_autoScroll:function(){var carousel=this,currIndex=carousel._firstItem,index;if(currIndex>=carousel.get("numItems")-1){if(carousel.get("isCircular")){index=0;}else{carousel.stopAutoPlay();}}else{index=currIndex+carousel.get("numVisible");}
carousel._selectedItem=carousel._getSelectedItem(index);carousel.scrollTo.call(carousel,index);},_createCarousel:function(elId){var carousel=this,cssClass=carousel.CLASSES,el=Dom.get(elId);if(!el){el=createElement("DIV",{className:cssClass.CAROUSEL,id:elId});}
if(!carousel._carouselEl){carousel._carouselEl=createElement(carousel.get("carouselEl"),{className:cssClass.CAROUSEL_EL});}
return el;},_createCarouselClip:function(){return createElement("DIV",{className:this.CLASSES.CONTENT});},_createCarouselItem:function(obj){var attr,carousel=this;return createElement(carousel.get("carouselItemEl"),{className:obj.className,styles:{},content:obj.content,id:obj.id});},_getValidIndex:function(index){var carousel=this,isCircular=carousel.get("isCircular"),numItems=carousel.get("numItems"),numVisible=carousel.get("numVisible"),sentinel=numItems-1;if(index<0){index=isCircular?Math.ceil(numItems/numVisible)*numVisible+index:0;}else if(index>sentinel){index=isCircular?0:sentinel;}
return index;},_getSelectedItem:function(val){var carousel=this,isCircular=carousel.get("isCircular"),numItems=carousel.get("numItems"),sentinel=numItems-1;if(val<0){if(isCircular){val=numItems+val;}else{val=carousel.get("selectedItem");}}else if(val>sentinel){if(isCircular){val=val-numItems;}else{val=carousel.get("selectedItem");}}
return val;},_focusHandler:function(){var carousel=this;if(carousel._hasFocus){carousel.focus();}},_itemClickHandler:function(ev){var carousel=this,carouselItem=carousel.get("carouselItemEl"),container=carousel.get("element"),el,item,target=Event.getTarget(ev),tag=target.tagName.toUpperCase();if(tag==="INPUT"||tag==="SELECT"||tag==="TEXTAREA"){return;}
while(target&&target!=container&&target.id!=carousel._carouselEl){el=target.nodeName;if(el.toUpperCase()==carouselItem){break;}
target=target.parentNode;}
if((item=carousel.getItemPositionById(target.id))>=0){carousel.set("selectedItem",carousel._getSelectedItem(item));carousel.focus();}},_keyboardEventHandler:function(ev){var carousel=this,key=Event.getCharCode(ev),target=Event.getTarget(ev),prevent=false;if(carousel.isAnimating()||target.tagName.toUpperCase()==="SELECT"){return;}
switch(key){case 0x25:case 0x26:carousel.selectPreviousItem();prevent=true;break;case 0x27:case 0x28:carousel.selectNextItem();prevent=true;break;case 0x21:carousel.scrollPageBackward();prevent=true;break;case 0x22:carousel.scrollPageForward();prevent=true;break;}
if(prevent){if(carousel.isAutoPlayOn()){carousel.stopAutoPlay();}
Event.preventDefault(ev);}},_loadItems:function(last){var carousel=this,numItems=carousel.get("numItems"),numVisible=carousel.get("numVisible"),reveal=carousel.get("revealAmount"),first=carousel._itemsTable.items.length,lastVisible=carousel.get("lastVisible");if(first>last&&last+1>=numVisible){first=last%numVisible||last==lastVisible?last-last%numVisible:last-numVisible+1;}
if(reveal&&last<numItems-1){last++;}
if(last>=first&&(!carousel.getItem(first)||!carousel.getItem(last))){carousel.fireEvent(loadItemsEvent,{ev:loadItemsEvent,first:first,last:last,num:last-first+1});}},_pagerChangeHandler:function(ev){var carousel=this,target=Event.getTarget(ev),page=target.value,item;if(page){item=carousel.getFirstVisibleOnPage(page);carousel._selectedItem=item;carousel.scrollTo(item);carousel.focus();}},_pagerClickHandler:function(ev){var carousel=this,css=carousel.CLASSES,target=Event.getTarget(ev),elNode=target.nodeName.toUpperCase(),val,stringIndex,page,item;if(Dom.hasClass(target,css.PAGER_ITEM)||Dom.hasClass(target.parentNode,css.PAGER_ITEM)){if(elNode=="EM"){target=target.parentNode;}
val=target.href;stringIndex=val.lastIndexOf("#");page=parseInt(val.substring(stringIndex+1),10);if(page!=-1){item=carousel.getFirstVisibleOnPage(page);carousel._selectedItem=item;carousel.scrollTo(item);carousel.focus();}
Event.preventDefault(ev);}},_parseCarousel:function(parent){var carousel=this,child,cssClass,domEl,found,node;cssClass=carousel.CLASSES;domEl=carousel.get("carouselEl");found=false;for(child=parent.firstChild;child;child=child.nextSibling){if(child.nodeType==1){node=child.nodeName;if(node.toUpperCase()==domEl){carousel._carouselEl=child;Dom.addClass(carousel._carouselEl,carousel.CLASSES.CAROUSEL_EL);found=true;}}}
return found;},_parseCarouselItems:function(){var carousel=this,cssClass=carousel.CLASSES,i=0,rows,child,domItemEl,elId,node,index=carousel.get("firstVisible"),parent=carousel._carouselEl;rows=carousel._rows;domItemEl=carousel.get("carouselItemEl");for(child=parent.firstChild;child;child=child.nextSibling){if(child.nodeType==1){node=child.nodeName;if(node.toUpperCase()==domItemEl){if(child.id){elId=child.id;}else{elId=Dom.generateId();child.setAttribute("id",elId);Dom.addClass(child,carousel.CLASSES.ITEM);}
carousel.addItem(child,index);index++;}}}},_parseCarouselNavigation:function(parent){var carousel=this,cfg,cssClass=carousel.CLASSES,el,i,j,nav,rv=false;nav=Dom.getElementsByClassName(cssClass.PREV_PAGE,"*",parent);if(nav.length>0){for(i in nav){if(nav.hasOwnProperty(i)){el=nav[i];if(el.nodeName=="INPUT"||el.nodeName=="BUTTON"||el.nodeName=="A"){carousel._navBtns.prev.push(el);}else{j=el.getElementsByTagName("INPUT");if(JS.isArray(j)&&j.length>0){carousel._navBtns.prev.push(j[0]);}else{j=el.getElementsByTagName("BUTTON");if(JS.isArray(j)&&j.length>0){carousel._navBtns.prev.push(j[0]);}}}}}
cfg={prev:nav};}
nav=Dom.getElementsByClassName(cssClass.NEXT_PAGE,"*",parent);if(nav.length>0){for(i in nav){if(nav.hasOwnProperty(i)){el=nav[i];if(el.nodeName=="INPUT"||el.nodeName=="BUTTON"||el.nodeName=="A"){carousel._navBtns.next.push(el);}else{j=el.getElementsByTagName("INPUT");if(JS.isArray(j)&&j.length>0){carousel._navBtns.next.push(j[0]);}else{j=el.getElementsByTagName("BUTTON");if(JS.isArray(j)&&j.length>0){carousel._navBtns.next.push(j[0]);}}}}}
if(cfg){cfg.next=nav;}else{cfg={next:nav};}}
if(cfg){carousel.set("navigation",cfg);rv=true;}
return rv;},_refreshUi:function(){var carousel=this,isVertical=carousel.get("isVertical"),firstVisible=carousel.get("firstVisible"),i,item,n,rsz,sz;if(carousel._itemsTable.numItems<1){return;}
sz=getCarouselItemSize.call(carousel,isVertical?"height":"width");item=carousel._itemsTable.items[firstVisible].id;sz=isVertical?getStyle(item,"width"):getStyle(item,"height");Dom.setStyle(carousel._carouselEl,isVertical?"width":"height",sz+"px");carousel._hasRendered=true;carousel.fireEvent(renderEvent);},_setCarouselOffset:function(offset){var carousel=this,which;which=carousel.get("isVertical")?"top":(carousel.get("isRtl")?"right":"left");Dom.setStyle(carousel._carouselEl,which,offset+"px");},_setupCarouselNavigation:function(){var carousel=this,btn,cfg,cssClass,nav,navContainer,nextButton,prevButton;cssClass=carousel.CLASSES;navContainer=Dom.getElementsByClassName(cssClass.NAVIGATION,"DIV",carousel.get("element"));if(navContainer.length===0){navContainer=createElement("DIV",{className:cssClass.NAVIGATION});carousel.insertBefore(navContainer,Dom.getFirstChild(carousel.get("element")));}else{navContainer=navContainer[0];}
carousel._pages.el=createElement("UL");navContainer.appendChild(carousel._pages.el);nav=carousel.get("navigation");if(JS.isString(nav.prev)||JS.isArray(nav.prev)){if(JS.isString(nav.prev)){nav.prev=[nav.prev];}
for(btn in nav.prev){if(nav.prev.hasOwnProperty(btn)){carousel._navBtns.prev.push(Dom.get(nav.prev[btn]));}}}else{prevButton=createElement("SPAN",{className:cssClass.BUTTON+cssClass.FIRST_NAV});Dom.setStyle(prevButton,"visibility","visible");btn=Dom.generateId();prevButton.innerHTML="<button type=\"button\" "+"id=\""+btn+"\" name=\""+
carousel.STRINGS.PREVIOUS_BUTTON_TEXT+"\">"+
carousel.STRINGS.PREVIOUS_BUTTON_TEXT+"</button>";navContainer.appendChild(prevButton);btn=Dom.get(btn);carousel._navBtns.prev=[btn];cfg={prev:[prevButton]};}
if(JS.isString(nav.next)||JS.isArray(nav.next)){if(JS.isString(nav.next)){nav.next=[nav.next];}
for(btn in nav.next){if(nav.next.hasOwnProperty(btn)){carousel._navBtns.next.push(Dom.get(nav.next[btn]));}}}else{nextButton=createElement("SPAN",{className:cssClass.BUTTON+cssClass.NEXT_NAV});Dom.setStyle(nextButton,"visibility","visible");btn=Dom.generateId();nextButton.innerHTML="<button type=\"button\" "+"id=\""+btn+"\" name=\""+
carousel.STRINGS.NEXT_BUTTON_TEXT+"\">"+
carousel.STRINGS.NEXT_BUTTON_TEXT+"</button>";navContainer.appendChild(nextButton);btn=Dom.get(btn);carousel._navBtns.next=[btn];if(cfg){cfg.next=[nextButton];}else{cfg={next:[nextButton]};}}
if(cfg){carousel.set("navigation",cfg);}
return navContainer;},_setClipContainerSize:function(clip,num){var carousel=this,isVertical=carousel.get("isVertical"),isRtl=carousel.get("isRtl"),rows=carousel._rows,cols=carousel._cols,reveal=carousel.get("revealAmount"),itemHeight=getCarouselItemSize.call(carousel,"height"),itemWidth=getCarouselItemSize.call(carousel,"width"),containerHeight,containerWidth;carousel._recomputeSize=(containerHeight===0);if(carousel._recomputeSize){carousel._hasRendered=false;return;}
clip=clip||carousel._clipEl;if(rows){containerHeight=itemHeight*rows;containerWidth=itemWidth*cols;}else{num=num||carousel.get("numVisible");if(isVertical){containerHeight=itemHeight*num;}else{containerWidth=itemWidth*num;}}
reveal=getRevealSize.call(carousel);if(isVertical){containerHeight+=(reveal*2);}else{containerWidth+=(reveal*2);}
if(isVertical){containerHeight+=getDimensions(carousel._carouselEl,"height");Dom.setStyle(clip,"height",containerHeight+"px");if(cols){containerWidth+=getDimensions(carousel._carouselEl,"width");Dom.setStyle(clip,"width",containerWidth+(0)+"px");}}else{containerWidth+=getDimensions(carousel._carouselEl,"width");Dom.setStyle(clip,"width",containerWidth+"px");if(rows){containerHeight+=getDimensions(carousel._carouselEl,"height");Dom.setStyle(clip,"height",containerHeight+"px");}}
if(clip){carousel._setContainerSize(clip);}},_setContainerSize:function(clip,attr){var carousel=this,config=carousel.CONFIG,cssClass=carousel.CLASSES,isVertical,isRtl,rows,cols,size;isVertical=carousel.get("isVertical");isRtl=carousel.get("isRtl");rows=carousel._rows;cols=carousel._cols;clip=clip||carousel._clipEl;attr=attr||(isVertical?"height":"width");size=parseFloat(Dom.getStyle(clip,attr),10);size=JS.isNumber(size)?size:0;if(isVertical){size+=getDimensions(carousel._carouselEl,"height")+
getStyle(carousel._navEl,"height");}else{size+=getDimensions(carousel._carouselEl,"width");}
if(!isVertical){if(size<config.HORZ_MIN_WIDTH){size=config.HORZ_MIN_WIDTH;carousel.addClass(cssClass.MIN_WIDTH);}}
carousel.setStyle(attr,size+"px");if(isVertical){size=getCarouselItemSize.call(carousel,"width");if(cols){size=size*cols;}
Dom.setStyle(carousel._carouselEl,"width",size+"px");if(size<config.VERT_MIN_WIDTH){size=config.VERT_MIN_WIDTH;carousel.addClass(cssClass.MIN_WIDTH);}
carousel.setStyle("width",size+"px");}else{size=getCarouselItemSize.call(carousel,"height");if(rows){size=size*rows;}
Dom.setStyle(carousel._carouselEl,"height",size+"px");}},_setFirstVisible:function(val){var carousel=this;if(val>=0&&val<carousel.get("numItems")){carousel.scrollTo(val);}else{val=carousel.get("firstVisible");}
return val;},_setNavigation:function(cfg){var carousel=this;if(cfg.prev){Event.on(cfg.prev,"click",scrollPageBackward,carousel);}
if(cfg.next){Event.on(cfg.next,"click",scrollPageForward,carousel);}},_setNumVisible:function(val){var carousel=this;carousel._setClipContainerSize(carousel._clipEl,val);},_numVisibleSetter:function(val){var carousel=this,numVisible=val;if(JS.isArray(val)){carousel._cols=val[0];carousel._rows=val[1];numVisible=val[0]*val[1];}
return numVisible;},_selectedItemSetter:function(val){var carousel=this;return(val<carousel.get("numItems"))?val:0;},_setNumItems:function(val){var carousel=this,num=carousel._itemsTable.numItems;if(JS.isArray(carousel._itemsTable.items)){if(carousel._itemsTable.items.length!=num){num=carousel._itemsTable.items.length;carousel._itemsTable.numItems=num;}}
if(val<num){while(num>val){carousel.removeItem(num-1);num--;}}
return val;},_setOrientation:function(val){var carousel=this,cssClass=carousel.CLASSES;if(val){carousel.replaceClass(cssClass.HORIZONTAL,cssClass.VERTICAL);}else{carousel.replaceClass(cssClass.VERTICAL,cssClass.HORIZONTAL);}
return val;},_setRevealAmount:function(val){var carousel=this;if(val>=0&&val<=100){val=parseInt(val,10);val=JS.isNumber(val)?val:0;carousel._setClipContainerSize();}else{val=carousel.get("revealAmount");}
return val;},_setSelectedItem:function(val){this._selectedItem=val;},_getNumPages:function(){return Math.ceil(parseInt(this.get("numItems"),10)/parseInt(this.get("numVisible"),10));},_getLastVisible:function(){var carousel=this;return carousel.get("currentPage")+1==carousel.get("numPages")?carousel.get("numItems")-1:carousel.get("firstVisible")+carousel.get("numVisible")-1;},_syncUiForItemAdd:function(obj){var attr,carousel=this,carouselEl=carousel._carouselEl,el,item,itemsTable=carousel._itemsTable,oel,pos,sibling,styles;pos=JS.isUndefined(obj.pos)?obj.newPos||itemsTable.numItems-1:obj.pos;if(!oel){item=itemsTable.items[pos]||{};el=carousel._createCarouselItem({className:item.className,styles:item.styles,content:item.item,id:item.id,pos:pos});if(JS.isUndefined(obj.pos)){if(!JS.isUndefined(itemsTable.loading[pos])){oel=itemsTable.loading[pos];}
if(oel){carouselEl.replaceChild(el,oel);delete itemsTable.loading[pos];}else{carouselEl.appendChild(el);}}else{if(!JS.isUndefined(itemsTable.items[obj.pos+1])){sibling=Dom.get(itemsTable.items[obj.pos+1].id);}
if(sibling){carouselEl.insertBefore(el,sibling);}else{}}}else{if(JS.isUndefined(obj.pos)){if(!Dom.isAncestor(carousel._carouselEl,oel)){carouselEl.appendChild(oel);}}else{if(!Dom.isAncestor(carouselEl,oel)){if(!JS.isUndefined(itemsTable.items[obj.pos+1])){carouselEl.insertBefore(oel,Dom.get(itemsTable.items[obj.pos+1].id));}}}}
if(!carousel._hasRendered){carousel._refreshUi();}
if(carousel.get("selectedItem")<0){carousel.set("selectedItem",carousel.get("firstVisible"));}
carousel._syncUiItems();},_syncUiForItemReplace:function(o){var carousel=this,carouselEl=carousel._carouselEl,itemsTable=carousel._itemsTable,pos=o.pos,item=o.newItem,oel=o.oldItem,el;el=carousel._createCarouselItem({className:item.className,styles:item.styles,content:item.item,id:oel.id});if((oel=Dom.get(oel.id))){oel.className=item.className;oel.styles=item.styles;oel.innerHTML=item.item;itemsTable.items[pos]=el;if(itemsTable.loading[pos]){itemsTable.numItems++;delete itemsTable.loading[pos];}}},_syncUiForItemRemove:function(obj){var carousel=this,carouselEl=carousel._carouselEl,el,item,num,pos;num=carousel.get("numItems");item=obj.item;pos=obj.pos;if(item&&(el=Dom.get(item.id))){if(el&&Dom.isAncestor(carouselEl,el)){Event.purgeElement(el,true);carouselEl.removeChild(el);}
if(carousel.get("selectedItem")==pos){pos=pos>=num?num-1:pos;}}else{}
carousel._syncUiItems();},_findClosestSibling:function(pos){var carousel=this,itemsTable=carousel._itemsTable,len=itemsTable.items.length,j=pos,sibling;while(j<len&&!sibling){sibling=itemsTable.items[++j];}
return sibling;},_syncUiForLazyLoading:function(obj){var carousel=this,carouselEl=carousel._carouselEl,itemsTable=carousel._itemsTable,len=itemsTable.items.length,sibling=carousel._findClosestSibling(obj.last),last=obj.last,first=last-carousel.get("numVisible")+1,el,j;for(var i=first;i<=last;i++){if(!itemsTable.loading[i]&&!itemsTable.items[i]){el=carousel._createCarouselItem({className:carousel.CLASSES.ITEM+" "+carousel.CLASSES.ITEM_LOADING,content:carousel.STRINGS.ITEM_LOADING_CONTENT,id:Dom.generateId()});if(el){if(sibling){sibling=Dom.get(sibling.id);if(sibling){carouselEl.insertBefore(el,sibling);}else{}}else{carouselEl.appendChild(el);}}
itemsTable.loading[i]=el;}}
carousel._syncUiItems();},_syncUiItems:function(){if(!syncUiOnItemInsert){return;}
var attr,carousel=this,numItems=carousel.get("numItems"),i,itemsTable=carousel._itemsTable,items=itemsTable.items,loading=itemsTable.loading,item,styles,updateStyles=false;for(i=0;i<numItems;i++){item=items[i]||loading[i];if(item&&item.id){styles=getCarouselItemPosition.call(carousel,i);item.styles=item.styles||{};for(attr in styles){if(item.styles[attr]!==styles[attr])
{updateStyles=true;item.styles[attr]=styles[attr];}}
if(updateStyles)
{setStyles(Dom.get(item.id),styles);}
updateStyles=false;}}},_updateNavButtons:function(el,setFocus){var children,cssClass=this.CLASSES,grandParent,parent=el.parentNode;if(!parent){return;}
grandParent=parent.parentNode;if(el.nodeName.toUpperCase()=="BUTTON"&&Dom.hasClass(parent,cssClass.BUTTON)){if(setFocus){if(grandParent){children=Dom.getChildren(grandParent);if(children){Dom.removeClass(children,cssClass.FOCUSSED_BUTTON);}}
Dom.addClass(parent,cssClass.FOCUSSED_BUTTON);}else{Dom.removeClass(parent,cssClass.FOCUSSED_BUTTON);}}},_updatePagerButtons:function(){if(!syncUiOnItemInsert){return;}
var carousel=this,css=carousel.CLASSES,cur=carousel._pages.cur,el,html,i,item,n=carousel.get("numVisible"),num=carousel._pages.num,pager=carousel._pages.el;if(num===0||!pager){return;}
Dom.setStyle(pager,"visibility","hidden");while(pager.firstChild){pager.removeChild(pager.firstChild);}
for(i=0;i<num;i++){el=document.createElement("LI");if(i===0){Dom.addClass(el,css.FIRST_PAGE);}
if(i==cur){Dom.addClass(el,css.SELECTED_NAV);}
html="<a class="+css.PAGER_ITEM+" href=\"#"+(i+1)+"\" tabindex=\"0\"><em>"+
carousel.STRINGS.PAGER_PREFIX_TEXT+" "+(i+1)+"</em></a>";el.innerHTML=html;pager.appendChild(el);}
Dom.setStyle(pager,"visibility","visible");},_updatePagerMenu:function(){var carousel=this,css=carousel.CLASSES,cur=carousel._pages.cur,el,i,item,n=carousel.get("numVisible"),num=carousel._pages.num,pager=carousel._pages.el,sel;if(num===0||!pager){return;}
sel=document.createElement("SELECT");if(!sel){return;}
Dom.setStyle(pager,"visibility","hidden");while(pager.firstChild){pager.removeChild(pager.firstChild);}
for(i=0;i<num;i++){el=document.createElement("OPTION");el.value=i+1;el.innerHTML=carousel.STRINGS.PAGER_PREFIX_TEXT+" "+(i+1);if(i==cur){el.setAttribute("selected","selected");}
sel.appendChild(el);}
el=document.createElement("FORM");if(!el){}else{el.appendChild(sel);pager.appendChild(el);}
Event.addListener(sel,"change",carousel._pagerChangeHandler,this,true);Dom.setStyle(pager,"visibility","visible");},_updateTabIndex:function(el){var carousel=this;if(el){if(carousel._focusableItemEl){carousel._focusableItemEl.tabIndex=-1;}
carousel._focusableItemEl=el;el.tabIndex=0;}},_validateAnimation:function(cfg){var rv=true;if(JS.isObject(cfg)){if(cfg.speed){rv=rv&&JS.isNumber(cfg.speed);}
if(cfg.effect){rv=rv&&JS.isFunction(cfg.effect);}else if(!JS.isUndefined(YAHOO.util.Easing)){cfg.effect=YAHOO.util.Easing.easeOut;}}else{rv=false;}
return rv;},_validateFirstVisible:function(val){var carousel=this,numItems=carousel.get("numItems");if(JS.isNumber(val)){if(numItems===0&&val==numItems){return true;}else{return(val>=0&&val<numItems);}}
return false;},_validateNavigation:function(cfg){var i;if(!JS.isObject(cfg)){return false;}
if(cfg.prev){if(!JS.isArray(cfg.prev)){return false;}
for(i in cfg.prev){if(cfg.prev.hasOwnProperty(i)){if(!JS.isString(cfg.prev[i].nodeName)){return false;}}}}
if(cfg.next){if(!JS.isArray(cfg.next)){return false;}
for(i in cfg.next){if(cfg.next.hasOwnProperty(i)){if(!JS.isString(cfg.next[i].nodeName)){return false;}}}}
return true;},_validateNumItems:function(val){return JS.isNumber(val)&&(val>=0);},_validateNumVisible:function(val){var rv=false;if(JS.isNumber(val)){rv=val>0&&val<=this.get("numItems");}else if(JS.isArray(val)){if(JS.isNumber(val[0])&&JS.isNumber(val[1])){rv=val[0]*val[1]>0&&val.length==2;}}
return rv;},_validateRevealAmount:function(val){var rv=false;if(JS.isNumber(val)){rv=val>=0&&val<100;}
return rv;},_validateScrollIncrement:function(val){var rv=false;if(JS.isNumber(val)){rv=(val>0&&val<this.get("numItems"));}
return rv;}});})();YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"2.9.0",build:"2800"});YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"2.9.0",build:"2800"});
function Chat(){var messagesLayer=null;var usersLayer=null;var inputLine=null;var inputBtn=null;var timeout=5000;var charLimit=200;var errMsg='Session expired. Please log in from the start page.';var timeoutID=null;var msgID=0;var top=this;this.init=function(msg,usr,input,btn,to,limit,emsg){messagesLayer=msg;usersLayer=usr;inputLine=input;inputBtn=btn;charLimit=limit;errMsg=emsg;inputBtn.onclick=this.sendLine;inputLine.onkeydown=this.sendLineOnEnter;inputLine.onkeyup=this.truncate;timeout=to;top.poll();}
this.close=function(){clearTimeout(timeoutID);}
this.truncate=function(){if(inputLine.value.length>charLimit){inputLine.value=inputLine.value.substr(0,charLimit);}}
this.poll=function(){var params="id="+msgID;ajaxRequestPost('?action=ChatWindow&function=poll',params,top.handleResponse);clearTimeout(timeoutID);timeoutID=setTimeout(top.poll,timeout);}
this.sendLine=function(){if(inputLine.value!=""){var params="chatline="+$URLencoder.urlencode(inputLine.value)+"&id="+msgID;ajaxRequestPost('?action=ChatWindow&function=sendLine',params,top.handleResponse);inputLine.value="";clearTimeout(timeoutID);timeoutID=setTimeout(top.poll,timeout);}}
this.sendLineOnEnter=function(e){if(!e)e=window.event;if(e.which)var keycode=e.which;else var keycode=e.keyCode;if(keycode==13)top.sendLine();}
this.time=function(t){t=t*1000;var time=new Date(t);var h=time.getHours();if(h<10)h='0'+h;var m=time.getMinutes();if(m<10)m='0'+m;var s=time.getSeconds();if(s<10)s='0'+s;return h+':'+m+':'+s;}
this.insert=function(msg){if(!messagesLayer)return;var messageContainer=messagesLayer.parentNode;var oldTop=messageContainer.scrollTop;if(messageContainer.scrollTop>=messageContainer.scrollHeight-messageContainer.clientHeight)var scroll=true;for(var i=0;i<msg.length;i++){msgID=msg[i][0];var newLI=document.createElement("li");newLI.id='chatMessage'+msgID;var newMsg='['+top.time(msg[i][1])+'] '+msg[i][2]+': '+msg[i][3];newLI.appendChild(document.createTextNode(newMsg,300));messagesLayer.appendChild(newLI);}
if(scroll){messageContainer.scrollTop=messageContainer.scrollHeight;}
else{messageContainer.scrollTop=oldTop;}}
this.scrolldown=function(){if(!messagesLayer)return;var messageContainer=messagesLayer.parentNode;messageContainer.scrollTop=messageContainer.scrollHeight;}
this.userlist=function(msg){if(!usersLayer)return;usersLayer.options.length=0;for(var i=0;i<msg.length;i++){var opt=new Option(msg[i][0],msg[i][0]);if(msg[i][1])opt.disabled='disabled';usersLayer.options[usersLayer.length]=opt;}}
this.handleResponse=function(tasks){if(tasks=='')return;try{tasks=JSON.parse(tasks);}catch(e){clearTimeout(timeoutID);alert(errMsg);return;}
for(var i=1;i<tasks.length;i++){switch(tasks[i][0]){case'insert':top.insert(tasks[i][1]);break;case'userlist':top.userlist(tasks[i][1]);break;default:break;}}}}
(function(){var E=YAHOO.util.Dom,A=YAHOO.util.Event,C=YAHOO.lang;var B=function(F,D){var G={element:F,attributes:D||{}};B.superclass.constructor.call(this,G.element,G.attributes);};B._instances={};B.getResizeById=function(D){if(B._instances[D]){return B._instances[D];}return false;};YAHOO.extend(B,YAHOO.util.Element,{CSS_RESIZE:"yui-resize",CSS_DRAG:"yui-draggable",CSS_HOVER:"yui-resize-hover",CSS_PROXY:"yui-resize-proxy",CSS_WRAP:"yui-resize-wrap",CSS_KNOB:"yui-resize-knob",CSS_HIDDEN:"yui-resize-hidden",CSS_HANDLE:"yui-resize-handle",CSS_STATUS:"yui-resize-status",CSS_GHOST:"yui-resize-ghost",CSS_RESIZING:"yui-resize-resizing",_resizeEvent:null,dd:null,browser:YAHOO.env.ua,_locked:null,_positioned:null,_dds:null,_wrap:null,_proxy:null,_handles:null,_currentHandle:null,_currentDD:null,_cache:null,_active:null,_createProxy:function(){if(this.get("proxy")){this._proxy=document.createElement("div");this._proxy.className=this.CSS_PROXY;this._proxy.style.height=this.get("element").clientHeight+"px";this._proxy.style.width=this.get("element").clientWidth+"px";this._wrap.parentNode.appendChild(this._proxy);}else{this.set("animate",false);}},_createWrap:function(){this._positioned=false;if(this.get("wrap")===false){switch(this.get("element").tagName.toLowerCase()){case"img":case"textarea":case"input":case"iframe":case"select":this.set("wrap",true);break;}}if(this.get("wrap")===true){this._wrap=document.createElement("div");this._wrap.id=this.get("element").id+"_wrap";this._wrap.className=this.CSS_WRAP;if(this.get("element").tagName.toLowerCase()=="textarea"){E.addClass(this._wrap,"yui-resize-textarea");}E.setStyle(this._wrap,"width",this.get("width")+"px");E.setStyle(this._wrap,"height",this.get("height")+"px");E.setStyle(this._wrap,"z-index",this.getStyle("z-index"));this.setStyle("z-index",0);var F=E.getStyle(this.get("element"),"position");E.setStyle(this._wrap,"position",((F=="static")?"relative":F));E.setStyle(this._wrap,"top",E.getStyle(this.get("element"),"top"));E.setStyle(this._wrap,"left",E.getStyle(this.get("element"),"left"));if(E.getStyle(this.get("element"),"position")=="absolute"){this._positioned=true;E.setStyle(this.get("element"),"position","relative");E.setStyle(this.get("element"),"top","0");E.setStyle(this.get("element"),"left","0");}var D=this.get("element").parentNode;D.replaceChild(this._wrap,this.get("element"));this._wrap.appendChild(this.get("element"));}else{this._wrap=this.get("element");if(E.getStyle(this._wrap,"position")=="absolute"){this._positioned=true;}}if(this.get("draggable")){this._setupDragDrop();}if(this.get("hover")){E.addClass(this._wrap,this.CSS_HOVER);}if(this.get("knobHandles")){E.addClass(this._wrap,this.CSS_KNOB);}if(this.get("hiddenHandles")){E.addClass(this._wrap,this.CSS_HIDDEN);}E.addClass(this._wrap,this.CSS_RESIZE);},_setupDragDrop:function(){E.addClass(this._wrap,this.CSS_DRAG);this.dd=new YAHOO.util.DD(this._wrap,this.get("id")+"-resize",{dragOnly:true,useShim:this.get("useShim")});this.dd.on("dragEvent",function(){this.fireEvent("dragEvent",arguments);},this,true);},_createHandles:function(){this._handles={};this._dds={};var G=this.get("handles");for(var F=0;F<G.length;F++){this._handles[G[F]]=document.createElement("div");this._handles[G[F]].id=E.generateId(this._handles[G[F]]);this._handles[G[F]].className=this.CSS_HANDLE+" "+this.CSS_HANDLE+"-"+G[F];var D=document.createElement("div");D.className=this.CSS_HANDLE+"-inner-"+G[F];this._handles[G[F]].appendChild(D);this._wrap.appendChild(this._handles[G[F]]);A.on(this._handles[G[F]],"mouseover",this._handleMouseOver,this,true);A.on(this._handles[G[F]],"mouseout",this._handleMouseOut,this,true);this._dds[G[F]]=new YAHOO.util.DragDrop(this._handles[G[F]],this.get("id")+"-handle-"+G,{useShim:this.get("useShim")});this._dds[G[F]].setPadding(15,15,15,15);this._dds[G[F]].on("startDragEvent",this._handleStartDrag,this._dds[G[F]],this);this._dds[G[F]].on("mouseDownEvent",this._handleMouseDown,this._dds[G[F]],this);}this._status=document.createElement("span");this._status.className=this.CSS_STATUS;document.body.insertBefore(this._status,document.body.firstChild);},_ieSelectFix:function(){return false;},_ieSelectBack:null,_setAutoRatio:function(D){if(this.get("autoRatio")){if(D&&D.shiftKey){this.set("ratio",true);}else{this.set("ratio",this._configs.ratio._initialConfig.value);}}},_handleMouseDown:function(D){if(this._locked){return false;}if(E.getStyle(this._wrap,"position")=="absolute"){this._positioned=true;}if(D){this._setAutoRatio(D);}if(this.browser.ie){this._ieSelectBack=document.body.onselectstart;document.body.onselectstart=this._ieSelectFix;}},_handleMouseOver:function(G){if(this._locked){return false;}E.removeClass(this._wrap,this.CSS_RESIZE);if(this.get("hover")){E.removeClass(this._wrap,this.CSS_HOVER);}var D=A.getTarget(G);if(!E.hasClass(D,this.CSS_HANDLE)){D=D.parentNode;}if(E.hasClass(D,this.CSS_HANDLE)&&!this._active){E.addClass(D,this.CSS_HANDLE+"-active");for(var F in this._handles){if(C.hasOwnProperty(this._handles,F)){if(this._handles[F]==D){E.addClass(D,this.CSS_HANDLE+"-"+F+"-active");break;}}}}E.addClass(this._wrap,this.CSS_RESIZE);},_handleMouseOut:function(G){E.removeClass(this._wrap,this.CSS_RESIZE);if(this.get("hover")&&!this._active){E.addClass(this._wrap,this.CSS_HOVER);}var D=A.getTarget(G);if(!E.hasClass(D,this.CSS_HANDLE)){D=D.parentNode;}if(E.hasClass(D,this.CSS_HANDLE)&&!this._active){E.removeClass(D,this.CSS_HANDLE+"-active");for(var F in this._handles){if(C.hasOwnProperty(this._handles,F)){if(this._handles[F]==D){E.removeClass(D,this.CSS_HANDLE+"-"+F+"-active");break;}}}}E.addClass(this._wrap,this.CSS_RESIZE);},_handleStartDrag:function(G,F){var D=F.getDragEl();if(E.hasClass(D,this.CSS_HANDLE)){if(E.getStyle(this._wrap,"position")=="absolute"){this._positioned=true;}this._active=true;this._currentDD=F;if(this._proxy){this._proxy.style.visibility="visible";this._proxy.style.zIndex="1000";this._proxy.style.height=this.get("element").clientHeight+"px";this._proxy.style.width=this.get("element").clientWidth+"px";}for(var H in this._handles){if(C.hasOwnProperty(this._handles,H)){if(this._handles[H]==D){this._currentHandle=H;var I="_handle_for_"+H;E.addClass(D,this.CSS_HANDLE+"-"+H+"-active");F.on("dragEvent",this[I],this,true);F.on("mouseUpEvent",this._handleMouseUp,this,true);break;}}}E.addClass(D,this.CSS_HANDLE+"-active");if(this.get("proxy")){var J=E.getXY(this.get("element"));E.setXY(this._proxy,J);if(this.get("ghost")){this.addClass(this.CSS_GHOST);}}E.addClass(this._wrap,this.CSS_RESIZING);this._setCache();this._updateStatus(this._cache.height,this._cache.width,this._cache.top,this._cache.left);this.fireEvent("startResize",{type:"startresize",target:this});}},_setCache:function(){this._cache.xy=E.getXY(this._wrap);E.setXY(this._wrap,this._cache.xy);this._cache.height=this.get("clientHeight");this._cache.width=this.get("clientWidth");this._cache.start.height=this._cache.height;this._cache.start.width=this._cache.width;this._cache.start.top=this._cache.xy[1];this._cache.start.left=this._cache.xy[0];this._cache.top=this._cache.xy[1];this._cache.left=this._cache.xy[0];this.set("height",this._cache.height,true);this.set("width",this._cache.width,true);},_handleMouseUp:function(F){this._active=false;var G="_handle_for_"+this._currentHandle;this._currentDD.unsubscribe("dragEvent",this[G],this,true);this._currentDD.unsubscribe("mouseUpEvent",this._handleMouseUp,this,true);if(this._proxy){this._proxy.style.visibility="hidden";this._proxy.style.zIndex="-1";if(this.get("setSize")){this.resize(F,this._cache.height,this._cache.width,this._cache.top,this._cache.left,true);}else{this.fireEvent("resize",{ev:"resize",target:this,height:this._cache.height,width:this._cache.width,top:this._cache.top,left:this._cache.left});}if(this.get("ghost")){this.removeClass(this.CSS_GHOST);}}if(this.get("hover")){E.addClass(this._wrap,this.CSS_HOVER);}if(this._status){E.setStyle(this._status,"display","none");}if(this.browser.ie){document.body.onselectstart=this._ieSelectBack;}if(this.browser.ie){E.removeClass(this._wrap,this.CSS_RESIZE);}for(var D in this._handles){if(C.hasOwnProperty(this._handles,D)){E.removeClass(this._handles[D],this.CSS_HANDLE+"-active");}}if(this.get("hover")&&!this._active){E.addClass(this._wrap,this.CSS_HOVER);}E.removeClass(this._wrap,this.CSS_RESIZING);E.removeClass(this._handles[this._currentHandle],this.CSS_HANDLE+"-"+this._currentHandle+"-active");E.removeClass(this._handles[this._currentHandle],this.CSS_HANDLE+"-active");if(this.browser.ie){E.addClass(this._wrap,this.CSS_RESIZE);}this._resizeEvent=null;this._currentHandle=null;if(!this.get("animate")){this.set("height",this._cache.height,true);this.set("width",this._cache.width,true);}this.fireEvent("endResize",{ev:"endResize",target:this,height:this._cache.height,width:this._cache.width,top:this._cache.top,left:this._cache.left});},_setRatio:function(K,N,Q,I){var O=K,G=N;if(this.get("ratio")){var P=this._cache.height,H=this._cache.width,F=parseInt(this.get("height"),10),L=parseInt(this.get("width"),10),M=this.get("maxHeight"),R=this.get("minHeight"),D=this.get("maxWidth"),J=this.get("minWidth");switch(this._currentHandle){case"l":K=F*(N/L);K=Math.min(Math.max(R,K),M);N=L*(K/F);Q=(this._cache.start.top-(-((F-K)/2)));I=(this._cache.start.left-(-((L-N))));break;case"r":K=F*(N/L);K=Math.min(Math.max(R,K),M);N=L*(K/F);Q=(this._cache.start.top-(-((F-K)/2)));break;case"t":N=L*(K/F);K=F*(N/L);I=(this._cache.start.left-(-((L-N)/2)));Q=(this._cache.start.top-(-((F-K))));break;case"b":N=L*(K/F);K=F*(N/L);I=(this._cache.start.left-(-((L-N)/2)));break;case"bl":K=F*(N/L);N=L*(K/F);I=(this._cache.start.left-(-((L-N))));break;case"br":K=F*(N/L);N=L*(K/F);break;case"tl":K=F*(N/L);N=L*(K/F);I=(this._cache.start.left-(-((L-N))));Q=(this._cache.start.top-(-((F-K))));break;case"tr":K=F*(N/L);N=L*(K/F);I=(this._cache.start.left);Q=(this._cache.start.top-(-((F-K))));break;}O=this._checkHeight(K);G=this._checkWidth(N);if((O!=K)||(G!=N)){Q=0;I=0;if(O!=K){G=this._cache.width;}if(G!=N){O=this._cache.height;}}}return[O,G,Q,I];},_updateStatus:function(K,G,J,F){if(this._resizeEvent&&(!C.isString(this._resizeEvent))){K=((K===0)?this._cache.start.height:K);G=((G===0)?this._cache.start.width:G);var I=parseInt(this.get("height"),10),D=parseInt(this.get("width"),10);if(isNaN(I)){I=parseInt(K,10);}if(isNaN(D)){D=parseInt(G,10);}var L=(parseInt(K,10)-I);var H=(parseInt(G,10)-D);this._cache.offsetHeight=L;this._cache.offsetWidth=H;if(this.get("status")){E.setStyle(this._status,"display","inline");this._status.innerHTML="<strong>"+parseInt(K,10)+" x "+parseInt(G,10)+"</strong><em>"+((L>0)?"+":"")+L+" x "+((H>0)?"+":"")+H+"</em>";E.setXY(this._status,[A.getPageX(this._resizeEvent)+12,A.getPageY(this._resizeEvent)+12]);}}},lock:function(D){this._locked=true;if(D&&this.dd){E.removeClass(this._wrap,"yui-draggable");this.dd.lock();}return this;},unlock:function(D){this._locked=false;if(D&&this.dd){E.addClass(this._wrap,"yui-draggable");this.dd.unlock();}return this;},isLocked:function(){return this._locked;},reset:function(){this.resize(null,this._cache.start.height,this._cache.start.width,this._cache.start.top,this._cache.start.left,true);return this;},resize:function(M,J,P,Q,H,F,K){if(this._locked){return false;}this._resizeEvent=M;var G=this._wrap,I=this.get("animate"),O=true;if(this._proxy&&!F){G=this._proxy;I=false;}this._setAutoRatio(M);if(this._positioned){if(this._proxy){Q=this._cache.top-Q;H=this._cache.left-H;}}var L=this._setRatio(J,P,Q,H);J=parseInt(L[0],10);P=parseInt(L[1],10);Q=parseInt(L[2],10);H=parseInt(L[3],10);if(Q==0){Q=E.getY(G);}if(H==0){H=E.getX(G);}if(this._positioned){if(this._proxy&&F){if(!I){G.style.top=this._proxy.style.top;G.style.left=this._proxy.style.left;}else{Q=this._proxy.style.top;H=this._proxy.style.left;}}else{if(!this.get("ratio")&&!this._proxy){Q=this._cache.top+-(Q);H=this._cache.left+-(H);}if(Q){if(this.get("minY")){if(Q<this.get("minY")){Q=this.get("minY");}}if(this.get("maxY")){if(Q>this.get("maxY")){Q=this.get("maxY");}}}if(H){if(this.get("minX")){if(H<this.get("minX")){H=this.get("minX");}}if(this.get("maxX")){if((H+P)>this.get("maxX")){H=(this.get("maxX")-P);}}}}}if(!K){var N=this.fireEvent("beforeResize",{ev:"beforeResize",target:this,height:J,width:P,top:Q,left:H});if(N===false){return false;}}this._updateStatus(J,P,Q,H);if(this._positioned){if(this._proxy&&F){}else{if(Q){E.setY(G,Q);this._cache.top=Q;}if(H){E.setX(G,H);this._cache.left=H;}}}if(J){if(!I){O=true;if(this._proxy&&F){if(!this.get("setSize")){O=false;}}if(O){G.style.height=J+"px";}if((this._proxy&&F)||!this._proxy){if(this._wrap!=this.get("element")){this.get("element").style.height=J+"px";}}}this._cache.height=J;}if(P){this._cache.width=P;if(!I){O=true;if(this._proxy&&F){if(!this.get("setSize")){O=false;}}if(O){G.style.width=P+"px";}if((this._proxy&&F)||!this._proxy){if(this._wrap!=this.get("element")){this.get("element").style.width=P+"px";}}}}if(I){if(YAHOO.util.Anim){var D=new YAHOO.util.Anim(G,{height:{to:this._cache.height},width:{to:this._cache.width}},this.get("animateDuration"),this.get("animateEasing"));if(this._positioned){if(Q){D.attributes.top={to:parseInt(Q,10)};}if(H){D.attributes.left={to:parseInt(H,10)};}}if(this._wrap!=this.get("element")){D.onTween.subscribe(function(){this.get("element").style.height=G.style.height;this.get("element").style.width=G.style.width;},this,true);}D.onComplete.subscribe(function(){this.set("height",J);this.set("width",P);this.fireEvent("resize",{ev:"resize",target:this,height:J,width:P,top:Q,left:H});},this,true);D.animate();}}else{if(this._proxy&&!F){this.fireEvent("proxyResize",{ev:"proxyresize",target:this,height:J,width:P,top:Q,left:H});}else{this.fireEvent("resize",{ev:"resize",target:this,height:J,width:P,top:Q,left:H});}}return this;},_handle_for_br:function(F){var G=this._setWidth(F.e);var D=this._setHeight(F.e);this.resize(F.e,D,G,0,0);},_handle_for_bl:function(G){var H=this._setWidth(G.e,true);var F=this._setHeight(G.e);var D=(H-this._cache.width);this.resize(G.e,F,H,0,D);},_handle_for_tl:function(G){var I=this._setWidth(G.e,true);var F=this._setHeight(G.e,true);var H=(F-this._cache.height);var D=(I-this._cache.width);this.resize(G.e,F,I,H,D);},_handle_for_tr:function(F){var H=this._setWidth(F.e);var D=this._setHeight(F.e,true);var G=(D-this._cache.height);this.resize(F.e,D,H,G,0);},_handle_for_r:function(D){this._dds.r.setYConstraint(0,0);var F=this._setWidth(D.e);this.resize(D.e,0,F,0,0);},_handle_for_l:function(F){this._dds.l.setYConstraint(0,0);var G=this._setWidth(F.e,true);var D=(G-this._cache.width);this.resize(F.e,0,G,0,D);},_handle_for_b:function(F){this._dds.b.setXConstraint(0,0);var D=this._setHeight(F.e);this.resize(F.e,D,0,0,0);},_handle_for_t:function(F){this._dds.t.setXConstraint(0,0);var D=this._setHeight(F.e,true);var G=(D-this._cache.height);this.resize(F.e,D,0,G,0);},_setWidth:function(H,J){var I=this._cache.xy[0],G=this._cache.width,D=A.getPageX(H),F=(D-I);if(J){F=(I-D)+parseInt(this.get("width"),10);}F=this._snapTick(F,this.get("xTicks"));F=this._checkWidth(F);return F;},_checkWidth:function(D){if(this.get("minWidth")){if(D<=this.get("minWidth")){D=this.get("minWidth");}}if(this.get("maxWidth")){if(D>=this.get("maxWidth")){D=this.get("maxWidth");}}return D;},_checkHeight:function(D){if(this.get("minHeight")){if(D<=this.get("minHeight")){D=this.get("minHeight");}}if(this.get("maxHeight")){if(D>=this.get("maxHeight")){D=this.get("maxHeight");}}return D;},_setHeight:function(G,I){var H=this._cache.xy[1],F=this._cache.height,J=A.getPageY(G),D=(J-H);if(I){D=(H-J)+parseInt(this.get("height"),10);}D=this._snapTick(D,this.get("yTicks"));D=this._checkHeight(D);return D;},_snapTick:function(G,F){if(!G||!F){return G;}var H=G;var D=G%F;if(D>0){if(D>(F/2)){H=G+(F-D);}else{H=G-D;}}return H;},init:function(H,F){this._locked=false;this._cache={xy:[],height:0,width:0,top:0,left:0,offsetHeight:0,offsetWidth:0,start:{height:0,width:0,top:0,left:0}};B.superclass.init.call(this,H,F);this.set("setSize",this.get("setSize"));if(F.height){this.set("height",parseInt(F.height,10));}else{var G=this.getStyle("height");if(G=="auto"){this.set("height",parseInt(this.get("element").offsetHeight,10));}}if(F.width){this.set("width",parseInt(F.width,10));}else{var D=this.getStyle("width");if(D=="auto"){this.set("width",parseInt(this.get("element").offsetWidth,10));}}var I=H;if(!C.isString(I)){I=E.generateId(I);}B._instances[I]=this;this._active=false;this._createWrap();this._createProxy();this._createHandles();},getProxyEl:function(){return this._proxy;},getWrapEl:function(){return this._wrap;},getStatusEl:function(){return this._status;},getActiveHandleEl:function(){return this._handles[this._currentHandle];},isActive:function(){return((this._active)?true:false);},initAttributes:function(D){B.superclass.initAttributes.call(this,D);this.setAttributeConfig("useShim",{value:((D.useShim===true)?true:false),validator:YAHOO.lang.isBoolean,method:function(F){for(var G in this._dds){if(C.hasOwnProperty(this._dds,G)){this._dds[G].useShim=F;}}if(this.dd){this.dd.useShim=F;}}});this.setAttributeConfig("setSize",{value:((D.setSize===false)?false:true),validator:YAHOO.lang.isBoolean});this.setAttributeConfig("wrap",{writeOnce:true,validator:YAHOO.lang.isBoolean,value:D.wrap||false});this.setAttributeConfig("handles",{writeOnce:true,value:D.handles||["r","b","br"],validator:function(F){if(C.isString(F)&&F.toLowerCase()=="all"){F=["t","b","r","l","bl","br","tl","tr"];}if(!C.isArray(F)){F=F.replace(/, /g,",");F=F.split(",");}this._configs.handles.value=F;}});this.setAttributeConfig("width",{value:D.width||parseInt(this.getStyle("width"),10),validator:YAHOO.lang.isNumber,method:function(F){F=parseInt(F,10);if(F>0){if(this.get("setSize")){this.setStyle("width",F+"px");}this._cache.width=F;this._configs.width.value=F;}}});this.setAttributeConfig("height",{value:D.height||parseInt(this.getStyle("height"),10),validator:YAHOO.lang.isNumber,method:function(F){F=parseInt(F,10);if(F>0){if(this.get("setSize")){this.setStyle("height",F+"px");}this._cache.height=F;this._configs.height.value=F;}}});this.setAttributeConfig("minWidth",{value:D.minWidth||15,validator:YAHOO.lang.isNumber});this.setAttributeConfig("minHeight",{value:D.minHeight||15,validator:YAHOO.lang.isNumber});this.setAttributeConfig("maxWidth",{value:D.maxWidth||10000,validator:YAHOO.lang.isNumber});this.setAttributeConfig("maxHeight",{value:D.maxHeight||10000,validator:YAHOO.lang.isNumber});this.setAttributeConfig("minY",{value:D.minY||false});this.setAttributeConfig("minX",{value:D.minX||false});this.setAttributeConfig("maxY",{value:D.maxY||false});this.setAttributeConfig("maxX",{value:D.maxX||false});this.setAttributeConfig("animate",{value:D.animate||false,validator:function(G){var F=true;if(!YAHOO.util.Anim){F=false;}return F;}});this.setAttributeConfig("animateEasing",{value:D.animateEasing||function(){var F=false;if(YAHOO.util.Easing&&YAHOO.util.Easing.easeOut){F=YAHOO.util.Easing.easeOut;}return F;}()});this.setAttributeConfig("animateDuration",{value:D.animateDuration||0.5});this.setAttributeConfig("proxy",{value:D.proxy||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("ratio",{value:D.ratio||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("ghost",{value:D.ghost||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("draggable",{value:D.draggable||false,validator:YAHOO.lang.isBoolean,method:function(F){if(F&&this._wrap){this._setupDragDrop();}else{if(this.dd){E.removeClass(this._wrap,this.CSS_DRAG);this.dd.unreg();}}}});this.setAttributeConfig("hover",{value:D.hover||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("hiddenHandles",{value:D.hiddenHandles||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("knobHandles",{value:D.knobHandles||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("xTicks",{value:D.xTicks||false});this.setAttributeConfig("yTicks",{value:D.yTicks||false});this.setAttributeConfig("status",{value:D.status||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("autoRatio",{value:D.autoRatio||false,validator:YAHOO.lang.isBoolean});},destroy:function(){for(var F in this._handles){if(C.hasOwnProperty(this._handles,F)){A.purgeElement(this._handles[F]);this._handles[F].parentNode.removeChild(this._handles[F]);}}if(this._proxy){this._proxy.parentNode.removeChild(this._proxy);}if(this._status){this._status.parentNode.removeChild(this._status);}if(this.dd){this.dd.unreg();E.removeClass(this._wrap,this.CSS_DRAG);}if(this._wrap!=this.get("element")){this.setStyle("position","");this.setStyle("top","");this.setStyle("left","");this._wrap.parentNode.replaceChild(this.get("element"),this._wrap);}this.removeClass(this.CSS_RESIZE);delete YAHOO.util.Resize._instances[this.get("id")];for(var D in this){if(C.hasOwnProperty(this,D)){this[D]=null;delete this[D];}}},toString:function(){if(this.get){return"Resize (#"+this.get("id")+")";}return"Resize Utility";}});YAHOO.util.Resize=B;})();YAHOO.register("resize",YAHOO.util.Resize,{version:"2.8.1",build:"19"});
var counter=0;var startX=0;var startXOld=startX;var startY=0;var startYOld=startY;var startId='';var nextPositionX=0;var nextPositionY=0;var showDisableCheckbox=true;var defaultClass='allAdvisors';var lightenedClass=defaultClass+' lighten';function Tutorial(){var that=this;var arrow=null;var showTutorialAdvisor;var tutorialAdvisorXCoordinate;var tutorialAdvisorYCoordinate;var currentQuest;var currentQuestMessageDisplayed=false;var currentView;var languageDirection;var phpdata;var capitalId;var allreadyStartedPlunderMoves=false;this.setArrow=function(){that.arrow=Dom.get('arrow');}
this.setCurrentQuest=function(quest){that.currentQuest=quest;}
this.getCurrentQuest=function(){return that.currentQuest;}
this.setCurrentView=function(name){that.currentView=name;}
this.getCurrentView=function(){return that.currentView;}
this.setLanguageDirection=function(dir){that.languageDirection=dir;}
this.getLanguageDirection=function(){return that.languageDirection;}
this.setArrowPosition=function(x,y,id){window.startX=x;window.startY=y;if(id==null){window.startId='';}else{window.startId=id;}}
this.setCapitalId=function(x){that.capitalId=x;}
this.setTutorialAdvisorCoordinates=function(x,y){that.tutorialAdvisorXCoordinate=x;that.tutorialAdvisorYCoordinate=y;}
this.activateTutorialAdvisor=function(show){that.showTutorialAdvisor=show;}
this.setCurrentQuestMessageDisplayed=function(wasDisplayed){that.currentQuestMessageDisplayed=wasDisplayed;}
this.showMessage=function(){Dom.get("tutorialMessage").style.display="block";Dom.get("advisorImage").style.display="none";that.arrow.style.display="none";ajaxRequest("?action=TutorialOperations&function=messageWasDisplayed&quest="+this.currentQuest);}
this.hideMessage=function(){Dom.get("tutorialMessage").style.display="none";if(Dom.get("advisorImage")){Dom.get("advisorImage").style.display="block";}
if(window.startXOld==that.tutorialAdvisorXCoordinate&&window.startYOld==that.tutorialAdvisorYCoordinate&&nextPositionX>0&&nextPositionY>0){window.startX=nextPositionX;window.startY=nextPositionY;}
if(!that.allreadyStartedPlunderMoves){that.animateArrow();}}
this.toggleMessage=function(){if(Dom.get("tutorialMessage").style.display=="block"){that.hideMessage();}else{that.showMessage();}}
this.goToNextState=function(){ajaxRequest("?action=TutorialOperations&function=goToNextState");}
this.showMessageAndGoToNextState=function(){if(!that.showTutorialAdvisor){return;}
Dom.get("tutorialAdvisorLink").onclick=function(){that.showMessage();that.goToNextState();}}
this.setAdvisorClass=function(advisorClassName){if(!that.showTutorialAdvisor){return;}
window.defaultClass=advisorClassName;Dom.get("advisorImage").className=advisorClassName;}
this.changeAdvisorPic=function(advisorClass){if(!that.showTutorialAdvisor){return;}
Dom.get('advisorImage').className=advisorClass;Dom.get("advisorImage").onmouseover=function(){Dom.get("advisorImage").className=advisorClass;};Dom.get("advisorImage").onmouseout=function(){Dom.get("advisorImage").className=advisorClass;};}
this.animateArrowAndChangeAdvisorPicOnClose=function(advisorClass){Dom.get("tutorialAdvisorCloseLink").onclick=function(){that.hideMessage();that.animateArrow();}
Dom.get("okButton").onclick=function(){that.changeAdvisorPic(advisorClass);if(showDisableCheckbox){if(Dom.get("disableTutorial").checked==true){ajaxRequest("?action=TutorialOperations&function=disableTutorial");}}
that.hideMessage();that.animateArrow();window.location.href='index.php?view=city';};}
this.registerDefaultBehavior=function(){if(that.showTutorialAdvisor){Dom.get("tutorialAdvisorLink").onclick=that.toggleMessage;}
Dom.get("okButton").onclick=function(){if(showDisableCheckbox){if(Dom.get("disableTutorial").checked==true){ajaxRequest("?action=TutorialOperations&function=disableTutorial");}}
that.hideMessage();that.animateArrow();if(in_array(that.currentQuest,that.phpdata.questsThatRequirePageReload)){window.location="/index.php?view=city&id="+that.capitalId;}};Dom.get("tutorialAdvisorCloseLink").onclick=function(){that.hideMessage;if(in_array(that.currentQuest,that.phpdata.questsThatRequirePageReload)){window.location="/index.php?view=city&id="+that.capitalId;}}}
this.animateArrow=function(){if(startId!=''&&Dom.get(startId)){startX=Dom.getX(startId)+startX;startY=Dom.getY(startId)+startY;if(that.arrow.parentNode!=document.body){Dom.get('container2').removeChild(that.arrow);document.body.appendChild(that.arrow);}}
if(that.currentView=='plunder'&&that.currentQuest==that.phpdata.keyOfBarbarianQuest&&that.currentQuestMessageDisplayed&&!that.allreadyStartedPlunderMoves){that.allreadyStartedPlunderMoves=true;that.animateArrowOnPlunderView();return;}
if(startX==0&&startY==0){return;}
clearInterval(this.interval);that.arrow.style.left=startX+"px";that.arrow.style.top=startY+"px";that.arrow.style.display="block";this.interval=setInterval(function(){that.updateArrow(startY);},10);}
this.animateArrowOnResView=function(){that.arrow.style.left=startX+"px";that.arrow.style.top=startY+"px";that.arrow.style.display="block";this.interval=setInterval(function(){that.updateArrowOnResView(startX,startY);},10);}
this.animateArrowOnPlunderView=function(){that.arrow.style.left=startX+"px";that.arrow.style.top=startY+"px";that.arrow.style.display="block";this.interval=setInterval(function(){that.updateArrow(startY);},10);window.setTimeout(function(){that.interval1=setInterval(function(){that.animateArrowOnPlunderViewFirstPart();},10);},3000);window.setTimeout(function(){that.interval2=setInterval(function(){that.animateArrowOnPlunderViewSecondPart();},10);},9000);}
this.animateArrowOnPlunderViewFirstPart=function(){var xOld=parseInt(that.arrow.style.left);var yOld=parseInt(that.arrow.style.top);var reachedTargetX=false;var reachedTargetY=false;var changeSpeed=2;clearInterval(that.interval);if(that.phpdata.positionsOnScreen[that.languageDirection].plunder.firstUnitType[0]<that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[0]&&xOld<that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[0]){xOld=xOld+changeSpeed;that.arrow.style.left=xOld+"px";}else if(that.phpdata.positionsOnScreen[that.languageDirection].plunder.firstUnitType[0]>that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[0]&&xOld>that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[0]){xOld=xOld-changeSpeed;that.arrow.style.left=xOld+"px";}else{reachedTargetX=true;}
if(that.phpdata.positionsOnScreen[that.languageDirection].plunder.firstUnitType[1]<that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[1]&&yOld<that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[1]){yOld=yOld+changeSpeed;that.arrow.style.top=yOld+"px";}else if(that.phpdata.positionsOnScreen[that.languageDirection].plunder.firstUnitType[1]>that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[1]&&yOld>that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[1]){yOld=yOld-changeSpeed;that.arrow.style.top=yOld+"px";}else{reachedTargetY=true;}
if(reachedTargetX&&reachedTargetY){clearInterval(that.interval1);}}
this.animateArrowOnPlunderViewSecondPart=function(){var d=parseInt(that.arrow.style.left);var changeSpeed=2;if(that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[0]<that.phpdata.positionsOnScreen[that.languageDirection].plunder.submit[0]&&d<that.phpdata.positionsOnScreen[that.languageDirection].plunder.submit[0]){d=d+changeSpeed;that.arrow.style.left=d+"px";}else if(that.phpdata.positionsOnScreen[that.languageDirection].plunder.transporters[0]>that.phpdata.positionsOnScreen[that.languageDirection].plunder.submit[0]&&d>that.phpdata.positionsOnScreen[that.languageDirection].plunder.submit[0]){d=d-changeSpeed;that.arrow.style.left=d+"px";}else{clearInterval(that.interval2);}}
this.updateArrow=function(startY){counter++;that.arrow.style.top=(startY+(Math.sin(counter/15)*10))+"px";}
this.updateArrowOnResView=function(startX,startY){counter++;that.arrow.style.top=(startY+(Math.sin(counter/30)*40))+"px";that.arrow.style.left=(startX-(Math.cos(counter/30)*200))+"px";}
this.reloadPageOnClose=function(){Dom.get("tutorialAdvisorCloseLink").onclick=function(){that.hideMessage();that.animateArrow();window.location.href='index.php?view=city';}
Dom.get("okButton").onclick=function(){if(showDisableCheckbox){if(Dom.get("disableTutorial").checked==true){ajaxRequest("?action=TutorialOperations&function=disableTutorial");}}
that.hideMessage();that.animateArrow();window.location.href='index.php?view=city';};}
this.animateArrowOnClose=function(){Dom.get("tutorialAdvisorCloseLink").onclick=function(){that.hideMessage();that.animateArrow();}
Dom.get("okButton").onclick=function(){if(showDisableCheckbox){if(Dom.get("disableTutorial").checked==true){ajaxRequest("?action=TutorialOperations&function=disableTutorial");}}
that.hideMessage();that.animateArrow();};}
this.onClickBarbarianVillage=function(targetX,targetY){var links=document.getElementsByTagName("a");for(i=0;i<links.length;i++){if(links[i].onclick!=''){links[i].onmouseup=function(){if(startX!=startXOld){startY=startYOld;startX=startXOld;that.animateArrow();}}}}
Dom.get("barbarianLink").onmouseup=function(){startX=targetX;startY=targetY;that.animateArrow();};}
this.importDataFromPHP=function(jsonedData){var responseData=JSON.parse(jsonedData);that.phpdata=responseData;}}
(function(){var B=YAHOO.util;var A=function(D,C,E,F){if(!D){}this.init(D,C,E,F);};A.NAME="Anim";A.prototype={toString:function(){var C=this.getEl()||{};var D=C.id||C.tagName;return(this.constructor.NAME+": "+D);},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(C,E,D){return this.method(this.currentFrame,E,D-E,this.totalFrames);},setAttribute:function(C,F,E){var D=this.getEl();if(this.patterns.noNegatives.test(C)){F=(F>0)?F:0;}if(C in D&&!("style"in D&&C in D.style)){D[C]=F;}else{B.Dom.setStyle(D,C,F+E);}},getAttribute:function(C){var E=this.getEl();var G=B.Dom.getStyle(E,C);if(G!=="auto"&&!this.patterns.offsetUnit.test(G)){return parseFloat(G);}var D=this.patterns.offsetAttribute.exec(C)||[];var H=!!(D[3]);var F=!!(D[2]);if("style"in E){if(F||(B.Dom.getStyle(E,"position")=="absolute"&&H)){G=E["offset"+D[0].charAt(0).toUpperCase()+D[0].substr(1)];}else{G=0;}}else{if(C in E){G=E[C];}}return G;},getDefaultUnit:function(C){if(this.patterns.defaultUnit.test(C)){return"px";}return"";},setRuntimeAttribute:function(D){var I;var E;var F=this.attributes;this.runtimeAttributes[D]={};var H=function(J){return(typeof J!=="undefined");};if(!H(F[D]["to"])&&!H(F[D]["by"])){return false;}I=(H(F[D]["from"]))?F[D]["from"]:this.getAttribute(D);if(H(F[D]["to"])){E=F[D]["to"];}else{if(H(F[D]["by"])){if(I.constructor==Array){E=[];for(var G=0,C=I.length;G<C;++G){E[G]=I[G]+F[D]["by"][G]*1;}}else{E=I+F[D]["by"]*1;}}}this.runtimeAttributes[D].start=I;this.runtimeAttributes[D].end=E;this.runtimeAttributes[D].unit=(H(F[D].unit))?F[D]["unit"]:this.getDefaultUnit(D);return true;},init:function(E,J,I,C){var D=false;var F=null;var H=0;E=B.Dom.get(E);this.attributes=J||{};this.duration=!YAHOO.lang.isUndefined(I)?I:1;this.method=C||B.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=B.AnimMgr.fps;this.setEl=function(M){E=B.Dom.get(M);};this.getEl=function(){return E;};this.isAnimated=function(){return D;};this.getStartTime=function(){return F;};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false;}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(B.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1;}B.AnimMgr.registerElement(this);return true;};this.stop=function(M){if(!this.isAnimated()){return false;}if(M){this.currentFrame=this.totalFrames;this._onTween.fire();}B.AnimMgr.stop(this);};var L=function(){this.onStart.fire();this.runtimeAttributes={};for(var M in this.attributes){this.setRuntimeAttribute(M);}D=true;H=0;F=new Date();};var K=function(){var O={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};O.toString=function(){return("duration: "+O.duration+", currentFrame: "+O.currentFrame);};this.onTween.fire(O);var N=this.runtimeAttributes;for(var M in N){this.setAttribute(M,this.doMethod(M,N[M].start,N[M].end),N[M].unit);}H+=1;};var G=function(){var M=(new Date()-F)/1000;var N={duration:M,frames:H,fps:H/M};N.toString=function(){return("duration: "+N.duration+", frames: "+N.frames+", fps: "+N.fps);};D=false;H=0;this.onComplete.fire(N);};this._onStart=new B.CustomEvent("_start",this,true);this.onStart=new B.CustomEvent("start",this);this.onTween=new B.CustomEvent("tween",this);this._onTween=new B.CustomEvent("_tween",this,true);this.onComplete=new B.CustomEvent("complete",this);this._onComplete=new B.CustomEvent("_complete",this,true);this._onStart.subscribe(L);this._onTween.subscribe(K);this._onComplete.subscribe(G);}};B.Anim=A;})();YAHOO.util.AnimMgr=new function(){var C=null;var B=[];var A=0;this.fps=1000;this.delay=1;this.registerElement=function(F){B[B.length]=F;A+=1;F._onStart.fire();this.start();};this.unRegister=function(G,F){F=F||E(G);if(!G.isAnimated()||F===-1){return false;}G._onComplete.fire();B.splice(F,1);A-=1;if(A<=0){this.stop();}return true;};this.start=function(){if(C===null){C=setInterval(this.run,this.delay);}};this.stop=function(H){if(!H){clearInterval(C);for(var G=0,F=B.length;G<F;++G){this.unRegister(B[0],0);}B=[];C=null;A=0;}else{this.unRegister(H);}};this.run=function(){for(var H=0,F=B.length;H<F;++H){var G=B[H];if(!G||!G.isAnimated()){continue;}if(G.currentFrame<G.totalFrames||G.totalFrames===null){G.currentFrame+=1;if(G.useSeconds){D(G);}G._onTween.fire();}else{YAHOO.util.AnimMgr.stop(G,H);}}};var E=function(H){for(var G=0,F=B.length;G<F;++G){if(B[G]===H){return G;}}return-1;};var D=function(G){var J=G.totalFrames;var I=G.currentFrame;var H=(G.currentFrame*G.duration*1000/G.totalFrames);var F=(new Date()-G.getStartTime());var K=0;if(F<G.duration*1000){K=Math.round((F/H-1)*G.currentFrame);}else{K=J-(I+1);}if(K>0&&isFinite(K)){if(G.currentFrame+K>=J){K=J-(I+1);}G.currentFrame+=K;}};this._queue=B;this._getIndex=E;};YAHOO.util.Bezier=new function(){this.getPosition=function(E,D){var F=E.length;var C=[];for(var B=0;B<F;++B){C[B]=[E[B][0],E[B][1]];}for(var A=1;A<F;++A){for(B=0;B<F-A;++B){C[B][0]=(1-D)*C[B][0]+D*C[parseInt(B+1,10)][0];C[B][1]=(1-D)*C[B][1]+D*C[parseInt(B+1,10)][1];}}return[C[0][0],C[0][1]];};};(function(){var A=function(F,E,G,H){A.superclass.constructor.call(this,F,E,G,H);};A.NAME="ColorAnim";A.DEFAULT_BGCOLOR="#fff";var C=YAHOO.util;YAHOO.extend(A,C.Anim);var D=A.superclass;var B=A.prototype;B.patterns.color=/color$/i;B.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;B.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;B.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;B.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;B.parseColor=function(E){if(E.length==3){return E;}var F=this.patterns.hex.exec(E);if(F&&F.length==4){return[parseInt(F[1],16),parseInt(F[2],16),parseInt(F[3],16)];}F=this.patterns.rgb.exec(E);if(F&&F.length==4){return[parseInt(F[1],10),parseInt(F[2],10),parseInt(F[3],10)];}F=this.patterns.hex3.exec(E);if(F&&F.length==4){return[parseInt(F[1]+F[1],16),parseInt(F[2]+F[2],16),parseInt(F[3]+F[3],16)];}return null;};B.getAttribute=function(E){var G=this.getEl();if(this.patterns.color.test(E)){var I=YAHOO.util.Dom.getStyle(G,E);var H=this;if(this.patterns.transparent.test(I)){var F=YAHOO.util.Dom.getAncestorBy(G,function(J){return!H.patterns.transparent.test(I);});if(F){I=C.Dom.getStyle(F,E);}else{I=A.DEFAULT_BGCOLOR;}}}else{I=D.getAttribute.call(this,E);}return I;};B.doMethod=function(F,J,G){var I;if(this.patterns.color.test(F)){I=[];for(var H=0,E=J.length;H<E;++H){I[H]=D.doMethod.call(this,F,J[H],G[H]);}I="rgb("+Math.floor(I[0])+","+Math.floor(I[1])+","+Math.floor(I[2])+")";}else{I=D.doMethod.call(this,F,J,G);}return I;};B.setRuntimeAttribute=function(F){D.setRuntimeAttribute.call(this,F);if(this.patterns.color.test(F)){var H=this.attributes;var J=this.parseColor(this.runtimeAttributes[F].start);var G=this.parseColor(this.runtimeAttributes[F].end);if(typeof H[F]["to"]==="undefined"&&typeof H[F]["by"]!=="undefined"){G=this.parseColor(H[F].by);for(var I=0,E=J.length;I<E;++I){G[I]=J[I]+G[I];}}this.runtimeAttributes[F].start=J;this.runtimeAttributes[F].end=G;}};C.ColorAnim=A;})();YAHOO.util.Easing={easeNone:function(B,A,D,C){return D*B/C+A;},easeIn:function(B,A,D,C){return D*(B/=C)*B+A;},easeOut:function(B,A,D,C){return-D*(B/=C)*(B-2)+A;},easeBoth:function(B,A,D,C){if((B/=C/2)<1){return D/2*B*B+A;}return-D/2*((--B)*(B-2)-1)+A;},easeInStrong:function(B,A,D,C){return D*(B/=C)*B*B*B+A;},easeOutStrong:function(B,A,D,C){return-D*((B=B/C-1)*B*B*B-1)+A;},easeBothStrong:function(B,A,D,C){if((B/=C/2)<1){return D/2*B*B*B*B+A;}return-D/2*((B-=2)*B*B*B-2)+A;},elasticIn:function(C,A,G,F,B,E){if(C==0){return A;}if((C/=F)==1){return A+G;}if(!E){E=F*0.3;}if(!B||B<Math.abs(G)){B=G;var D=E/4;}else{var D=E/(2*Math.PI)*Math.asin(G/B);}return-(B*Math.pow(2,10*(C-=1))*Math.sin((C*F-D)*(2*Math.PI)/E))+A;},elasticOut:function(C,A,G,F,B,E){if(C==0){return A;}if((C/=F)==1){return A+G;}if(!E){E=F*0.3;}if(!B||B<Math.abs(G)){B=G;var D=E/4;}else{var D=E/(2*Math.PI)*Math.asin(G/B);}return B*Math.pow(2,-10*C)*Math.sin((C*F-D)*(2*Math.PI)/E)+G+A;},elasticBoth:function(C,A,G,F,B,E){if(C==0){return A;}if((C/=F/2)==2){return A+G;}if(!E){E=F*(0.3*1.5);}if(!B||B<Math.abs(G)){B=G;var D=E/4;}else{var D=E/(2*Math.PI)*Math.asin(G/B);}if(C<1){return-0.5*(B*Math.pow(2,10*(C-=1))*Math.sin((C*F-D)*(2*Math.PI)/E))+A;}return B*Math.pow(2,-10*(C-=1))*Math.sin((C*F-D)*(2*Math.PI)/E)*0.5+G+A;},backIn:function(B,A,E,D,C){if(typeof C=="undefined"){C=1.70158;}return E*(B/=D)*B*((C+1)*B-C)+A;},backOut:function(B,A,E,D,C){if(typeof C=="undefined"){C=1.70158;}return E*((B=B/D-1)*B*((C+1)*B+C)+1)+A;},backBoth:function(B,A,E,D,C){if(typeof C=="undefined"){C=1.70158;}if((B/=D/2)<1){return E/2*(B*B*(((C*=(1.525))+1)*B-C))+A;}return E/2*((B-=2)*B*(((C*=(1.525))+1)*B+C)+2)+A;},bounceIn:function(B,A,D,C){return D-YAHOO.util.Easing.bounceOut(C-B,0,D,C)+A;},bounceOut:function(B,A,D,C){if((B/=C)<(1/2.75)){return D*(7.5625*B*B)+A;}else{if(B<(2/2.75)){return D*(7.5625*(B-=(1.5/2.75))*B+0.75)+A;}else{if(B<(2.5/2.75)){return D*(7.5625*(B-=(2.25/2.75))*B+0.9375)+A;}}}return D*(7.5625*(B-=(2.625/2.75))*B+0.984375)+A;},bounceBoth:function(B,A,D,C){if(B<C/2){return YAHOO.util.Easing.bounceIn(B*2,0,D,C)*0.5+A;}return YAHOO.util.Easing.bounceOut(B*2-C,0,D,C)*0.5+D*0.5+A;}};(function(){var A=function(H,G,I,J){if(H){A.superclass.constructor.call(this,H,G,I,J);}};A.NAME="Motion";var E=YAHOO.util;YAHOO.extend(A,E.ColorAnim);var F=A.superclass;var C=A.prototype;C.patterns.points=/^points$/i;C.setAttribute=function(G,I,H){if(this.patterns.points.test(G)){H=H||"px";F.setAttribute.call(this,"left",I[0],H);F.setAttribute.call(this,"top",I[1],H);}else{F.setAttribute.call(this,G,I,H);}};C.getAttribute=function(G){if(this.patterns.points.test(G)){var H=[F.getAttribute.call(this,"left"),F.getAttribute.call(this,"top")];}else{H=F.getAttribute.call(this,G);}return H;};C.doMethod=function(G,K,H){var J=null;if(this.patterns.points.test(G)){var I=this.method(this.currentFrame,0,100,this.totalFrames)/100;J=E.Bezier.getPosition(this.runtimeAttributes[G],I);}else{J=F.doMethod.call(this,G,K,H);}return J;};C.setRuntimeAttribute=function(P){if(this.patterns.points.test(P)){var H=this.getEl();var J=this.attributes;var G;var L=J["points"]["control"]||[];var I;var M,O;if(L.length>0&&!(L[0]instanceof Array)){L=[L];}else{var K=[];for(M=0,O=L.length;M<O;++M){K[M]=L[M];}L=K;}if(E.Dom.getStyle(H,"position")=="static"){E.Dom.setStyle(H,"position","relative");}if(D(J["points"]["from"])){E.Dom.setXY(H,J["points"]["from"]);}else{E.Dom.setXY(H,E.Dom.getXY(H));}G=this.getAttribute("points");if(D(J["points"]["to"])){I=B.call(this,J["points"]["to"],G);var N=E.Dom.getXY(this.getEl());for(M=0,O=L.length;M<O;++M){L[M]=B.call(this,L[M],G);}}else{if(D(J["points"]["by"])){I=[G[0]+J["points"]["by"][0],G[1]+J["points"]["by"][1]];for(M=0,O=L.length;M<O;++M){L[M]=[G[0]+L[M][0],G[1]+L[M][1]];}}}this.runtimeAttributes[P]=[G];if(L.length>0){this.runtimeAttributes[P]=this.runtimeAttributes[P].concat(L);}this.runtimeAttributes[P][this.runtimeAttributes[P].length]=I;}else{F.setRuntimeAttribute.call(this,P);}};var B=function(G,I){var H=E.Dom.getXY(this.getEl());G=[G[0]-H[0]+I[0],G[1]-H[1]+I[1]];return G;};var D=function(G){return(typeof G!=="undefined");};E.Motion=A;})();(function(){var D=function(F,E,G,H){if(F){D.superclass.constructor.call(this,F,E,G,H);}};D.NAME="Scroll";var B=YAHOO.util;YAHOO.extend(D,B.ColorAnim);var C=D.superclass;var A=D.prototype;A.doMethod=function(E,H,F){var G=null;if(E=="scroll"){G=[this.method(this.currentFrame,H[0],F[0]-H[0],this.totalFrames),this.method(this.currentFrame,H[1],F[1]-H[1],this.totalFrames)];}else{G=C.doMethod.call(this,E,H,F);}return G;};A.getAttribute=function(E){var G=null;var F=this.getEl();if(E=="scroll"){G=[F.scrollLeft,F.scrollTop];}else{G=C.getAttribute.call(this,E);}return G;};A.setAttribute=function(E,H,G){var F=this.getEl();if(E=="scroll"){F.scrollLeft=H[0];F.scrollTop=H[1];}else{C.setAttribute.call(this,E,H,G);}};B.Scroll=D;})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.8.1",build:"19"});
(function(){var Y=YAHOO.util;Y.Selector={_foundCache:[],_regexCache:{},_re:{nth:/^(?:([-]?\d*)(n){1}|(odd|even)$)*([-+]?\d*)$/,attr:/(\[.*\])/g,urls:/^(?:href|src)/},document:window.document,attrAliases:{},shorthand:{'\\#(-?[_a-z]+[-\\w]*)':'[id=$1]','\\.(-?[_a-z]+[-\\w]*)':'[class~=$1]'},operators:{'=':function(attr,val){return attr===val;},'!=':function(attr,val){return attr!==val;},'~=':function(attr,val){var s=' ';return(s+attr+s).indexOf((s+val+s))>-1;},'|=':function(attr,val){return attr===val||attr.slice(0,val.length+1)===val+'-';},'^=':function(attr,val){return attr.indexOf(val)===0;},'$=':function(attr,val){return attr.slice(-val.length)===val;},'*=':function(attr,val){return attr.indexOf(val)>-1;},'':function(attr,val){return attr;}},pseudos:{'root':function(node){return node===node.ownerDocument.documentElement;},'nth-child':function(node,val){return Y.Selector._getNth(node,val);},'nth-last-child':function(node,val){return Y.Selector._getNth(node,val,null,true);},'nth-of-type':function(node,val){return Y.Selector._getNth(node,val,node.tagName);},'nth-last-of-type':function(node,val){return Y.Selector._getNth(node,val,node.tagName,true);},'first-child':function(node){return Y.Selector._getChildren(node.parentNode)[0]===node;},'last-child':function(node){var children=Y.Selector._getChildren(node.parentNode);return children[children.length-1]===node;},'first-of-type':function(node,val){return Y.Selector._getChildren(node.parentNode,node.tagName)[0];},'last-of-type':function(node,val){var children=Y.Selector._getChildren(node.parentNode,node.tagName);return children[children.length-1];},'only-child':function(node){var children=Y.Selector._getChildren(node.parentNode);return children.length===1&&children[0]===node;},'only-of-type':function(node){return Y.Selector._getChildren(node.parentNode,node.tagName).length===1;},'empty':function(node){return node.childNodes.length===0;},'not':function(node,simple){return!Y.Selector.test(node,simple);},'contains':function(node,str){var text=node.innerText||node.textContent||'';return text.indexOf(str)>-1;},'checked':function(node){return node.checked===true;}},test:function(node,selector){node=Y.Selector.document.getElementById(node)||node;if(!node){return false;}
var groups=selector?selector.split(','):[];if(groups.length){for(var i=0,len=groups.length;i<len;++i){if(Y.Selector._test(node,groups[i])){return true;}}
return false;}
return Y.Selector._test(node,selector);},_test:function(node,selector,token,deDupe){token=token||Y.Selector._tokenize(selector).pop()||{};if(!node.tagName||(token.tag!=='*'&&node.tagName!==token.tag)||(deDupe&&node._found)){return false;}
if(token.attributes.length){var val,ieFlag,re_urls=Y.Selector._re.urls;if(!node.attributes||!node.attributes.length){return false;}
for(var i=0,attr;attr=token.attributes[i++];){ieFlag=(re_urls.test(attr[0]))?2:0;val=node.getAttribute(attr[0],ieFlag);if(val===null||val===undefined){return false;}
if(Y.Selector.operators[attr[1]]&&!Y.Selector.operators[attr[1]](val,attr[2])){return false;}}}
if(token.pseudos.length){for(var i=0,len=token.pseudos.length;i<len;++i){if(Y.Selector.pseudos[token.pseudos[i][0]]&&!Y.Selector.pseudos[token.pseudos[i][0]](node,token.pseudos[i][1])){return false;}}}
return(token.previous&&token.previous.combinator!==',')?Y.Selector._combinators[token.previous.combinator](node,token):true;},filter:function(nodes,selector){nodes=nodes||[];var node,result=[],tokens=Y.Selector._tokenize(selector);if(!nodes.item){for(var i=0,len=nodes.length;i<len;++i){if(!nodes[i].tagName){node=Y.Selector.document.getElementById(nodes[i]);if(node){nodes[i]=node;}else{}}}}
result=Y.Selector._filter(nodes,Y.Selector._tokenize(selector)[0]);return result;},_filter:function(nodes,token,firstOnly,deDupe){var result=firstOnly?null:[],foundCache=Y.Selector._foundCache;for(var i=0,len=nodes.length;i<len;i++){if(!Y.Selector._test(nodes[i],'',token,deDupe)){continue;}
if(firstOnly){return nodes[i];}
if(deDupe){if(nodes[i]._found){continue;}
nodes[i]._found=true;foundCache[foundCache.length]=nodes[i];}
result[result.length]=nodes[i];}
return result;},query:function(selector,root,firstOnly){var result=Y.Selector._query(selector,root,firstOnly);return result;},_query:function(selector,root,firstOnly,deDupe){var result=(firstOnly)?null:[],node;if(!selector){return result;}
var groups=selector.split(',');if(groups.length>1){var found;for(var i=0,len=groups.length;i<len;++i){found=Y.Selector._query(groups[i],root,firstOnly,true);result=firstOnly?found:result.concat(found);}
Y.Selector._clearFoundCache();return result;}
if(root&&!root.nodeName){root=Y.Selector.document.getElementById(root);if(!root){return result;}}
root=root||Y.Selector.document;if(root.nodeName!=='#document'){Y.Dom.generateId(root);selector=root.tagName+'#'+root.id+' '+selector;node=root;root=root.ownerDocument;}
var tokens=Y.Selector._tokenize(selector);var idToken=tokens[Y.Selector._getIdTokenIndex(tokens)],nodes=[],id,token=tokens.pop()||{};if(idToken){id=Y.Selector._getId(idToken.attributes);}
if(id){node=node||Y.Selector.document.getElementById(id);if(node&&(root.nodeName==='#document'||Y.Dom.isAncestor(root,node))){if(Y.Selector._test(node,null,idToken)){if(idToken===token){nodes=[node];}else if(idToken.combinator===' '||idToken.combinator==='>'){root=node;}}}else{return result;}}
if(root&&!nodes.length){nodes=root.getElementsByTagName(token.tag);}
if(nodes.length){result=Y.Selector._filter(nodes,token,firstOnly,deDupe);}
return result;},_clearFoundCache:function(){var foundCache=Y.Selector._foundCache;for(var i=0,len=foundCache.length;i<len;++i){try{delete foundCache[i]._found;}catch(e){foundCache[i].removeAttribute('_found');}}
foundCache=[];},_getRegExp:function(str,flags){var regexCache=Y.Selector._regexCache;flags=flags||'';if(!regexCache[str+flags]){regexCache[str+flags]=new RegExp(str,flags);}
return regexCache[str+flags];},_getChildren:function(){if(document.documentElement.children&&document.documentElement.children.tags){return function(node,tag){return(tag)?node.children.tags(tag):node.children||[];};}else{return function(node,tag){var children=[],childNodes=node.childNodes;for(var i=0,len=childNodes.length;i<len;++i){if(childNodes[i].tagName){if(!tag||childNodes[i].tagName===tag){children.push(childNodes[i]);}}}
return children;};}}(),_combinators:{' ':function(node,token){while((node=node.parentNode)){if(Y.Selector._test(node,'',token.previous)){return true;}}
return false;},'>':function(node,token){return Y.Selector._test(node.parentNode,null,token.previous);},'+':function(node,token){var sib=node.previousSibling;while(sib&&sib.nodeType!==1){sib=sib.previousSibling;}
if(sib&&Y.Selector._test(sib,null,token.previous)){return true;}
return false;},'~':function(node,token){var sib=node.previousSibling;while(sib){if(sib.nodeType===1&&Y.Selector._test(sib,null,token.previous)){return true;}
sib=sib.previousSibling;}
return false;}},_getNth:function(node,expr,tag,reverse){Y.Selector._re.nth.test(expr);var a=parseInt(RegExp.$1,10),n=RegExp.$2,oddeven=RegExp.$3,b=parseInt(RegExp.$4,10)||0,result=[],op;var siblings=Y.Selector._getChildren(node.parentNode,tag);if(oddeven){a=2;op='+';n='n';b=(oddeven==='odd')?1:0;}else if(isNaN(a)){a=(n)?1:0;}
if(a===0){if(reverse){b=siblings.length-b+1;}
if(siblings[b-1]===node){return true;}else{return false;}}else if(a<0){reverse=!!reverse;a=Math.abs(a);}
if(!reverse){for(var i=b-1,len=siblings.length;i<len;i+=a){if(i>=0&&siblings[i]===node){return true;}}}else{for(var i=siblings.length-b,len=siblings.length;i>=0;i-=a){if(i<len&&siblings[i]===node){return true;}}}
return false;},_getId:function(attr){for(var i=0,len=attr.length;i<len;++i){if(attr[i][0]=='id'&&attr[i][1]==='='){return attr[i][2];}}},_getIdTokenIndex:function(tokens){for(var i=0,len=tokens.length;i<len;++i){if(Y.Selector._getId(tokens[i].attributes)){return i;}}
return-1;},_patterns:{tag:/^((?:-?[_a-z]+[\w-]*)|\*)/i,attributes:/^\[([a-z]+\w*)+([~\|\^\$\*!=]=?)?['"]?([^\]]*?)['"]?\]/i,pseudos:/^:([-\w]+)(?:\(['"]?(.+)['"]?\))*/i,combinator:/^\s*([>+~]|\s)\s*/},_tokenize:function(selector){var token={},tokens=[],id,found=false,patterns=Y.Selector._patterns,match;selector=Y.Selector._replaceShorthand(selector);do{found=false;for(var re in patterns){if(YAHOO.lang.hasOwnProperty(patterns,re)){if(re!='tag'&&re!='combinator'){token[re]=token[re]||[];}
if((match=patterns[re].exec(selector))){found=true;if(re!='tag'&&re!='combinator'){if(re==='attributes'&&match[1]==='id'){token.id=match[3];}
token[re].push(match.slice(1));}else{token[re]=match[1];}
selector=selector.replace(match[0],'');if(re==='combinator'||!selector.length){token.attributes=Y.Selector._fixAttributes(token.attributes);token.pseudos=token.pseudos||[];token.tag=token.tag?token.tag.toUpperCase():'*';tokens.push(token);token={previous:token};}}}}}while(found);return tokens;},_fixAttributes:function(attr){var aliases=Y.Selector.attrAliases;attr=attr||[];for(var i=0,len=attr.length;i<len;++i){if(aliases[attr[i][0]]){attr[i][0]=aliases[attr[i][0]];}
if(!attr[i][1]){attr[i][1]='';}}
return attr;},_replaceShorthand:function(selector){var shorthand=Y.Selector.shorthand;var attrs=selector.match(Y.Selector._re.attr);if(attrs){selector=selector.replace(Y.Selector._re.attr,'REPLACED_ATTRIBUTE');}
for(var re in shorthand){if(YAHOO.lang.hasOwnProperty(shorthand,re)){selector=selector.replace(Y.Selector._getRegExp(re,'gi'),shorthand[re]);}}
if(attrs){for(var i=0,len=attrs.length;i<len;++i){selector=selector.replace('REPLACED_ATTRIBUTE',attrs[i]);}}
return selector;}};if(YAHOO.env.ua.ie&&((!document.documentMode&&YAHOO.env.ua.ie<8)||document.documentMode<8)){Y.Selector.attrAliases['class']='className';Y.Selector.attrAliases['for']='htmlFor';}
if(YAHOO.env.ua.ie&&(document.documentMode==8&&YAHOO.env.ua.ie==7)){Y.Selector.attrAliases['class']='class';}})();YAHOO.register("selector",YAHOO.util.Selector,{version:"2.8.1",build:"19"});
(function(){var B=YAHOO.util.Event,G=YAHOO.lang,E=B.addListener,F=B.removeListener,C=B.getListeners,D=[],H={mouseenter:"mouseover",mouseleave:"mouseout"},A=function(N,M,L){var J=B._getCacheIndex(D,N,M,L),I,K;if(J>=0){I=D[J];}if(N&&I){K=F.call(B,I[0],M,I[3]);if(K){delete D[J][2];delete D[J][3];D.splice(J,1);}}return K;};G.augmentObject(B._specialTypes,H);G.augmentObject(B,{_createMouseDelegate:function(I,J,K){return function(Q,M){var P=this,L=B.getRelatedTarget(Q),O,N;if(P!=L&&!YAHOO.util.Dom.isAncestor(P,L)){O=P;if(K){if(K===true){O=J;}else{O=K;}}N=[Q,P,J];if(M){N.splice(2,0,M);}return I.apply(O,N);}};},addListener:function(M,L,K,N,O){var I,J;if(H[L]){I=B._createMouseDelegate(K,N,O);I.mouseDelegate=true;D.push([M,L,K,I]);J=E.call(B,M,L,I);}else{J=E.apply(B,arguments);}return J;},removeListener:function(L,K,J){var I;if(H[K]){I=A.apply(B,arguments);}else{I=F.apply(B,arguments);}return I;},getListeners:function(N,M){var L=[],P,K=(M==="mouseover"||M==="mouseout"),O,J,I;if(M&&(K||H[M])){P=C.call(B,N,this._getType(M));if(P){for(J=P.length-1;J>-1;J--){I=P[J];O=I.fn.mouseDelegate;if((H[M]&&O)||(K&&!O)){L.push(I);}}}}else{L=C.apply(B,arguments);}return(L&&L.length)?L:null;}},true);B.on=B.addListener;}());YAHOO.register("event-mouseenter",YAHOO.util.Event,{version:"2.8.1",build:"19"});
function pagedSwapper(){var cursorPosition=0;var container=[];var items=[];var that=this;this.createEvent("prechange");this.createEvent("unload");this.createEvent("change");this.createEvent("postchange");function load(num){that.fireEvent("prechange",num);for(var i=0,cl=container.length;i<cl;i++){var olditemIndex=cursorPosition+i;var itemIndex=num+i;var olditem=(items.length>olditemIndex&&olditemIndex>=0)?items[olditemIndex]:false;that.fireEvent('unload',{'container':container[i],'item':olditem,'itemIndex':olditemIndex});var item=(items.length>itemIndex&&itemIndex>=0)?items[itemIndex]:false;that.fireEvent('change',{'container':container[i],'item':item,'itemIndex':itemIndex});}
cursorPosition=num;that.fireEvent("postchange",num);}
this.getItems=function(){return items;};this.setItems=function(i){items=i;};this.addItem=function(conf,times){var times=(typeof(times)=='undefined')?1:times;for(var i=0,l=times;i<l;i++){items[items.length]=conf;}};this.setItem=function(index,conf){items[index]=conf;};this.addContainer=function(conf){container.push(conf);};this.getContainerCount=function(){return container.length;};this.getContainers=function(){return container;};this.getCurrentPage=function(){return Math.floor(cursorPosition/container.length);};this.getCurrentItem=function(){return cursorPosition;};this.getPageCount=function(){return Math.ceil(items.length/container.length);};this.gotoPage=function(num){this.gotoItem(num*container.length);};this.pageForward=function(){this.stepForward(container.length);};this.pageBack=function(){this.stepBack(container.length);};this.getItemCount=function(){return items.length;};this.gotoItem=function(num){load(num);};this.refresh=function(){this.gotoItem(cursorPosition);};this.stepForward=function(amount){var amount=(typeof(amount)=='undefined')?1:amount;this.gotoItem(cursorPosition+amount);};this.stepBack=function(amount){var amount=(typeof(amount)=='undefined')?1:amount;this.gotoItem(cursorPosition-amount);};}
YAHOO.augment(pagedSwapper,YAHOO.util.EventProvider);function friendsList(elId){var Event=YAHOO.util.Event;var Dom=YAHOO.util.Dom;var Selector=YAHOO.util.Selector;this.paginator=new pagedSwapper();var friendsEl=Dom.get(elId);var ul=friendsEl.getElementsByTagName('ul')[0];var liStorage=document.createDocumentFragment();var friendscookie=new Cookie("ik_friendlist",1);var friendslots=[];var friendslotEls=Selector.query('li.friend',friendsEl);var pagedown=Selector.query('.pagedown',friendsEl);var pageup=Selector.query('.pageup',friendsEl);for(var i=0,l=friendslotEls.length;i<l;i++){var index=friendslots.length;friendslots[index]=new friendslot(friendslotEls[i]);}
for(var i=0,l=6;i<l;i++){this.paginator.addContainer(i);}
var friendEls=Selector.query('li',friendsEl);for(var i=0,l=friendEls.length;i<l;i++){this.paginator.addItem(friendEls[i]);}
this.paginator.subscribe('prechange',function(){var items=this.paginator.getItems();for(var i=0,l=items.length;i<l;i++){liStorage.appendChild(items[i]);}},this,true);this.paginator.subscribe('unload',function(conf){if(conf.item){Dom.removeClass(conf.item,'slot'+conf.container);liStorage.appendChild(conf.item);}},this,true);this.paginator.subscribe('change',function(conf){if(conf.item){Dom.addClass(conf.item,'slot'+conf.container);ul.appendChild(conf.item);}},this,true);this.paginator.subscribe('postchange',function(num){friendscookie.set('position',num);for(var i=0,l=pagedown.length;i<l;i++){Dom.removeClass(pagedown[i],"pagedown_deactivated");}
for(var i=0,l=pageup.length;i<l;i++){Dom.removeClass(pageup[i],"pageup_deactivated");}
if(this.paginator.getCurrentPage()+1>=this.paginator.getPageCount()){for(var i=0,l=pagedown.length;i<l;i++){Dom.addClass(pagedown[i],"pagedown_deactivated");}}
if(this.paginator.getCurrentPage()+1<=1){for(var i=0,l=pageup.length;i<l;i++){Dom.addClass(pageup[i],"pageup_deactivated");}}},this,true);var position=(friendscookie.exists())?parseInt(friendscookie.get('position')):0;this.paginator.gotoItem(position);for(var i=0,l=pagedown.length;i<l;i++){Event.addListener(pagedown[i],"click",function(e){Event.stopEvent(e);if(this.paginator.getCurrentPage()+1>=this.paginator.getPageCount()){return false;}
this.paginator.pageForward();},this,true);}
var pageup=Selector.query('.pageup',friendsEl);for(var i=0,l=pageup.length;i<l;i++){Event.addListener(pageup[i],"click",function(e){Event.stopEvent(e);if(this.paginator.getCurrentPage()+1<=1)return false;this.paginator.pageBack();},this,true);}
var showfriendEl=Selector.query('.showfriends',friendsEl)[0];this.expand=function(q){for(var i=0,l=friendslots.length;i<l;i++){friendslots[i].expand(q);friendscookie.set('expanded',1);friendslots[i].lock();}
if(Dom.hasClass(showfriendEl,'showfriends'))Dom.replaceClass(showfriendEl,'showfriends','hidefriends');}
this.contract=function(q){for(var i=0,l=friendslots.length;i<l;i++){friendslots[i].contract(q);friendscookie.set('expanded',0);friendslots[i].unlock();}
if(Dom.hasClass(showfriendEl,'hidefriends'))Dom.replaceClass(showfriendEl,'hidefriends','showfriends');}
var expanded=(friendscookie.exists())?parseInt(friendscookie.get('expanded')):0;if(expanded)this.expand(true);Event.addListener(showfriendEl,"click",function(e){Event.stopEvent(e);if(Dom.hasClass(showfriendEl,'showfriends'))this.expand();else this.contract();return false;},this,true);Event.addListener(showfriendEl,"dblclick",function(e){Event.stopEvent(e);return false;});Event.addListener(showfriendEl,"mouseup",function(e){Event.stopEvent(e);return false;});Event.addListener(showfriendEl,"mousedown",function(e){Event.stopEvent(e);return false;});function friendslot(el){var el=Dom.get(el);var slideIn=new YAHOO.util.Anim(el,{width:{to:53}},0.3,YAHOO.util.Easing.easeOut);var slideOut=new YAHOO.util.Anim(el,{width:{to:199}},0.3,YAHOO.util.Easing.easeOut);this.contract=function(quickly){if(!quickly)slideIn.animate();else Dom.setStyle(el,'width','53px');};this.expand=function(quickly){if(!quickly)slideOut.animate();else Dom.setStyle(el,'width','199px');};var locked=false;this.lock=function(){locked=true;};this.unlock=function(){locked=false;};Event.addListener(el,"mouseenter",function(e){if(locked)return;this.expand();},this,true);Event.addListener(el,"mouseleave",function(e){if(locked)return;this.contract();},this,true);}}
function Cookie(name,daystolive){var cookiename=name;var insertionIndex=0;var data=new Array();var expires=false;if(typeof(daystolive)!='undefined'&&daystolive>0){var date=new Date();date.setTime(date.getTime()+(daystolive*24*60*60*1000));expires=date.toGMTString();}
function read(name){var cookie=document.cookie;if(!cookie){return false;}
else{var firstChar,lastChar;firstChar=cookie.indexOf(name);if(firstChar==-1){return false;}
else{firstChar+=name.length+1;lastChar=cookie.indexOf(';',firstChar);if(lastChar==-1)lastChar=cookie.length;cookie=unescape(cookie.substring(firstChar,lastChar));var values=cookie.split(";");for(var i=0;i<values.length;i++){var properties=values[i].split("=");if(properties[0]!=''&&properties[1])data[properties[0]]=properties[1];}}}
insertionIndex=lastChar;return cookie;}
var cookie=read.call(this,cookiename);this.exists=function(){if(cookie)return true;else return false;}
this.get=function(property){if(data[property])return data[property];else return false;}
this.set=function(property,value){data[property]=value;var cookiestring="";for(var p in data){cookiestring+=p+"="+data[p]+";";}
document.cookie=cookiename+"="+escape(cookiestring)+"path=/;expires="+expires+";";}
this.bget=function(p){if(this.get(p)=="1")return true;else return false;}
this.bset=function(p){this.set(p,"1");}}
if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var A=YAHOO.util.Event,B=YAHOO.util.Dom;return{useShim:false,_shimActive:false,_shimState:false,_debugShim:false,_createShim:function(){var C=document.createElement("div");C.id="yui-ddm-shim";if(document.body.firstChild){document.body.insertBefore(C,document.body.firstChild);}else{document.body.appendChild(C);}C.style.display="none";C.style.backgroundColor="red";C.style.position="absolute";C.style.zIndex="99999";B.setStyle(C,"opacity","0");this._shim=C;A.on(C,"mouseup",this.handleMouseUp,this,true);A.on(C,"mousemove",this.handleMouseMove,this,true);A.on(window,"scroll",this._sizeShim,this,true);},_sizeShim:function(){if(this._shimActive){var C=this._shim;C.style.height=B.getDocumentHeight()+"px";C.style.width=B.getDocumentWidth()+"px";C.style.top="0";C.style.left="0";}},_activateShim:function(){if(this.useShim){if(!this._shim){this._createShim();}this._shimActive=true;var C=this._shim,D="0";if(this._debugShim){D=".5";}B.setStyle(C,"opacity",D);this._sizeShim();C.style.display="block";}},_deactivateShim:function(){this._shim.style.display="none";this._shimActive=false;},_shim:null,ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true;},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(E,D){for(var F in this.ids){for(var C in this.ids[F]){var G=this.ids[F][C];if(!this.isTypeOfDD(G)){continue;}G[E].apply(G,D);}}},_onLoad:function(){this.init();A.on(document,"mouseup",this.handleMouseUp,this,true);A.on(document,"mousemove",this.handleMouseMove,this,true);A.on(window,"unload",this._onUnload,this,true);A.on(window,"resize",this._onResize,this,true);},_onResize:function(C){this._execOnAll("resetConstraints",[]);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(D,C){if(!this.initialized){this.init();}if(!this.ids[C]){this.ids[C]={};}this.ids[C][D.id]=D;},removeDDFromGroup:function(E,C){if(!this.ids[C]){this.ids[C]={};}var D=this.ids[C];if(D&&D[E.id]){delete D[E.id];}},_remove:function(E){for(var D in E.groups){if(D){var C=this.ids[D];if(C&&C[E.id]){delete C[E.id];}}}delete this.handleIds[E.id];},regHandle:function(D,C){if(!this.handleIds[D]){this.handleIds[D]={};}this.handleIds[D][C]=C;},isDragDrop:function(C){return(this.getDDById(C))?true:false;},getRelated:function(H,D){var G=[];for(var F in H.groups){for(var E in this.ids[F]){var C=this.ids[F][E];if(!this.isTypeOfDD(C)){continue;}if(!D||C.isTarget){G[G.length]=C;}}}return G;},isLegalTarget:function(G,F){var D=this.getRelated(G,true);for(var E=0,C=D.length;E<C;++E){if(D[E].id==F.id){return true;}}return false;},isTypeOfDD:function(C){return(C&&C.__ygDragDrop);},isHandle:function(D,C){return(this.handleIds[D]&&this.handleIds[D][C]);},getDDById:function(D){for(var C in this.ids){if(this.ids[C][D]){return this.ids[C][D];}}return null;},handleMouseDown:function(E,D){this.currentTarget=YAHOO.util.Event.getTarget(E);this.dragCurrent=D;var C=D.getEl();this.startX=YAHOO.util.Event.getPageX(E);this.startY=YAHOO.util.Event.getPageY(E);this.deltaX=this.startX-C.offsetLeft;this.deltaY=this.startY-C.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var F=YAHOO.util.DDM;F.startDrag(F.startX,F.startY);F.fromTimeout=true;},this.clickTimeThresh);},startDrag:function(C,E){if(this.dragCurrent&&this.dragCurrent.useShim){this._shimState=this.useShim;this.useShim=true;}this._activateShim();clearTimeout(this.clickTimeout);var D=this.dragCurrent;if(D&&D.events.b4StartDrag){D.b4StartDrag(C,E);D.fireEvent("b4StartDragEvent",{x:C,y:E});}if(D&&D.events.startDrag){D.startDrag(C,E);D.fireEvent("startDragEvent",{x:C,y:E});}this.dragThreshMet=true;},handleMouseUp:function(C){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.fromTimeout=false;this.handleMouseMove(C);}this.fromTimeout=false;this.fireEvents(C,true);}else{}this.stopDrag(C);this.stopEvent(C);}},stopEvent:function(C){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(C);}if(this.preventDefault){YAHOO.util.Event.preventDefault(C);}},stopDrag:function(E,D){var C=this.dragCurrent;if(C&&!D){if(this.dragThreshMet){if(C.events.b4EndDrag){C.b4EndDrag(E);C.fireEvent("b4EndDragEvent",{e:E});}if(C.events.endDrag){C.endDrag(E);C.fireEvent("endDragEvent",{e:E});}}if(C.events.mouseUp){C.onMouseUp(E);C.fireEvent("mouseUpEvent",{e:E});}}if(this._shimActive){this._deactivateShim();if(this.dragCurrent&&this.dragCurrent.useShim){this.useShim=this._shimState;this._shimState=false;}}this.dragCurrent=null;this.dragOvers={};},handleMouseMove:function(F){var C=this.dragCurrent;if(C){if(YAHOO.util.Event.isIE&&!F.button){this.stopEvent(F);return this.handleMouseUp(F);}else{if(F.clientX<0||F.clientY<0){}}if(!this.dragThreshMet){var E=Math.abs(this.startX-YAHOO.util.Event.getPageX(F));var D=Math.abs(this.startY-YAHOO.util.Event.getPageY(F));if(E>this.clickPixelThresh||D>this.clickPixelThresh){this.startDrag(this.startX,this.startY);}}if(this.dragThreshMet){if(C&&C.events.b4Drag){C.b4Drag(F);C.fireEvent("b4DragEvent",{e:F});}if(C&&C.events.drag){C.onDrag(F);C.fireEvent("dragEvent",{e:F});}if(C){this.fireEvents(F,false);}}this.stopEvent(F);}},fireEvents:function(V,L){var a=this.dragCurrent;if(!a||a.isLocked()||a.dragOnly){return;}var N=YAHOO.util.Event.getPageX(V),M=YAHOO.util.Event.getPageY(V),P=new YAHOO.util.Point(N,M),K=a.getTargetCoord(P.x,P.y),F=a.getDragEl(),E=["out","over","drop","enter"],U=new YAHOO.util.Region(K.y,K.x+F.offsetWidth,K.y+F.offsetHeight,K.x),I=[],D={},Q=[],c={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var S in this.dragOvers){var d=this.dragOvers[S];if(!this.isTypeOfDD(d)){continue;}if(!this.isOverTarget(P,d,this.mode,U)){c.outEvts.push(d);}I[S]=true;delete this.dragOvers[S];}for(var R in a.groups){if("string"!=typeof R){continue;}for(S in this.ids[R]){var G=this.ids[R][S];if(!this.isTypeOfDD(G)){continue;}if(G.isTarget&&!G.isLocked()&&G!=a){if(this.isOverTarget(P,G,this.mode,U)){D[R]=true;if(L){c.dropEvts.push(G);}else{if(!I[G.id]){c.enterEvts.push(G);}else{c.overEvts.push(G);}this.dragOvers[G.id]=G;}}}}}this.interactionInfo={out:c.outEvts,enter:c.enterEvts,over:c.overEvts,drop:c.dropEvts,point:P,draggedRegion:U,sourceRegion:this.locationCache[a.id],validDrop:L};for(var C in D){Q.push(C);}if(L&&!c.dropEvts.length){this.interactionInfo.validDrop=false;if(a.events.invalidDrop){a.onInvalidDrop(V);a.fireEvent("invalidDropEvent",{e:V});}}for(S=0;S<E.length;S++){var Y=null;if(c[E[S]+"Evts"]){Y=c[E[S]+"Evts"];}if(Y&&Y.length){var H=E[S].charAt(0).toUpperCase()+E[S].substr(1),X="onDrag"+H,J="b4Drag"+H,O="drag"+H+"Event",W="drag"+H;if(this.mode){if(a.events[J]){a[J](V,Y,Q);a.fireEvent(J+"Event",{event:V,info:Y,group:Q});}if(a.events[W]){a[X](V,Y,Q);a.fireEvent(O,{event:V,info:Y,group:Q});}}else{for(var Z=0,T=Y.length;Z<T;++Z){if(a.events[J]){a[J](V,Y[Z].id,Q[0]);a.fireEvent(J+"Event",{event:V,info:Y[Z].id,group:Q[0]});}if(a.events[W]){a[X](V,Y[Z].id,Q[0]);a.fireEvent(O,{event:V,info:Y[Z].id,group:Q[0]});}}}}}},getBestMatch:function(E){var G=null;var D=E.length;if(D==1){G=E[0];}else{for(var F=0;F<D;++F){var C=E[F];if(this.mode==this.INTERSECT&&C.cursorIsOver){G=C;break;}else{if(!G||!G.overlap||(C.overlap&&G.overlap.getArea()<C.overlap.getArea())){G=C;}}}}return G;},refreshCache:function(D){var F=D||this.ids;for(var C in F){if("string"!=typeof C){continue;}for(var E in this.ids[C]){var G=this.ids[C][E];if(this.isTypeOfDD(G)){var H=this.getLocation(G);if(H){this.locationCache[G.id]=H;}else{delete this.locationCache[G.id];}}}}},verifyEl:function(D){try{if(D){var C=D.offsetParent;if(C){return true;}}}catch(E){}return false;},getLocation:function(H){if(!this.isTypeOfDD(H)){return null;}var F=H.getEl(),K,E,D,M,L,N,C,J,G;try{K=YAHOO.util.Dom.getXY(F);}catch(I){}if(!K){return null;}E=K[0];D=E+F.offsetWidth;M=K[1];L=M+F.offsetHeight;N=M-H.padding[0];C=D+H.padding[1];J=L+H.padding[2];G=E-H.padding[3];return new YAHOO.util.Region(N,C,J,G);},isOverTarget:function(K,C,E,F){var G=this.locationCache[C.id];if(!G||!this.useCache){G=this.getLocation(C);this.locationCache[C.id]=G;}if(!G){return false;}C.cursorIsOver=G.contains(K);var J=this.dragCurrent;if(!J||(!E&&!J.constrainX&&!J.constrainY)){return C.cursorIsOver;}C.overlap=null;if(!F){var H=J.getTargetCoord(K.x,K.y);var D=J.getDragEl();F=new YAHOO.util.Region(H.y,H.x+D.offsetWidth,H.y+D.offsetHeight,H.x);}var I=F.intersect(G);if(I){C.overlap=I;return(E)?true:C.cursorIsOver;}else{return false;}},_onUnload:function(D,C){this.unregAll();},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null;}this._execOnAll("unreg",[]);this.ids={};},elementCache:{},getElWrapper:function(D){var C=this.elementCache[D];if(!C||!C.el){C=this.elementCache[D]=new this.ElementWrapper(YAHOO.util.Dom.get(D));}return C;},getElement:function(C){return YAHOO.util.Dom.get(C);},getCss:function(D){var C=YAHOO.util.Dom.get(D);return(C)?C.style:null;},ElementWrapper:function(C){this.el=C||null;this.id=this.el&&C.id;this.css=this.el&&C.style;},getPosX:function(C){return YAHOO.util.Dom.getX(C);},getPosY:function(C){return YAHOO.util.Dom.getY(C);},swapNode:function(E,C){if(E.swapNode){E.swapNode(C);}else{var F=C.parentNode;var D=C.nextSibling;if(D==E){F.insertBefore(E,C);}else{if(C==E.nextSibling){F.insertBefore(C,E);}else{E.parentNode.replaceChild(C,E);F.insertBefore(E,D);}}}},getScroll:function(){var E,C,F=document.documentElement,D=document.body;if(F&&(F.scrollTop||F.scrollLeft)){E=F.scrollTop;C=F.scrollLeft;}else{if(D){E=D.scrollTop;C=D.scrollLeft;}else{}}return{top:E,left:C};},getStyle:function(D,C){return YAHOO.util.Dom.getStyle(D,C);},getScrollTop:function(){return this.getScroll().top;},getScrollLeft:function(){return this.getScroll().left;},moveToEl:function(C,E){var D=YAHOO.util.Dom.getXY(E);YAHOO.util.Dom.setXY(C,D);},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight();},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth();},numericSort:function(D,C){return(D-C);},_timeoutCount:0,_addListeners:function(){var C=YAHOO.util.DDM;if(YAHOO.util.Event&&document){C._onLoad();}else{if(C._timeoutCount>2000){}else{setTimeout(C._addListeners,10);if(document&&document.body){C._timeoutCount+=1;}}}},handleWasClicked:function(C,E){if(this.isHandle(E,C.id)){return true;}else{var D=C.parentNode;while(D){if(this.isHandle(E,D.id)){return true;}else{D=D.parentNode;}}}return false;}};}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners();}(function(){var A=YAHOO.util.Event;var B=YAHOO.util.Dom;YAHOO.util.DragDrop=function(E,C,D){if(E){this.init(E,C,D);}};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments);},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isTarget:true,padding:null,dragOnly:false,useShim:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(C,D){},startDrag:function(C,D){},b4Drag:function(C){},onDrag:function(C){},onDragEnter:function(C,D){},b4DragOver:function(C){},onDragOver:function(C,D){},b4DragOut:function(C){},onDragOut:function(C,D){},b4DragDrop:function(C){},onDragDrop:function(C,D){},onInvalidDrop:function(C){},b4EndDrag:function(C){},endDrag:function(C){},b4MouseDown:function(C){},onMouseDown:function(C){},onMouseUp:function(C){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=B.get(this.id);}return this._domRef;},getDragEl:function(){return B.get(this.dragElId);},init:function(F,C,D){this.initTarget(F,C,D);A.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var E in this.events){this.createEvent(E+"Event");}},initTarget:function(E,C,D){this.config=D||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof E!=="string"){this._domRef=E;E=B.generateId(E);}this.id=E;this.addToGroup((C)?C:"default");this.handleElId=E;A.onAvailable(E,this.handleOnAvailable,this,true);this.setDragElId(E);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events){for(var C in this.config.events){if(this.config.events[C]===false){this.events[C]=false;}}}this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);this.dragOnly=((this.config.dragOnly===true)?true:false);this.useShim=((this.config.useShim===true)?true:false);},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable();},setPadding:function(E,C,F,D){if(!C&&0!==C){this.padding=[E,E,E,E];}else{if(!F&&0!==F){this.padding=[E,C,E,C];}else{this.padding=[E,C,F,D];}}},setInitPosition:function(F,E){var G=this.getEl();if(!this.DDM.verifyEl(G)){if(G&&G.style&&(G.style.display=="none")){}else{}return;}var D=F||0;var C=E||0;var H=B.getXY(G);this.initPageX=H[0]-D;this.initPageY=H[1]-C;this.lastPageX=H[0];this.lastPageY=H[1];this.setStartPosition(H);},setStartPosition:function(D){var C=D||B.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=C[0];this.startPageY=C[1];},addToGroup:function(C){this.groups[C]=true;this.DDM.regDragDrop(this,C);},removeFromGroup:function(C){if(this.groups[C]){delete this.groups[C];}this.DDM.removeDDFromGroup(this,C);},setDragElId:function(C){this.dragElId=C;},setHandleElId:function(C){if(typeof C!=="string"){C=B.generateId(C);}this.handleElId=C;this.DDM.regHandle(this.id,C);},setOuterHandleElId:function(C){if(typeof C!=="string"){C=B.generateId(C);}A.on(C,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(C);this.hasOuterHandles=true;},unreg:function(){A.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this);},isLocked:function(){return(this.DDM.isLocked()||this.locked);},handleMouseDown:function(J,I){var D=J.which||J.button;if(this.primaryButtonOnly&&D>1){return;}if(this.isLocked()){return;}var C=this.b4MouseDown(J),F=true;if(this.events.b4MouseDown){F=this.fireEvent("b4MouseDownEvent",J);}var E=this.onMouseDown(J),H=true;if(this.events.mouseDown){H=this.fireEvent("mouseDownEvent",J);}if((C===false)||(E===false)||(F===false)||(H===false)){return;}this.DDM.refreshCache(this.groups);var G=new YAHOO.util.Point(A.getPageX(J),A.getPageY(J));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(G,this)){}else{if(this.clickValidator(J)){this.setStartPosition();this.DDM.handleMouseDown(J,this);this.DDM.stopEvent(J);}else{}}},clickValidator:function(D){var C=YAHOO.util.Event.getTarget(D);return(this.isValidHandleChild(C)&&(this.id==this.handleElId||this.DDM.handleWasClicked(C,this.id)));},getTargetCoord:function(E,D){var C=E-this.deltaX;var F=D-this.deltaY;if(this.constrainX){if(C<this.minX){C=this.minX;}if(C>this.maxX){C=this.maxX;}}if(this.constrainY){if(F<this.minY){F=this.minY;}if(F>this.maxY){F=this.maxY;}}C=this.getTick(C,this.xTicks);F=this.getTick(F,this.yTicks);return{x:C,y:F};},addInvalidHandleType:function(C){var D=C.toUpperCase();this.invalidHandleTypes[D]=D;},addInvalidHandleId:function(C){if(typeof C!=="string"){C=B.generateId(C);}this.invalidHandleIds[C]=C;},addInvalidHandleClass:function(C){this.invalidHandleClasses.push(C);},removeInvalidHandleType:function(C){var D=C.toUpperCase();delete this.invalidHandleTypes[D];},removeInvalidHandleId:function(C){if(typeof C!=="string"){C=B.generateId(C);}delete this.invalidHandleIds[C];},removeInvalidHandleClass:function(D){for(var E=0,C=this.invalidHandleClasses.length;E<C;++E){if(this.invalidHandleClasses[E]==D){delete this.invalidHandleClasses[E];}}},isValidHandleChild:function(F){var E=true;var H;try{H=F.nodeName.toUpperCase();}catch(G){H=F.nodeName;}E=E&&!this.invalidHandleTypes[H];E=E&&!this.invalidHandleIds[F.id];for(var D=0,C=this.invalidHandleClasses.length;E&&D<C;++D){E=!B.hasClass(F,this.invalidHandleClasses[D]);}return E;},setXTicks:function(F,C){this.xTicks=[];this.xTickSize=C;var E={};for(var D=this.initPageX;D>=this.minX;D=D-C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}for(D=this.initPageX;D<=this.maxX;D=D+C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}this.xTicks.sort(this.DDM.numericSort);},setYTicks:function(F,C){this.yTicks=[];this.yTickSize=C;var E={};for(var D=this.initPageY;D>=this.minY;D=D-C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}for(D=this.initPageY;D<=this.maxY;D=D+C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}this.yTicks.sort(this.DDM.numericSort);},setXConstraint:function(E,D,C){this.leftConstraint=parseInt(E,10);this.rightConstraint=parseInt(D,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(C){this.setXTicks(this.initPageX,C);}this.constrainX=true;},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks();},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0;},setYConstraint:function(C,E,D){this.topConstraint=parseInt(C,10);this.bottomConstraint=parseInt(E,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(D){this.setYTicks(this.initPageY,D);}this.constrainY=true;},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var D=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var C=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(D,C);}else{this.setInitPosition();}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize);}},getTick:function(I,F){if(!F){return I;}else{if(F[0]>=I){return F[0];}else{for(var D=0,C=F.length;D<C;++D){var E=D+1;if(F[E]&&F[E]>=I){var H=I-F[D];var G=F[E]-I;return(G>H)?F[D]:F[E];}}return F[F.length-1];}}},toString:function(){return("DragDrop "+this.id);}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider);})();YAHOO.util.DD=function(C,A,B){if(C){this.init(C,A,B);}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(C,B){var A=C-this.startPageX;var D=B-this.startPageY;this.setDelta(A,D);},setDelta:function(B,A){this.deltaX=B;this.deltaY=A;},setDragElPos:function(C,B){var A=this.getDragEl();this.alignElWithMouse(A,C,B);},alignElWithMouse:function(C,G,F){var E=this.getTargetCoord(G,F);if(!this.deltaSetXY){var H=[E.x,E.y];YAHOO.util.Dom.setXY(C,H);var D=parseInt(YAHOO.util.Dom.getStyle(C,"left"),10);var B=parseInt(YAHOO.util.Dom.getStyle(C,"top"),10);this.deltaSetXY=[D-E.x,B-E.y];}else{YAHOO.util.Dom.setStyle(C,"left",(E.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(C,"top",(E.y+this.deltaSetXY[1])+"px");}this.cachePosition(E.x,E.y);var A=this;setTimeout(function(){A.autoScroll.call(A,E.x,E.y,C.offsetHeight,C.offsetWidth);},0);},cachePosition:function(B,A){if(B){this.lastPageX=B;this.lastPageY=A;}else{var C=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=C[0];this.lastPageY=C[1];}},autoScroll:function(J,I,E,K){if(this.scroll){var L=this.DDM.getClientHeight();var B=this.DDM.getClientWidth();var N=this.DDM.getScrollTop();var D=this.DDM.getScrollLeft();var H=E+I;var M=K+J;var G=(L+N-I-this.deltaY);var F=(B+D-J-this.deltaX);var C=40;var A=(document.all)?80:30;if(H>L&&G<C){window.scrollTo(D,N+A);}if(I<N&&N>0&&I-N<C){window.scrollTo(D,N-A);}if(M>B&&F<C){window.scrollTo(D+A,N);}if(J<D&&D>0&&J-D<C){window.scrollTo(D-A,N);}}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false);},b4MouseDown:function(A){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(A),YAHOO.util.Event.getPageY(A));},b4Drag:function(A){this.setDragElPos(YAHOO.util.Event.getPageX(A),YAHOO.util.Event.getPageY(A));},toString:function(){return("DD "+this.id);}});YAHOO.util.DDProxy=function(C,A,B){if(C){this.init(C,A,B);this.initFrame();}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var B=this,A=document.body;if(!A||!A.firstChild){setTimeout(function(){B.createFrame();},50);return;}var F=this.getDragEl(),E=YAHOO.util.Dom;if(!F){F=document.createElement("div");F.id=this.dragElId;var D=F.style;D.position="absolute";D.visibility="hidden";D.cursor="move";D.border="2px solid #aaa";D.zIndex=999;D.height="25px";D.width="25px";var C=document.createElement("div");E.setStyle(C,"height","100%");E.setStyle(C,"width","100%");E.setStyle(C,"background-color","#ccc");E.setStyle(C,"opacity","0");F.appendChild(C);A.insertBefore(F,A.firstChild);}},initFrame:function(){this.createFrame();},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId);},showFrame:function(E,D){var C=this.getEl();var A=this.getDragEl();var B=A.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(B.width,10)/2),Math.round(parseInt(B.height,10)/2));}this.setDragElPos(E,D);YAHOO.util.Dom.setStyle(A,"visibility","visible");},_resizeProxy:function(){if(this.resizeFrame){var H=YAHOO.util.Dom;var B=this.getEl();var C=this.getDragEl();var G=parseInt(H.getStyle(C,"borderTopWidth"),10);var I=parseInt(H.getStyle(C,"borderRightWidth"),10);var F=parseInt(H.getStyle(C,"borderBottomWidth"),10);var D=parseInt(H.getStyle(C,"borderLeftWidth"),10);if(isNaN(G)){G=0;}if(isNaN(I)){I=0;}if(isNaN(F)){F=0;}if(isNaN(D)){D=0;}var E=Math.max(0,B.offsetWidth-I-D);var A=Math.max(0,B.offsetHeight-G-F);H.setStyle(C,"width",E+"px");H.setStyle(C,"height",A+"px");}},b4MouseDown:function(B){this.setStartPosition();var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.autoOffset(A,C);},b4StartDrag:function(A,B){this.showFrame(A,B);},b4EndDrag:function(A){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden");},endDrag:function(D){var C=YAHOO.util.Dom;var B=this.getEl();var A=this.getDragEl();C.setStyle(A,"visibility","");C.setStyle(B,"visibility","hidden");YAHOO.util.DDM.moveToEl(B,A);C.setStyle(A,"visibility","hidden");C.setStyle(B,"visibility","");},toString:function(){return("DDProxy "+this.id);}});YAHOO.util.DDTarget=function(C,A,B){if(C){this.initTarget(C,A,B);}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return("DDTarget "+this.id);}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.8.1",build:"19"});
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_isFormSubmit:false,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a);},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a;this._use_default_post_header=true;}else{if(typeof a=="boolean"){this._use_default_post_header=a;}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a;}else{this._use_default_xhr_header=a;}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a;}},createXhrObject:function(g){var d,a,b;try{a=new XMLHttpRequest();d={conn:a,tId:g,xhr:true};}catch(c){for(b=0;b<this._msxml_progid.length;++b){try{a=new ActiveXObject(this._msxml_progid[b]);d={conn:a,tId:g,xhr:true};break;}catch(f){}}}finally{return d;}},getConnectionObject:function(a){var c,d=this._transaction_id;try{if(!a){c=this.createXhrObject(d);}else{c={tId:d};if(a==="xdr"){c.conn=this._transport;c.xdr=true;}else{if(a==="upload"){c.upload=true;}}}if(c){this._transaction_id++;}}catch(b){}return c;},asyncRequest:function(h,d,g,a){var b=g&&g.argument?g.argument:null,e=this,f,c;if(this._isFileUpload){c="upload";}else{if(g&&g.xdr){c="xdr";}}f=this.getConnectionObject(c);if(!f){return null;}else{if(g&&g.customevents){this.initCustomEvents(f,g);}if(this._isFormSubmit){if(this._isFileUpload){window.setTimeout(function(){e.uploadFile(f,g,d,a);},10);return f;}if(h.toUpperCase()=="GET"){if(this._sFormData.length!==0){d+=((d.indexOf("?")==-1)?"?":"&")+this._sFormData;}}else{if(h.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData;}}}if(h.toUpperCase()=="GET"&&(g&&g.cache===false)){d+=((d.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString();}if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true);}}if((h.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header);}if(f.xdr){this.xdr(f,h,d,g,a);return f;}f.conn.open(h,d,true);if(this._has_default_headers||this._has_http_headers){this.setHeader(f);}this.handleReadyState(f,g);f.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState();}this.startEvent.fire(f,b);if(f.startEvent){f.startEvent.fire(f,b);}return f;}},initCustomEvents:function(a,c){var b;for(b in c.customevents){if(this._customEvents[b][0]){a[this._customEvents[b][0]]=new YAHOO.util.CustomEvent(this._customEvents[b][1],(c.scope)?c.scope:null);a[this._customEvents[b][0]].subscribe(c.customevents[b]);}}},handleReadyState:function(c,d){var b=this,a=(d&&d.argument)?d.argument:null;if(d&&d.timeout){this._timeOut[c.tId]=window.setTimeout(function(){b.abort(c,d,true);},d.timeout);}this._poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState===4){window.clearInterval(b._poll[c.tId]);delete b._poll[c.tId];if(d&&d.timeout){window.clearTimeout(b._timeOut[c.tId]);delete b._timeOut[c.tId];}b.completeEvent.fire(c,a);if(c.completeEvent){c.completeEvent.fire(c,a);}b.handleTransactionResponse(c,d);}},this._polling_interval);},handleTransactionResponse:function(b,j,d){var f,a,h=(j&&j.argument)?j.argument:null,c=(b.r&&b.r.statusText==="xdr:success")?true:false,i=(b.r&&b.r.statusText==="xdr:failure")?true:false,k=d;try{if((b.conn.status!==undefined&&b.conn.status!==0)||c){f=b.conn.status;}else{if(i&&!k){f=0;}else{f=13030;}}}catch(g){f=13030;}if((f>=200&&f<300)||f===1223||c){a=b.xdr?b.r:this.createResponseObject(b,h);if(j&&j.success){if(!j.scope){j.success(a);}else{j.success.apply(j.scope,[a]);}}this.successEvent.fire(a);if(b.successEvent){b.successEvent.fire(a);}}else{switch(f){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:a=this.createExceptionObject(b.tId,h,(d?d:false));if(j&&j.failure){if(!j.scope){j.failure(a);}else{j.failure.apply(j.scope,[a]);}}break;default:a=(b.xdr)?b.response:this.createResponseObject(b,h);if(j&&j.failure){if(!j.scope){j.failure(a);}else{j.failure.apply(j.scope,[a]);}}}this.failureEvent.fire(a);if(b.failureEvent){b.failureEvent.fire(a);}}this.releaseObject(b);a=null;},createResponseObject:function(a,h){var d={},k={},f,c,g,b;try{c=a.conn.getAllResponseHeaders();g=c.split("\n");for(f=0;f<g.length;f++){b=g[f].indexOf(":");if(b!=-1){k[g[f].substring(0,b)]=YAHOO.lang.trim(g[f].substring(b+2));}}}catch(j){}d.tId=a.tId;d.status=(a.conn.status==1223)?204:a.conn.status;d.statusText=(a.conn.status==1223)?"No Content":a.conn.statusText;d.getResponseHeader=k;d.getAllResponseHeaders=c;d.responseText=a.conn.responseText;d.responseXML=a.conn.responseXML;if(h){d.argument=h;}return d;},createExceptionObject:function(h,d,a){var f=0,g="communication failure",c=-1,b="transaction aborted",e={};e.tId=h;if(a){e.status=c;e.statusText=b;}else{e.status=f;e.statusText=g;}if(d){e.argument=d;}return e;},initHeader:function(a,d,c){var b=(c)?this._default_headers:this._http_headers;b[a]=d;if(c){this._has_default_headers=true;}else{this._has_http_headers=true;}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b]);}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b]);}}this._http_headers={};this._has_http_headers=false;}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false;},abort:function(e,g,a){var d,b=(g&&g.argument)?g.argument:null;e=e||{};if(e.conn){if(e.xhr){if(this.isCallInProgress(e)){e.conn.abort();window.clearInterval(this._poll[e.tId]);delete this._poll[e.tId];if(a){window.clearTimeout(this._timeOut[e.tId]);delete this._timeOut[e.tId];}d=true;}}else{if(e.xdr){e.conn.abort(e.tId);d=true;}}}else{if(e.upload){var c="yuiIO"+e.tId;var f=document.getElementById(c);if(f){YAHOO.util.Event.removeListener(f,"load");document.body.removeChild(f);if(a){window.clearTimeout(this._timeOut[e.tId]);delete this._timeOut[e.tId];}d=true;}}else{d=false;}}if(d===true){this.abortEvent.fire(e,b);if(e.abortEvent){e.abortEvent.fire(e,b);}this.handleTransactionResponse(e,g,true);}return d;},isCallInProgress:function(a){a=a||{};if(a.xhr&&a.conn){return a.conn.readyState!==4&&a.conn.readyState!==0;}else{if(a.xdr&&a.conn){return a.conn.isCallInProgress(a.tId);}else{if(a.upload===true){return document.getElementById("yuiIO"+a.tId)?true:false;}else{return false;}}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null;}}};(function(){var g=YAHOO.util.Connect,h={};function d(i){var j='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+i+'" width="0" height="0">'+'<param name="movie" value="'+i+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",k=document.createElement("div");document.body.appendChild(k);k.innerHTML=j;}function b(l,i,j,n,k){h[parseInt(l.tId)]={"o":l,"c":n};if(k){n.method=i;n.data=k;}l.conn.send(j,n,l.tId);}function e(i){d(i);g._transport=document.getElementById("YUIConnectionSwf");}function c(){g.xdrReadyEvent.fire();}function a(j,i){if(j){g.startEvent.fire(j,i.argument);if(j.startEvent){j.startEvent.fire(j,i.argument);}}}function f(j){var k=h[j.tId].o,i=h[j.tId].c;if(j.statusText==="xdr:start"){a(k,i);return;}j.responseText=decodeURI(j.responseText);k.r=j;if(i.argument){k.r.argument=i.argument;}this.handleTransactionResponse(k,i,j.statusText==="xdr:abort"?true:false);delete h[j.tId];}g.xdr=b;g.swf=d;g.transport=e;g.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");g.xdrReady=c;g.handleXdrResponse=f;})();(function(){var e=YAHOO.util.Connect,g=YAHOO.util.Event,a=document.documentMode?document.documentMode:false;e._isFileUpload=false;e._formNode=null;e._sFormData=null;e._submitElementValue=null;e.uploadEvent=new YAHOO.util.CustomEvent("upload");e._hasSubmitListener=function(){if(g){g.addListener(document,"click",function(k){var j=g.getTarget(k),i=j.nodeName.toLowerCase();if((i==="input"||i==="button")&&(j.type&&j.type.toLowerCase()=="submit")){e._submitElementValue=encodeURIComponent(j.name)+"="+encodeURIComponent(j.value);}});return true;}return false;}();function h(w,r,m){var v,l,u,s,z,t=false,p=[],y=0,o,q,n,x,k;this.resetFormState();if(typeof w=="string"){v=(document.getElementById(w)||document.forms[w]);}else{if(typeof w=="object"){v=w;}else{return;}}if(r){this.createFrame(m?m:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=v;return;}for(o=0,q=v.elements.length;o<q;++o){l=v.elements[o];z=l.disabled;u=l.name;if(!z&&u){u=encodeURIComponent(u)+"=";s=encodeURIComponent(l.value);switch(l.type){case"select-one":if(l.selectedIndex>-1){k=l.options[l.selectedIndex];p[y++]=u+encodeURIComponent((k.attributes.value&&k.attributes.value.specified)?k.value:k.text);}break;case"select-multiple":if(l.selectedIndex>-1){for(n=l.selectedIndex,x=l.options.length;n<x;++n){k=l.options[n];if(k.selected){p[y++]=u+encodeURIComponent((k.attributes.value&&k.attributes.value.specified)?k.value:k.text);}}}break;case"radio":case"checkbox":if(l.checked){p[y++]=u+s;}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(t===false){if(this._hasSubmitListener&&this._submitElementValue){p[y++]=this._submitElementValue;}t=true;}break;default:p[y++]=u+s;}}}this._isFormSubmit=true;this._sFormData=p.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData;}function d(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData="";}function c(i){var j="yuiIO"+this._transaction_id,l=(a===9)?true:false,k;if(YAHOO.env.ua.ie&&!l){k=document.createElement('<iframe id="'+j+'" name="'+j+'" />');if(typeof i=="boolean"){k.src="javascript:false";}}else{k=document.createElement("iframe");k.id=j;k.name=j;}k.style.position="absolute";k.style.top="-1000px";k.style.left="-1000px";document.body.appendChild(k);}function f(j){var m=[],k=j.split("&"),l,n;for(l=0;l<k.length;l++){n=k[l].indexOf("=");if(n!=-1){m[l]=document.createElement("input");m[l].type="hidden";m[l].name=decodeURIComponent(k[l].substring(0,n));m[l].value=decodeURIComponent(k[l].substring(n+1));this._formNode.appendChild(m[l]);}}return m;}function b(m,y,n,l){var t="yuiIO"+m.tId,u="multipart/form-data",w=document.getElementById(t),p=(a>=8)?true:false,z=this,v=(y&&y.argument)?y.argument:null,x,s,k,r,j,q;j={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",n);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",t);if(YAHOO.env.ua.ie&&!p){this._formNode.setAttribute("encoding",u);}else{this._formNode.setAttribute("enctype",u);}if(l){x=this.appendPostData(l);}this._formNode.submit();this.startEvent.fire(m,v);if(m.startEvent){m.startEvent.fire(m,v);}if(y&&y.timeout){this._timeOut[m.tId]=window.setTimeout(function(){z.abort(m,y,true);},y.timeout);}if(x&&x.length>0){for(s=0;s<x.length;s++){this._formNode.removeChild(x[s]);}}for(k in j){if(YAHOO.lang.hasOwnProperty(j,k)){if(j[k]){this._formNode.setAttribute(k,j[k]);}else{this._formNode.removeAttribute(k);}}}this.resetFormState();q=function(){var i,A,B;if(y&&y.timeout){window.clearTimeout(z._timeOut[m.tId]);delete z._timeOut[m.tId];}z.completeEvent.fire(m,v);if(m.completeEvent){m.completeEvent.fire(m,v);}r={tId:m.tId,argument:v};try{i=w.contentWindow.document.getElementsByTagName("body")[0];A=w.contentWindow.document.getElementsByTagName("pre")[0];if(i){if(A){B=A.textContent?A.textContent:A.innerText;}else{B=i.textContent?i.textContent:i.innerText;}}r.responseText=B;r.responseXML=w.contentWindow.document.XMLDocument?w.contentWindow.document.XMLDocument:w.contentWindow.document;}catch(o){}if(y&&y.upload){if(!y.scope){y.upload(r);}else{y.upload.apply(y.scope,[r]);}}z.uploadEvent.fire(r);if(m.uploadEvent){m.uploadEvent.fire(r);}g.removeListener(w,"load",q);setTimeout(function(){document.body.removeChild(w);z.releaseObject(m);},100);};g.addListener(w,"load",q);}e.setForm=h;e.resetFormState=d;e.createFrame=c;e.appendPostData=f;e.uploadFile=b;})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.9.0",build:"2800"});